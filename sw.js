(()=>{"use strict";var e=(e,t,n)=>new Promise(((s,r)=>{var c=e=>{try{o(n.next(e))}catch(e){r(e)}},i=e=>{try{o(n.throw(e))}catch(e){r(e)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(c,i);o((n=n.apply(e,t)).next())}));const t="asset-cache",n=e=>new Promise((t=>{setTimeout((()=>t()),e)})),s=/.+\.[0-9a-f]{8}\..*(js|css|woff2?|svg|png|jpg|jpeg|json|wasm)$/,r=/(.*cdnjs.cloudflare.com.*)|(.*fonts.googleapis.com.*)|(.*cdn-us.imgs.moe.*)/,c=["https://lib.baomitu.com/fonts/nanum-pen-script/nanum-pen-script-regular.woff2"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(t).then((function(e){return e.addAll(c)})).then((function(){return self.skipWaiting()})))})),self.addEventListener("activate",(e=>{e.waitUntil(Promise.race([n(3e3),Promise.all([self.caches.delete(t),self.clients.claim()])]))})),self.addEventListener("fetch",(i=>{const{url:o}=i.request;return!(!o.startsWith("http")||!(c.includes(o)||o.match(s)||o.match(r))||(i.respondWith(function(s){return e(this,null,(function*(){const r=yield function(t){return e(this,null,(function*(){try{return yield Promise.race([n(3e3).then((()=>Promise.reject(new Error("TIMEOUT")))),t()])}catch(e){return void console.error(e)}}))}((()=>e(this,null,(function*(){const e=yield self.caches.open(t),n=yield e.match(s.request);return{cache:e,cached:n}})))),{cache:c,cached:i}=r||{};if(c&&i){if(i.ok)return i;yield c.delete(s.request)}const o=yield fetch(s.request);return o.ok&&c&&c.put(s.request,o.clone()),o}))}(i)),0))}))})();