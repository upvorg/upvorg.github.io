"use strict";(self.webpackChunk_web_index=self.webpackChunk_web_index||[]).push([[9815],{818:function(I,O,n){n.d(O,{Z:function(){return d}});var t=n(3148),a=n(5168),m=n(3621),b=n(785),D=n.n(b),j=n(4247),x=n(7790),N=n(2787),h=n(882),g={},d=({id:f,onFocus:v,onBlur:E})=>{const[y,$]=(0,a.useState)(null),[S,R]=(0,a.useState)(""),p=(0,x.L)();(0,a.useEffect)(()=>{N.od.get(`/post/${f}/comments`).then(c=>{$((c==null?void 0:c.data)||[])}).catch(()=>{$([])})},[]);const M=()=>{if(!S){m.ZP.error("\u5199\u70B9\u4EC0\u4E48\u5427");return}N.od.post(`/post/${f}/comment`,{data:{content:S}}).then(c=>{c.err||(R(""),$([c.data,...y]))})},B=c=>{c.ctrlKey&&c.keyCode===13&&M()};return(0,t.jsxs)("div",{className:"video-comment",children:[(0,t.jsx)("div",{className:"video-comment__title",children:(0,t.jsx)("h4",{children:"\u8BC4\u8BBA"})}),(0,t.jsxs)("div",{className:"video-comment-edit",children:[(0,t.jsx)("img",{className:"video-comment-edit__avatar",src:(p==null?void 0:p.Avatar)||"/ic_launcher_round.png",alt:""}),(0,t.jsx)("textarea",{className:"video-comment-edit__input",placeholder:"\u7559\u4E0B\u8BC4\u8BBA...",disabled:!p,value:S,onChange:c=>R(c.target.value),onKeyDown:B,onFocus:c=>v==null?void 0:v(c),onBlur:c=>E==null?void 0:E(c)}),(0,t.jsx)("button",{disabled:!p||!S,className:"button is-primary video-comment-edit__button",onClick:M,children:"\u8BC4\u8BBA"})]}),(0,t.jsx)("div",{className:"comment-list",children:y?y.length>0?(0,t.jsx)("ul",{children:y.map(c=>{var Y,F;return(0,t.jsxs)("li",{className:D()("comment-item",{"--o":(p==null?void 0:p.ID)==c.Uid}),children:[(0,t.jsxs)("div",{className:"comment-item__head",children:[(0,t.jsx)("img",{className:"comment-item__avatar",src:(Y=c.Creator)==null?void 0:Y.Avatar,alt:""}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"comment-item__name",children:(F=c.Creator)==null?void 0:F.Nickname}),(0,t.jsx)("p",{className:"comment-item__time",children:(0,j.wb)(c.CreatedAt)})]})]}),(0,t.jsx)("div",{className:"comment-item__content",children:(0,t.jsx)("p",{children:c.Content})})]},c.ID)})}):(0,t.jsx)("p",{className:"empty",children:"\u6682\u65E0\u8BC4\u8BBA"}):(0,t.jsx)(h.wM,{})})]})}},3785:function(I,O,n){n.d(O,{$:function(){return a}});var t=n(3148);const a=({tags:m})=>m.length?(0,t.jsx)("div",{className:"tags are-medium",children:m.map(({href:b,title:D},j)=>(0,t.jsx)("a",{className:"tag is-primary is-light",href:b,target:"_blank",style:{fontSize:"0.9rem"},children:D},j))}):null},882:function(I,O,n){n.d(O,{wM:function(){return c},pA:function(){return Y},iR:function(){return F}});var t=n(3148),a=n(5168);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var m=function(){return m=Object.assign||function(l){for(var s,i=1,o=arguments.length;i<o;i++){s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(l[u]=s[u])}return l},m.apply(this,arguments)};function b(e,l){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&l.indexOf(i)<0&&(s[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)l.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(s[i[o]]=e[i[o]]);return s}var D=function(){return Math.random().toString(36).substring(6)},j=function(e){var l=e.animate,s=e.animateBegin,i=e.backgroundColor,o=e.backgroundOpacity,u=e.baseUrl,L=e.children,k=e.foregroundColor,H=e.foregroundOpacity,C=e.gradientRatio,A=e.gradientDirection,w=e.uniqueKey,P=e.interval,G=e.rtl,J=e.speed,Q=e.style,V=e.title,Z=e.beforeMask,_=b(e,["animate","animateBegin","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","gradientDirection","uniqueKey","interval","rtl","speed","style","title","beforeMask"]),T=w||D(),z=T+"-diff",W=T+"-animated-diff",X=T+"-aria",q=G?{transform:"scaleX(-1)"}:null,U="0; "+P+"; 1",K=J+"s",ee=A==="top-bottom"?"rotate(90)":void 0;return(0,a.createElement)("svg",m({"aria-labelledby":X,role:"img",style:m(m({},Q),q)},_),V?(0,a.createElement)("title",{id:X},V):null,Z&&(0,a.isValidElement)(Z)?Z:null,(0,a.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+u+"#"+z+")",style:{fill:"url("+u+"#"+W+")"}}),(0,a.createElement)("defs",null,(0,a.createElement)("clipPath",{id:z},L),(0,a.createElement)("linearGradient",{id:W,gradientTransform:ee},(0,a.createElement)("stop",{offset:"0%",stopColor:i,stopOpacity:o},l&&(0,a.createElement)("animate",{attributeName:"offset",values:-C+"; "+-C+"; 1",keyTimes:U,dur:K,repeatCount:"indefinite",begin:s})),(0,a.createElement)("stop",{offset:"50%",stopColor:k,stopOpacity:H},l&&(0,a.createElement)("animate",{attributeName:"offset",values:-C/2+"; "+-C/2+"; "+(1+C/2),keyTimes:U,dur:K,repeatCount:"indefinite",begin:s})),(0,a.createElement)("stop",{offset:"100%",stopColor:i,stopOpacity:o},l&&(0,a.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+C),keyTimes:U,dur:K,repeatCount:"indefinite",begin:s})))))};j.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,gradientDirection:"left-right",id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading...",beforeMask:null};var x=function(e){return e.children?(0,a.createElement)(j,m({},e)):(0,a.createElement)(N,m({},e))},N=function(e){return(0,a.createElement)(x,m({viewBox:"0 0 476 124"},e),(0,a.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,a.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},h=function(e){return createElement(x,m({viewBox:"0 0 400 460"},e),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},g=function(e){return createElement(x,m({viewBox:"0 0 340 84"},e),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},r=function(e){return createElement(x,m({viewBox:"0 0 400 110"},e),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},d=function(e){return createElement(x,m({viewBox:"0 0 245 125"},e),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},f=x,v=Object.defineProperty,E=Object.defineProperties,y=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,p=(e,l,s)=>l in e?v(e,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[l]=s,M=(e,l)=>{for(var s in l||(l={}))S.call(l,s)&&p(e,s,l[s]);if($)for(var s of $(l))R.call(l,s)&&p(e,s,l[s]);return e},B=(e,l)=>E(e,y(l));const c=e=>(0,t.jsxs)(f,B(M({viewBox:"0 0 462 160"},e),{children:[(0,t.jsx)("rect",{x:"70",y:"16",rx:"5",ry:"5",width:"100",height:"12"}),(0,t.jsx)("rect",{x:"70",y:"39",rx:"5",ry:"5",width:"321",height:"20"}),(0,t.jsx)("circle",{cx:"26",cy:"40",r:"26"})]})),Y=e=>(0,t.jsxs)(f,B(M({viewBox:"0 0 500 200"},e),{style:{padding:"0.5em"},children:[(0,t.jsx)("rect",{x:"60",y:"25",rx:"5",ry:"5",width:"50",height:"10"}),(0,t.jsx)("rect",{x:"60",y:"45",rx:"5",ry:"5",width:"60",height:"10"}),(0,t.jsx)("rect",{x:"0",y:"80",rx:"5",ry:"5",width:"46%",height:"20"}),(0,t.jsx)("rect",{x:"0",y:"110",rx:"5",ry:"5",width:"100%",height:"20"}),(0,t.jsx)("rect",{x:"0",y:"140",rx:"5",ry:"5",width:"70%",height:"20"}),(0,t.jsx)("rect",{x:"0",y:"170",rx:"5",ry:"5",width:"60%",height:"20"}),(0,t.jsx)("circle",{cx:"26",cy:"40",r:"26"})]})),F=e=>(0,t.jsxs)(f,B(M({viewBox:"0 0 462 160"},e),{children:[(0,t.jsx)("rect",{x:"70",y:"16",rx:"5",ry:"5",width:"100",height:"12"}),(0,t.jsx)("rect",{x:"70",y:"39",rx:"5",ry:"5",width:"321",height:"20"}),(0,t.jsx)("circle",{cx:"26",cy:"40",r:"26"})]}));c.metadata={name:"comment",github:"comment",description:"comment",filename:"CommentSkeleton"}},7443:function(I,O,n){n.d(O,{U:function(){return s}});var t=n(3148),a=n(3542),m=n(5073),b=n(8322),D=n(2597),j=n(8535),x=n(2890),N=n(7131),h=n(5916),g=n(4704),r=n(923),d=n(3436),f={},v=Object.defineProperty,E=Object.defineProperties,y=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,p=(i,o,u)=>o in i?v(i,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[o]=u,M=(i,o)=>{for(var u in o||(o={}))S.call(o,u)&&p(i,u,o[u]);if($)for(var u of $(o))R.call(o,u)&&p(i,u,o[u]);return i},B=(i,o)=>E(i,y(o)),c=(i,o,u)=>new Promise((L,k)=>{var H=w=>{try{A(u.next(w))}catch(P){k(P)}},C=w=>{try{A(u.throw(w))}catch(P){k(P)}},A=w=>w.done?L(w.value):Promise.resolve(w.value).then(H,C);A((u=u.apply(i,o)).next())}),Y,F;const e={render:{view:{menu:!1,md:!1,html:!0},classname:"markdown_render"},editor:{view:{menu:!0,md:!0,html:!1},classname:"markdown_editor"}},l=(0,a.l)().use(m.Z).use(j.Z).use(b.Z,{allowDangerousHtml:!0}).use(D.Z).use(x.Z,{properties:"attr"}).use(N.Z,B(M({},h.R),{attributes:B(M({},h.R.attributes),{img:[...((F=(Y=h.R)==null?void 0:Y.attributes)==null?void 0:F.img)||[],["style"]]})})).use(g.Z),s=i=>{const{value:o="",type:u,onChange:L,customClassName:k="",placeholder:H=""}=i,{view:C,classname:A}=e[u];let w=`markdown ${A}`;return k&&(w+=` ${k}`),(0,t.jsx)(r.ZP,{className:w,readOnly:u==="render",view:C,value:o,htmlClass:"markdown-body",renderHTML:P=>c(void 0,null,function*(){return(yield l.process(P)).toString()}),onChange:P=>L==null?void 0:L(P.text),placeholder:H})}},4247:function(I,O,n){n.d(O,{p6:function(){return m},qF:function(){return a},wb:function(){return t}});function t(h){const g=new Date,r=typeof h=="string"?new Date(h):new Date(h),d=(g.getTime()-r.getTime())/1e3;return d<30?"\u521A\u521A":d<3600?Math.ceil(d/60)+"\u5206\u949F\u524D":d<3600*24?Math.ceil(d/3600)+"\u5C0F\u65F6\u524D":d<3600*24*2?"1\u5929\u524D":d<3600*24*31?Math.ceil(d/3600/24)+"\u5929\u524D":g.getFullYear()===r.getFullYear()?`${r.getMonth()+1}\u6708${r.getDate()}\u65E5`:`${r.getFullYear()}\u5E74${r.getMonth()+1}\u6708${r.getDate()}\u65E5`}function a(h){const g=new Date,r=typeof h=="string"?new Date(h):new Date(h),d=(g.getTime()-r.getTime())/1e3;return d<3600*24?"\u4ECA\u5929":d<3600*24*2?"\u6628\u5929":d<3600*24*31?Math.ceil(d/3600/24)+"\u5929\u524D":g.getFullYear()===r.getFullYear()?`${r.getMonth()+1}\u6708${r.getDate()}\u65E5`:`${r.getFullYear()}\u5E74${r.getMonth()+1}\u6708${r.getDate()}\u65E5`}function m(h,g=!1){const r=typeof h=="string"?new Date(h):new Date(h);return new Date().getFullYear()===r.getFullYear()?`${r.getMonth()+1}\u6708${r.getDate()}\u65E5 ${g?` ${r.getHours()}:${r.getMinutes().toString().padStart(2,"0")}`:""}`:`${r.getFullYear()}\u5E74${r.getMonth()+1}\u6708${r.getDate()}\u65E5 ${g?` ${r.getHours()}:${r.getMinutes().toString().padStart(2,"0")}`:""}`}const b=1,D=2,j=3,x=4;function N(h,g=3){if(!h)return"";const r=new Date(h),d=r.getFullYear(),f=`${`0${r.getMonth()+1}`.slice(-2)}`,v=`${`0${r.getDate()}`.slice(-2)}`,E=`${`0${r.getHours()}`.slice(-2)}`,y=`${`0${r.getMinutes()}`.slice(-2)}`,$=`${`0${r.getSeconds()}`.slice(-2)}`;switch(g){case b:return`${d}-${f}-${v}`;case D:return`${f}-${v} ${E}:${y}`;case x:return`${d}-${f}-${v} ${E}:${y}:${$}`;case j:return`${d}-${f}-${v} ${E}:${y}`;default:return`${d}-${f}-${v} ${E}:${y}`}}}}]);
