"use strict";(self.webpackChunk_web_index=self.webpackChunk_web_index||[]).push([[193],{9587:function(at,Le,le){le.d(Le,{$:function(){return Te},Ee:function(){return K},G6:function(){return dt},ZP:function(){return Ie},gn:function(){return Ne},tq:function(){return ht}});var s=(d,r,c)=>new Promise((g,l)=>{var b=P=>{try{k(c.next(P))}catch(T){l(T)}},v=P=>{try{k(c.throw(P))}catch(T){l(T)}},k=P=>P.done?g(P.value):Promise.resolve(P.value).then(b,v);k((c=c.apply(d,r)).next())}),ve,q,be,ye,$e,ne,xe,R,F;function j(d){return X(d).toString(36)}function X(d){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=1540483477,g=24,l=r^d.length,b=d.length,v=0;for(;b>=4;){let k=W(d,v);k=D(k,c),k^=k>>>g,k=D(k,c),l=D(l,c),l^=k,v+=4,b-=4}switch(b){case 3:l^=Y(d,v),l^=d.charCodeAt(v+2)<<16,l=D(l,c);break;case 2:l^=Y(d,v),l=D(l,c);break;case 1:l^=d.charCodeAt(v),l=D(l,c);break}return l^=l>>>13,l=D(l,c),l^=l>>>15,l>>>0}function W(d,r){return d.charCodeAt(r++)+(d.charCodeAt(r++)<<8)+(d.charCodeAt(r++)<<16)+(d.charCodeAt(r)<<24)}function Y(d,r){return d.charCodeAt(r++)+(d.charCodeAt(r++)<<8)}function D(d,r){d=d|0,r=r|0;let c=d&65535,g=d>>>16;return c*r+((g*r&65535)<<16)|0}function J(d){return!!(d&&typeof d=="object"&&!Array.isArray(d))}function K(d){for(var r=arguments.length,c=new Array(r>1?r-1:0),g=1;g<r;g++)c[g-1]=arguments[g];if(!c.length)return d;const l=c.shift();if(J(d)&&J(l))for(const b in l)J(l[b])?(d[b]||Object.assign(d,{[b]:{}}),K(d[b],l[b])):Object.assign(d,{[b]:l[b]});return K.apply(void 0,[d].concat(c))}function _(d){if(typeof d!="object"||d===null)return!1;let r=d;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(d)===r}function ce(d){let r=[":",".","[",">"," "],c=!1,g=d.charAt(0);for(let l=0;l<r.length;l++)if(g===r[l]){c=!0;break}return c||d.indexOf("&")>=0}var ke=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function C(d){if(d.indexOf(",")===-1)return[d];for(var r=[],c=[],g=0,l;l=ke.exec(d);)switch(l[0]){case"(":g++;break;case")":g--;break;case",":if(g)break;r.push(l.index)}for(l=r.length;l--;)c.unshift(d.slice(r[l]+1)),d=d.slice(0,r[l]);return c.unshift(d),c}function z(d,r){let c=C(d);return C(r).map(l=>l.indexOf("&")>=0?l:"&"+l).reduce((l,b)=>l.concat(c.map(v=>b.replace(/\&/g,v))),[]).join(",")}function Q(d,r){return d?"@media "+d.substring(6)+" and "+r.substring(6):r}function ee(d){return d.indexOf("@media")===0}function I(d){return d.indexOf("@keyframes")===0}function ze(d){return d.indexOf("@global")===0}function ge(d,r){var c;let g=r.rules,l=r.mediaQuery,b=r.globalSelector,v={};return b&&(d=b),(c=Object.keys(g))==null||c.forEach(k=>{if(ze(k)){const G=k;k=k.substring(8);const N=k.indexOf("&");let U;N!=-1?(U=z(d,k),b=k.substring(0,N-1).trim()):U=k,K(v,ge(U,{mediaQuery:l,rules:g[G],globalSelector:U}))}else if(ce(k))K(v,ge(z(d,k),{rules:g[k],mediaQuery:l}));else if(ee(k))K(v,ge(d,{mediaQuery:Q(l,k),rules:g[k]}));else if(l){var P,T,B,H;(P=v[l])!==null&&P!==void 0||(v[l]={}),(H=(T=v[l])[B=d])!==null&&H!==void 0||(T[B]={}),v[l][d][k]=g[k]}else if(I(k))v[k]=g[k];else{var A,V;(V=v[A=d])!==null&&V!==void 0||(v[A]={}),v[d][k]=g[k]}}),v}function He(d){let r=[];for(const c in d)if(Object.hasOwnProperty.call(d,c)){const g=d[c];J(g)?r.push(c+"{"+He(g)+"}"):r.push(c+":"+g)}return/^\d%/.test(r[0])?r.join(" "):r.join(";")}function Ve(d){let r=[];for(const c in d)if(Object.hasOwnProperty.call(d,c)){const g=d[c];if(ee(c))r.push(c+"{"+Ve(g)+"}");else if(I(c))r.push(c+"{"+He(g)+"}");else{const l=Object.entries(g).map(b=>{let v=b[0],k=b[1];return v+":"+k}).join(";");r.push(c+"{"+l+"}")}}return r}function lt(d,r){return Ve(ge(r,{rules:d}))}var Te;(d=>{d.create=function(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const k=l.indexOf("#")!==-1,P=l.indexOf(".")!==-1,T=k?l.split("#"):P?l.split("."):[l],B=T[0],H=T[1],A=document.createElement(B);return k&&(A.id=H),P&&A.classList.add(H),v&&(A.innerHTML=v),Object.keys(b).forEach(V=>{const G=b[V];(B==="video"||B==="audio")&&typeof G=="boolean"?G&&A.setAttribute(V,""):typeof G!="undefined"&&A.setAttribute(V,""+G)}),A},d.render=(l,b)=>b.appendChild(l),d.isBrowser=()=>!!(typeof globalThis!="undefined"&&globalThis.document&&globalThis.document.documentElement);function r(l){if(!(0,d.isBrowser)())return null;let b=document.createElement("style");b.setAttribute("data-"+l,""),b.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(b);for(let v=0;v<document.styleSheets.length;v++)if(document.styleSheets[v].ownerNode===b)return document.styleSheets.item(v);return null}d.createSheet=r;const c=(()=>{const l=Object.create({});return b=>{const v=typeof b=="object"?JSON.stringify(b):b;return l[v]||(l[v]="css-"+j(v)),l[v]}})();d.createCss=l=>{let b=l.sheet,v=l.ssrData;return function(){for(var k,P=arguments.length,T=new Array(P),B=0;B<P;B++)T[B]=arguments[B];const H=!!(T[0]&&T[0].length&&T[0].raw);let A="";if(H){let N=T[0];A+=N[0];for(let U=1;U<T.length;U++)A+=typeof T[U]!="string"?"":T[U],A+=N[U]}else typeof T[0]=="string"?A=T[0]:A=JSON.stringify(T[0]);const V=c(A);if(b){for(let N=0;N<b.cssRules.length;N++)if(((k=b.cssRules[N])==null?void 0:k.selectorText)=="."+V)return V}let G=["."+V+"{"+A+"}"];return!H&&typeof T[0]=="object"&&(G=lt(T[0],"."+V)),b?G.forEach(N=>{b.insertRule(N,b.cssRules.length)}):v=v.concat(G),V}},d.createStyled=()=>{const l=[],b=r("oplayer");return{css:(0,d.createCss)({sheet:b,ssrData:l}),getCssValue:()=>l}};var g=(0,d.createStyled)();d.css=g.css,d.getCssValue=g.getCssValue,d.cls=l=>"css-"+j(l)})(Te||(Te={}));const we=Te,ct=/(iPad)/gi.test((ve=globalThis.navigator)==null?void 0:ve.userAgent)||/Macintosh/i.test((q=globalThis.navigator)==null?void 0:q.userAgent)&&!!((be=globalThis.navigator)!=null&&be.maxTouchPoints)&&((ye=globalThis.navigator)==null?void 0:ye.maxTouchPoints)>=1,ut=/iPhone/gi.test(($e=globalThis.navigator)==null?void 0:$e.userAgent),dt=/^((?!chrome|android).)*safari/i.test((ne=globalThis.navigator)==null?void 0:ne.userAgent),Ne=ut||ct,ht=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test((xe=globalThis.navigator)==null?void 0:xe.userAgent)||Ne,gt=/mqqbrowser/i.test((R=globalThis.navigator)==null?void 0:R.userAgent)&&!/ qq/i.test((F=globalThis.navigator)==null?void 0:F.userAgent),Ue=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","encrypted","waitingforkey","enterpictureinpicture","leavepictureinpicture"],Xe=["contextmenu"],Pe=["loadedplugin","videoqualitychange","videosourcechange","destroy"],M=[].concat(Ue,Xe,Pe);class We{constructor(){this.events=Object.create(null)}on(r,c){this.events[r]||(this.events[r]=[]),this.events[r].push(c)}onAny(r,c){r.forEach(g=>this.on(g,c))}once(r,c){const g=l=>{c({type:r,payload:l.payload})};g.raw=c,this.on(r,g)}off(r,c){if(this.events[r])for(let g=0;g<this.events[r].length;g++){const l=this.events[r][g];(l==c||c==l.raw)&&this.events[r].splice(g,1)}}offAny(r){this.events[r]=[]}offAll(){this.events=Object.create(null)}emit(r,c){var g,l;const b=[];(g=this.events[r])==null||g.forEach(v=>{v({type:r,payload:c}),v.raw&&b.push(v)}),(l=this.events["*"])==null||l.forEach(v=>{v({type:r,payload:c}),v.raw&&b.push(v)}),b.forEach(v=>{this.off(r,v)})}}const fe={Play:"\u64AD\u653E",Pause:"\u6682\u505C",Loop:"\u5FAA\u73AF\u64AD\u653E",Volume:"\u97F3\u91CF","Volume: %s":"\u97F3\u91CF\uFF1A%s",Mute:"\u9759\u97F3",Speed:"\u64AD\u653E\u901F\u5EA6",LIVE:"\u76F4\u64AD",Language:"\u8BED\u8A00",Screenshot:"\u622A\u56FE",Subtitle:"\u5B57\u5E55",Quality:"\u753B\u8D28",Fullscreen:"\u5168\u5C4F","TextDecoder Not Supported":"\u4E0D\u652F\u6301\u539F\u751F\u5B57\u5E55",Settings:"\u8BBE\u7F6E","Picture in Picture":"\u753B\u4E2D\u753B",Danmaku:"\u5F39\u5E55",Display:"\u663E\u793A",Opacity:"\u900F\u660E\u5EA6",FontSize:"\u5B57\u4F53\u5927\u5C0F","Display Area":"\u663E\u793A\u533A\u57DF",Off:"\u5173\u95ED",Auto:"\u81EA\u52A8",Default:"\u9ED8\u8BA4",Normal:"\u6B63\u5E38","%ss":"%s\u79D2",Close:"\u5173\u95ED","Can be closed after %ss":"%s\u79D2\u540E\u53EF\u5173\u95ED\u5E7F\u544A"};class Ze{constructor(r){this.languages={zh:fe,"zh-CN":fe,en:Object.keys(fe).reduce((c,g)=>(c[g]=g,c),{})},this.lang=r==="auto"?navigator.language:r,this.languages[this.lang]||navigator.languages.some(c=>{if(this.languages[c])return this.lang=c,!0;if(c.indexOf("-")!==-1){const g=c.split("-")[0];if(g&&this.languages[g])return this.lang=g,!0}return!1}),this.languages[this.lang]||(this.lang="zh-CN")}get(r){for(var c=arguments.length,g=new Array(c>1?c-1:0),l=1;l<c;l++)g[l-1]=arguments[l];const b=this.languages[this.lang][r];if(b==null)return r;let v=0;return b.replace(/%s/gi,()=>{var k;return(k=g[v++])!==null&&k!==void 0?k:""})}update(r){K(this.languages,r)}}const Ce={autoplay:!1,muted:!1,loop:!1,volume:1,preload:"metadata",playbackRate:1,playsinline:!0,lang:"auto",source:{},videoAttr:{},isLive:!1,autopause:!0,isNativeUI:()=>gt},Fe=class Se{constructor(r,c){if(this.plugins=[],this.context={},this.listeners=Object.create(null),this.hasError=!1,this.isSourceChanging=!1,this.container=typeof r=="string"?document.querySelector(r):r,!this.container)throw new Error((typeof r=="string"?r:"Element")+"does not exist");this.options=Object.assign({},Ce,typeof c=="string"?{source:{src:c}}:c),this.locales=new Ze(this.options.lang),this.eventEmitter=new We}static make(r,c){return new Se(r,c)}use(r){return r.forEach(c=>{this.plugins.push(c)}),this}create(){return this.render(),this.initEvent(),this.plugins.forEach(this.applyPlugin.bind(this)),this.options.source.src&&this.load(this.options.source),Se.players.push(this),this}initEvent(){const r=g=>{this.$video.error&&(this.hasError=!0,this.eventEmitter.emit("error",g))};this.listeners.error=r,this.$video.addEventListener("error",g=>this.listeners.error(g));const c=(g,l)=>{this.eventEmitter.emit(g,l)};[[this.$video,["fullscreenchange","webkitbeginfullscreen","webkitendfullscreen"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]],[this.$root,["fullscreenchange","webkitfullscreenchange"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]]].forEach(g=>{const l=g[0];g.slice(1).forEach(v=>{const k=v[0];this.listeners[k]=c,v.forEach(P=>{l.addEventListener(P,T=>{this.listeners[k](k,T)},{passive:!0})})})}),[[this.$video,Ue],[this.$root,Xe]].forEach(g=>{let l=g[0];g[1].forEach(v=>{this.listeners[v]||(this.listeners[v]=c,l.addEventListener(v,k=>{var P;(P=this.listeners)==null||P[v](v,k)},{passive:!0}))})})}render(){this.$video=we.create("video."+we.css(`
        width: 100%;
        height: 100%;
        display: block;
        position: relative;
      `),Object.assign({autoplay:this.options.autoplay,loop:this.options.loop,playsinline:this.options.playsinline,"webkit-playsinline":this.options.playsinline,"x5-playsinline":this.options.playsinline,preload:this.options.preload,poster:this.options.source.poster},this.options.videoAttr));const r=this.options,c=r.muted,g=r.volume,l=r.playbackRate;c&&this.mute(),this.$video.volume=g,setTimeout(()=>{this.setPlaybackRate(l)}),this.$root=we.create("div."+we.css(`
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #000;
      `)),we.render(this.$video,this.$root),we.render(this.$root,this.container)}load(r){return s(this,null,function*(){var c;yield(c=this.loader)==null?void 0:c.destroy(),this.loader=void 0;for(const g of this.plugins)if(g.load){const l=yield g.load(this,r);if(l!=!1&&!this.loader){this.loader=l,this.emit("loaderchange",l);break}}return this.loader||(this.$video.src=r.src),r})}applyPlugin(r){const c=r.apply(this),g=r.name,l=r.key;c&&(this.context[l||g]=c)}on(r,c){return typeof r=="string"?this.eventEmitter.on(r,c):Array.isArray(r)?this.eventEmitter.onAny(r,c):typeof r=="function"&&this.eventEmitter.on("*",r),this}once(r,c){this.eventEmitter.once(r,c)}off(r,c){this.eventEmitter.off(r,c)}emit(r,c){this.eventEmitter.emit(r,c)}setPoster(r){this.$video.poster=r}play(){if(!(!this.$video.src||this.isSourceChanging)){if(this.options.autopause)for(let r=0;r<Se.players.length;r++){const c=Se.players[r];c!=this&&c.pause()}return this.$video.play()}}pause(){return this.$video.pause()}togglePlay(){return this.isPlaying?this.pause():this.play()}mute(){this.$video.muted=!0}unmute(){this.$video.muted=!1}toggleMute(){this.isMuted?this.unmute():this.mute()}setVolume(r){this.$video.volume=r>1?1:r<0?0:r,this.$video.volume>0&&this.isMuted&&this.unmute()}setPlaybackRate(r){this.$video.playbackRate=r}seek(r){this.$video.currentTime=r}setLoop(r){this.$video.loop=r}enterFullscreen(){return s(this,null,function*(){this.isInPip&&(yield this.exitPip()),this._requestFullscreen?this._requestFullscreen.call(this.$root,{navigationUI:"hide"}):this.$video.webkitEnterFullscreen()})}exitFullscreen(){return this._exitFullscreen.call(document)}get isFullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||this.$video.webkitEnterFullscreen}get isFullScreen(){return!!((document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this.$root||this.$video.webkitDisplayingFullscreen)}toggleFullScreen(){return this.isFullScreen?this.exitFullscreen():this.enterFullscreen()}get isPipEnabled(){return document.pictureInPictureEnabled}enterPip(){return this.$video.requestPictureInPicture()}exitPip(){return this.isInPip?document.exitPictureInPicture():!1}get isInPip(){return document.pictureInPictureElement==this.$video}togglePip(){return this.isInPip?this.exitPip():this.enterPip()}_resetStatus(){this.hasError=!1,this.isPlaying&&this.$video.pause()}changeQuality(r){return this.isSourceChanging=!0,this.emit("videoqualitychange",r),this._loader(r,{keepPlaying:!0,keepTime:!0,event:"videoqualitychanged"})}changeSource(r){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return this.isSourceChanging=!0,this.emit("videosourcechange",r),this._loader(r,{keepPlaying:c,event:"videosourcechanged"})}_loader(r,c){const g=this.isPlaying,l=this.currentTime,b=this.volume,v=this.playbackRate,k=c.keepPlaying,P=c.keepTime,T=this.options.preload=="none",B=T?"loadstart":"loadedmetadata",H=k&&g;let A;return this._resetStatus(),new Promise((V,G)=>{const N=oe=>{this.isSourceChanging=!1,this.off(B,U),G(oe)},U=()=>{this.isSourceChanging=!1,this.off("error",N),this.emit(c.event,A),b!=this.volume&&this.setVolume(b),v!=this.playbackRate&&this.setPlaybackRate(v),T&&P&&this.$video.load(),P&&!this.options.isLive&&this.seek(l),H&&!this.isPlaying&&this.$video.play(),V()};return(r instanceof Promise?r:Promise.resolve(r)).then(oe=>{if(!oe.src)throw new Error("Empty Source");return A=oe,this.$video.poster=oe.poster||"",Object.assign(this.options.source,oe),this.once("error",N),this.once(B,U),oe}).then(oe=>this.load(oe)).catch(N)})}destroy(){Se.players.splice(Se.players.indexOf(this),1);const r=this.eventEmitter,c=this.loader,g=this.plugins,l=this.container,b=this.$root,v=this.$video,k=this.isPlaying,P=this.isFullScreen,T=this.isInPip;r.emit("destroy"),r.offAll(),c==null||c.destroy(),g.forEach(B=>{var H;return!B.load&&((H=B.destroy)==null?void 0:H.call(B))}),k&&this.pause(),P&&this.exitFullscreen(),T&&this.exitPip(),v.src&&URL.revokeObjectURL(v.src),l.removeChild(b),this.eventEmitter=this.locales=this.options=this.listeners=this.context=this.plugins=this.container=this.$root=this.$video=this.loader=void 0}get isNativeUI(){return this.options.isNativeUI()}get state(){return this.$video.readyState}get isPlaying(){return!this.$video.paused}get isMuted(){return this.$video.muted}get isEnded(){return this.$video.ended}get isLoop(){return this.$video.loop}get isAutoPlay(){return this.$video.autoplay}get duration(){return this.$video.duration}get buffered(){return this.$video.buffered}get currentTime(){return this.$video.currentTime}get volume(){return this.$video.volume}get playbackRate(){return this.$video.playbackRate}get _requestFullscreen(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen}get _exitFullscreen(){return Document.prototype.exitFullscreen||Document.prototype.webkitExitFullscreen||Document.prototype.cancelFullScreen||Document.prototype.mozCancelFullScreen||Document.prototype.msExitFullscreen}static get version(){return"1.2.29"}};Fe.players=[];let Ie=Fe;globalThis.window&&console.log(`%cOPlayer%c v%s
 %c
Oh! Another HTML5 video player.
https://github.com/shiyiya/oplayer
`,"font-size:32px;","font-size:12px;color:#999999;",Ie.version,"font-size:14px;")},8785:function(at,Le,le){le.d(Le,{ZP:function(){return $e}});var s=le(2031),ve=le(9587),q=le(8448);const be=["playing","duration","aspectRatio","plugins","onEvent"];function ye(R,F){if(R==null)return{};var j={},X=Object.keys(R),W,Y;for(Y=0;Y<X.length;Y++)W=X[Y],!(F.indexOf(W)>=0)&&(j[W]=R[W]);return j}const $e=(0,q.forwardRef)((R,F)=>{const j=R.playing,X=R.duration,W=R.aspectRatio,Y=W===void 0?9/16:W,D=R.plugins,J=D===void 0?[]:D,K=R.onEvent,_=ye(R,be),ce=(0,q.useRef)(!0),ke=(0,q.useRef)(K);ke.current=K;const C=(0,q.useRef)(null),z=xe(_.source),Q=ce.current||!C.current||!C.current.$root,ee=(0,q.useCallback)(I=>{I!==null&&(!C.current||!C.current.$root)&&(C.current=ve.ZP.make(I,_).use(J).create(),typeof X=="number"&&C.current.seek(X/1e3),K&&C.current.on(ze=>{var ge;return(ge=ke.current)==null?void 0:ge.call(ke,ze)}))},[]);return ne(!Q,()=>{j?C.current.isPlaying||C.current.play():C.current.isPlaying&&C.current.pause()},[j]),ne(!Q,()=>{var I;(_.source instanceof Promise&&z!=_.source||(I=_.source)!=null&&I.src&&(z==null?void 0:z.src)!==_.source.src)&&C.current.changeSource(_.source)},[_.source]),ne(!Q,()=>{Q||typeof X!="number"||C.current.seek(X/1e3)},[X]),ne(!Q,()=>{_.muted?C.current.mute():C.current.unmute()},[_.muted]),ne(!Q,()=>{C.current.setPlaybackRate(_.playbackRate)},[_.playbackRate]),(0,q.useEffect)(()=>(ce.current=!1,()=>{var I;return(I=C.current)==null?void 0:I.destroy()}),[]),(0,q.useImperativeHandle)(F,()=>C.current,[]),(0,q.useMemo)(()=>Y==0?(0,s.jsx)("div",{style:{height:"100%",width:"100%"},ref:ee}):(0,s.jsx)("div",{style:{width:"100%",paddingTop:Y*100+"%",backgroundColor:"#f4f4f4",position:"relative"},children:(0,s.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:ee})}),[])}),ne=(R,F,j)=>{(0,q.useEffect)(()=>{if(R)return F()},j)};function xe(R){const F=(0,q.useRef)();return(0,q.useEffect)(()=>{F.current=R},[R]),F.current}},9603:function(at,Le,le){le.d(Le,{Z:function(){return Un}});var s=le(9587),ve,q,be,ye,$e,ne,xe,R;function F(e,t){return t||(t=e.slice(0)),e.raw=t,e}const j=s.$.cls("loading"),X=s.$.cls("playing"),W=s.$.cls("focused"),Y=s.$.cls("fullscreen"),D=s.$.cls("settingShown"),J=s.$.css("display:none"),K="data-ctrl-hidden",_=s.$.css({["."+X]:{cursor:"none"}}),ce=s.$.cls("error"),ke=e=>s.$.css(Object.assign({"--primary-color":""+e.theme.primaryColor,"--shadow-background-color":"rgba(28 ,28 ,28 , .9)","--control-bar-height":e.controlBar?"2.5em":0,position:"absolute",top:"0",left:"0",width:"100%",height:"100%","line-height":1,"font-size":s.tq?"16px":"18px","&, & > *":{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"},"& [hidden]":{display:"none"}},{["@global ."+C+" &"]:{"font-size":s.tq?"18px":"22px"},["@global ."+Y+" &"]:{"font-size":s.tq?"18px":"22px"}})),C=s.$.css(ve||(ve=F([`
  z-index: 99 !important;
  position: fixed !important;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;`]))),z=s.$.css({background:"none",border:"none",cursor:"pointer",padding:0,outline:"none",font:"inherit",color:"inherit","line-height":"inherit","text-align":"inherit",width:"100%","-webkit-tap-highlight-color":"transparent","user-select":"none"}),Q=s.$.css({"& > *:nth-child(1)":{display:"none"}}),ee=s.$.css({"& > *:nth-child(2)":{display:"none"}}),I=s.tq?"":s.$.css({position:"relative","&:hover":{"&::after":{opacity:1,transform:"translateX(-50%) scale(1)"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(0) scale(1)"},"&[data-tooltip-pos=down]::after":{transform:"translateX(-50%) scale(1)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,transform:"translateY(0) scale(1)"}},"&::after":{position:"absolute",content:"attr(aria-label)",bottom:"100%",left:"50%","margin-bottom":"0.5em","white-space":"nowrap",background:"var(--shadow-background-color)",transform:"translate(-50%, 10px) scale(.8)","transform-origin":"50% 100%",opacity:0,padding:"6px 8px","border-radius":"2px",transition:"transform .2s ease .1s,opacity .2s ease .1s","pointer-events":"none","font-size":"0.75em"},"&[data-tooltip-pos=down]::after":{top:"100%",bottom:"auto","margin-top":"0.5em",transform:"translate(-50%, -10px) scale(.8)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,top:"100%",bottom:"unset",left:"auto","margin-top":"0.5em",transform:"translateY(-10px) scale(.8)","transform-origin":"100% 0"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(10px) scale(.8)","transform-origin":"100% 100%"}}),Pe={play:'<svg viewBox="0 0 1024 1024"><path  d="M245.76 785.203V238.797c0-50.442 34.918-69.182 77.967-42.046l422.196 266.117c43.11 27.157 43.069 71.128 0 98.284L323.727 827.249c-43.11 27.177-77.967 8.315-77.967-42.046z" /></svg>',pause:'<svg viewBox="0 0 1024 1024"><path  d="M327.68 184.32a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z m368.64 0a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z" /></svg>',volume:['<svg viewBox="0 0 1024 1024"><path d="M128 426.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333V273.493333c0-37.973333-46.08-57.173333-72.96-30.293333L298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667z m576 85.333333A192 192 0 0 0 597.333333 340.053333v343.466667c63.146667-31.146667 106.666667-96 106.666667-171.52zM597.333333 189.866667v8.533333c0 16.213333 10.666667 30.293333 25.6 36.266667C733.013333 278.613333 810.666667 386.56 810.666667 512s-77.653333 233.386667-187.733334 277.333333c-15.36 5.973333-25.6 20.053333-25.6 36.266667v8.533333c0 26.88 26.88 45.653333 51.626667 36.266667C793.6 815.36 896 675.84 896 512s-102.4-303.36-247.04-358.4c-24.746667-9.813333-51.626667 9.386667-51.626667 36.266667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="M154.88 154.88a42.496 42.496 0 0 0 0 60.16L311.04 371.2 298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333v-177.92l178.346667 178.346667c-20.906667 15.786667-43.52 29.013333-68.266667 38.826666-15.36 6.4-24.746667 22.613333-24.746667 39.253334 0 30.72 31.146667 50.346667 59.306667 38.826666 34.133333-14.08 66.133333-32.853333 94.72-55.893333l57.173333 57.173333a42.496 42.496 0 1 0 60.16-60.16L215.466667 154.88c-16.64-16.64-43.52-16.64-60.586667 0zM810.666667 512c0 34.986667-6.4 68.693333-17.493334 99.84l65.28 65.28c23.893333-49.92 37.546667-105.813333 37.546667-165.12 0-163.413333-102.4-303.36-246.613333-358.4-25.173333-9.813333-52.053333 9.813333-52.053334 36.693333v8.106667c0 16.213333 10.666667 30.293333 26.026667 36.266667C733.013333 279.04 810.666667 386.56 810.666667 512z m-371.626667-268.373333l-7.253333 7.253333L512 331.093333V273.493333c0-37.973333-46.08-56.746667-72.96-29.866666zM704 512A192 192 0 0 0 597.333333 340.053333v76.373334l105.813334 105.813333c0.426667-3.413333 0.853333-6.826667 0.853333-10.24z"></path></svg>'],fullscreen:['<svg viewBox="-113 -113 1250 1250"><path d="M0 232.732444A232.732444 232.732444 0 0 1 232.732444 0h558.535112A232.732444 232.732444 0 0 1 1024 232.732444v558.535112A232.732444 232.732444 0 0 1 791.267556 1024H232.732444A232.732444 232.732444 0 0 1 0 791.267556V232.732444z m232.732444-139.662222a139.662222 139.662222 0 0 0-139.662222 139.662222v558.535112a139.662222 139.662222 0 0 0 139.662222 139.662222h558.535112a139.662222 139.662222 0 0 0 139.662222-139.662222V232.732444a139.662222 139.662222 0 0 0-139.662222-139.662222H232.732444z"></path><path d="M549.575111 245.845333c0-25.799111 20.935111-46.734222 46.734222-46.734222h116.821334A140.202667 140.202667 0 0 1 853.333333 339.313778v116.821333a46.734222 46.734222 0 0 1-93.468444 0v-116.821333c0-25.827556-20.906667-46.734222-46.734222-46.734222h-116.821334a46.734222 46.734222 0 0 1-46.734222-46.734223zM245.845333 549.546667c25.799111 0 46.734222 20.935111 46.734223 46.734222v116.821333c0 25.827556 20.906667 46.734222 46.734222 46.734222h116.821333a46.734222 46.734222 0 0 1 0 93.468445h-116.821333A140.202667 140.202667 0 0 1 199.111111 713.130667v-116.821334c0-25.799111 20.935111-46.734222 46.734222-46.734222z"></path></svg>','<svg viewBox="-113 -113 1250 1250"><path d="M0.739556 233.130667a232.391111 232.391111 0 0 1 232.391111-232.391111h557.738666a232.391111 232.391111 0 0 1 232.391111 232.391111v557.738666a232.391111 232.391111 0 0 1-232.391111 232.391111H233.130667a232.391111 232.391111 0 0 1-232.391111-232.391111V233.130667z m232.391111-139.434667a139.434667 139.434667 0 0 0-139.434667 139.434667v557.738666a139.434667 139.434667 0 0 0 139.434667 139.434667h557.738666a139.434667 139.434667 0 0 0 139.434667-139.434667V233.130667a139.434667 139.434667 0 0 0-139.434667-139.434667H233.130667z"></path><path d="M601.088 186.652444c25.685333 0 46.506667 20.792889 46.506667 46.478223v96.796444c0 25.685333 20.792889 46.478222 46.478222 46.478222h96.796444a46.478222 46.478222 0 1 1 0 92.984889h-96.796444a139.434667 139.434667 0 0 1-139.463111-139.463111V233.130667c0-25.685333 20.821333-46.478222 46.478222-46.478223z m-414.435556 414.435556c0-25.656889 20.792889-46.478222 46.478223-46.478222h96.796444a139.434667 139.434667 0 0 1 139.463111 139.463111v96.796444a46.478222 46.478222 0 0 1-92.984889 0v-96.796444c0-25.685333-20.792889-46.478222-46.478222-46.478222H233.130667a46.478222 46.478222 0 0 1-46.478223-46.506667z"></path></svg>'],pip:['<svg viewBox="0 0 1024 1024"><path d="M768 213.333333H256a85.333333 85.333333 0 0 0-85.333333 85.333334v426.666666a85.333333 85.333333 0 0 0 85.333333 85.333334h170.666667a42.666667 42.666667 0 1 1 0 85.333333H256a170.666667 170.666667 0 0 1-170.666667-170.666667V298.666667a170.666667 170.666667 0 0 1 170.666667-170.666667h512a170.666667 170.666667 0 0 1 170.666667 170.666667v128a42.666667 42.666667 0 1 1-85.333334 0V298.666667a85.333333 85.333333 0 0 0-85.333333-85.333334z m-128 341.333334a128 128 0 0 0-128 128v85.333333a128 128 0 0 0 128 128h170.666667a128 128 0 0 0 128-128v-85.333333a128 128 0 0 0-128-128h-170.666667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="m768,213.33333l-512,0a85.33333,85.33333 0 0 0 -85.33333,85.33334l0,426.66666a85.33333,85.33333 0 0 0 85.33333,85.33334l170.66667,0a42.66667,42.66667 0 1 1 0,85.33333l-170.66667,0a170.66667,170.66667 0 0 1 -170.66667,-170.66667l0,-426.66666a170.66667,170.66667 0 0 1 170.66667,-170.66667l512,0a170.66667,170.66667 0 0 1 170.66667,170.66667l0,128a42.66667,42.66667 0 1 1 -85.33334,0l0,-128a85.33333,85.33333 0 0 0 -85.33333,-85.33334zm-128,341.33334a128,128 0 0 0 -128,128l0,85.33333a128,128 0 0 0 128,128l170.66667,0a128,128 0 0 0 128,-128l0,-85.33333a128,128 0 0 0 -128,-128l-170.66667,0z"></path><g stroke="null"><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><rect stroke="null" x="15122.523407" y="14826.656681" width="582" height="402" fill="none"></rect></g><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><path stroke="null" d="m15503.523407,14924.856681l-161.8,0c-66.2,0 -120,53.8 -120,120l0,161.8c0,22.1 17.9,40 40,40s40,-17.9 40,-40l0,-144.4l169.8,169.8c7.8,7.8 18,11.7 28.3,11.7c10.2,0 20.5,-3.9 28.3,-11.7c15.6,-15.6 15.6,-40.9 0,-56.6l-170.7,-170.6l146.1,0c22.1,0 40,-17.9 40,-40s-17.9,-40 -40,-40z"></path></g></g></svg>'],setting:'<svg viewBox="0 0 1024 1024" style="scale:1.1"><path d="M0 0h1024v1024H0z" fill-opacity="0"></path><path d="M501.333333 127.573333a21.333333 21.333333 0 0 1 21.333334 0l316.928 182.954667a21.333333 21.333333 0 0 1 10.666666 18.474667v365.994666a21.333333 21.333333 0 0 1-10.666666 18.474667L522.666667 896.426667a21.333333 21.333333 0 0 1-21.333334 0l-316.928-182.954667a21.333333 21.333333 0 0 1-10.666666-18.474667V328.96a21.333333 21.333333 0 0 1 10.666666-18.474667zM512 219.946667L259.029333 365.952v292.053333L512 804.010667l252.928-146.005334V365.952L512 219.946667zM512 426.666667a85.333333 85.333333 0 1 1 0 170.666666 85.333333 85.333333 0 0 1 0-170.666666z"></path></svg>',screenshot:'<svg viewBox="0 0 1024 1024"><path d="M412.245333 757.333333a42.666667 42.666667 0 0 1-56.490666-64l356.48-314.794666a42.666667 42.666667 0 0 1 56.746666 0.256l112.896 101.461333a42.666667 42.666667 0 1 1-57.088 63.488L740.266667 467.626667l-328.021334 289.706666zM810.666667 213.333333h-128a42.666667 42.666667 0 0 1 0-85.333333h170.666666a42.666667 42.666667 0 0 1 42.666667 42.666667v170.666666a42.666667 42.666667 0 0 1-85.333333 0V213.333333zM213.333333 213.333333v128a42.666667 42.666667 0 1 1-85.333333 0V170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667h170.666666a42.666667 42.666667 0 1 1 0 85.333333H213.333333z m597.333334 597.333334v-128a42.666667 42.666667 0 0 1 85.333333 0v170.666666a42.666667 42.666667 0 0 1-42.666667 42.666667h-170.666666a42.666667 42.666667 0 0 1 0-85.333333h128zM213.333333 810.666667h128a42.666667 42.666667 0 0 1 0 85.333333H170.666667a42.666667 42.666667 0 0 1-42.666667-42.666667v-170.666666a42.666667 42.666667 0 0 1 85.333333 0v128z m170.666667-298.666667a128 128 0 1 1 0-256 128 128 0 0 1 0 256z m0-85.333333a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z"></path></svg>',playbackRate:'<svg viewBox="0 0 1024 1024"><path d="M512 951.04a435.2 435.2 0 1 1 435.2-435.2 435.2 435.2 0 0 1-435.2 435.2z m0-819.2a384 384 0 1 0 384 384A384 384 0 0 0 512 132.096z"></path><path d="M468.992 493.824l-130.048-75.008a20.992 20.992 0 0 0-31.232 18.176v150.016a20.992 20.992 0 0 0 31.232 18.176l130.048-75.008a20.992 20.992 0 0 0 0-36.352zM684.8 493.824l-129.536-75.008a21.248 21.248 0 0 0-31.744 18.432v149.504a21.248 21.248 0 0 0 31.744 18.432l129.536-75.008a20.992 20.992 0 0 0 0-36.352z"></path></svg>',subtitle:'<svg viewBox="0 0 1024 1024" version="1.1"><path d="M800 170.666667A138.666667 138.666667 0 0 1 938.666667 309.333333v405.546667a138.666667 138.666667 0 0 1-138.666667 138.666667H224A138.666667 138.666667 0 0 1 85.333333 714.88V309.333333a138.666667 138.666667 0 0 1 130.816-138.453333L224 170.666667h576z m0 64H224l-6.144 0.256A74.666667 74.666667 0 0 0 149.333333 309.333333v405.546667c0 41.216 33.450667 74.666667 74.666667 74.666667h576a74.666667 74.666667 0 0 0 74.666667-74.666667V309.333333a74.666667 74.666667 0 0 0-74.666667-74.666666zM234.666667 512c0-134.229333 115.754667-203.733333 218.538666-145.109333A32 32 0 0 1 421.461333 422.4C361.856 388.437333 298.666667 426.410667 298.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C350.549333 715.733333 234.666667 646.101333 234.666667 512z m320 0c0-134.229333 115.754667-203.733333 218.538666-145.109333a32 32 0 0 1-31.744 55.552C681.856 388.437333 618.666667 426.410667 618.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C670.549333 715.733333 554.666667 646.101333 554.666667 512z"></path></svg>',loop:'<svg viewBox="0 0 32 32"><g><path d="m16 2a13.9 13.9 0 0 0 -9 3.32v-2.32a1 1 0 0 0 -2 0v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2h-2.89a11.87 11.87 0 0 1 7.89-3 12 12 0 1 1 -11.67 9.23 1 1 0 1 0 -1.94-.46 13.72 13.72 0 0 0 -.39 3.23 14 14 0 1 0 14-14z"/><path d="m14 21.2a2 2 0 0 0 1.06-.31l5.11-3.19a2 2 0 0 0 0-3.4l-5.11-3.19a2 2 0 0 0 -3.06 1.69v6.4a2 2 0 0 0 2 2zm0-8.4 5.11 3.2-5.11 3.2z"/></g></svg>',progressIndicator:null,loadingIndicator:null,quality:'<svg viewBox="0 0 32 32"><g><path d="m16 2a14 14 0 1 0 14 14 14 14 0 0 0 -14-14zm0 26a12 12 0 1 1 12-12 12 12 0 0 1 -12 12z"/><path d="m14.5 11a1 1 0 0 0 -1 1v3h-2v-3a1 1 0 0 0 -2 0v8a1 1 0 0 0 2 0v-3h2v3a1 1 0 0 0 2 0v-8a1 1 0 0 0 -1-1z"/><path d="m19.5 11h-2a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1h2a3 3 0 0 0 3-3v-4a3 3 0 0 0 -3-3zm1 7a1 1 0 0 1 -1 1h-1v-6h1a1 1 0 0 1 1 1z"/></g></svg>',lang:'<svg viewBox="0 0 1024 1024"><path d="M512 85.333333C277.333333 85.333333 85.333333 277.333333 85.333333 512s192 426.666667 426.666667 426.666667 426.666667-192 426.666667-426.666667S746.666667 85.333333 512 85.333333z m294.4 256H682.666667c-12.8-55.466667-34.133333-102.4-59.733334-153.6 76.8 29.866667 145.066667 81.066667 183.466667 153.6zM512 170.666667c34.133333 51.2 64 106.666667 81.066667 170.666666h-162.133334c17.066667-59.733333 46.933333-119.466667 81.066667-170.666666zM183.466667 597.333333c-8.533333-25.6-12.8-55.466667-12.8-85.333333s4.266667-59.733333 12.8-85.333333h145.066666c-4.266667 29.866667-4.266667 55.466667-4.266666 85.333333s4.266667 55.466667 4.266666 85.333333H183.466667z m34.133333 85.333334H341.333333c12.8 55.466667 34.133333 102.4 59.733334 153.6-76.8-29.866667-145.066667-81.066667-183.466667-153.6zM341.333333 341.333333H217.6c42.666667-72.533333 106.666667-123.733333 183.466667-153.6C375.466667 238.933333 354.133333 285.866667 341.333333 341.333333z m170.666667 512c-34.133333-51.2-64-106.666667-81.066667-170.666666h162.133334c-17.066667 59.733333-46.933333 119.466667-81.066667 170.666666z m98.133333-256H413.866667c-4.266667-29.866667-8.533333-55.466667-8.533334-85.333333s4.266667-55.466667 8.533334-85.333333h200.533333c4.266667 29.866667 8.533333 55.466667 8.533333 85.333333s-8.533333 55.466667-12.8 85.333333z m12.8 238.933334c25.6-46.933333 46.933333-98.133333 59.733334-153.6h123.733333c-38.4 72.533333-106.666667 123.733333-183.466667 153.6z m76.8-238.933334c4.266667-29.866667 4.266667-55.466667 4.266667-85.333333s-4.266667-55.466667-4.266667-85.333333h145.066667c8.533333 25.6 12.8 55.466667 12.8 85.333333s-4.266667 59.733333-12.8 85.333333h-145.066667z"></path></svg>',chromecast:null,danmaku:null,playlist:null,previous:null,next:null};var M;(e=>{e.setupIcons=t=>{for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Pe[n]=t[n]);return Pe},e.get=t=>Pe[t]})(M||(M={}));const We=(e,t)=>{function n(o){let a=o.target;a&&(e.$root.contains(a)||e.$root==a)?e.$root.classList.add(W):e.$root.classList.remove(W)}t&&e.$root.classList.add(W),document.addEventListener("click",n),document.addEventListener("contextmenu",n),e.on("destroy",()=>{document.removeEventListener("click",n),document.removeEventListener("contextmenu",n)})},ft=e=>e.$root.classList.contains(W),pt=e=>{e.on("play",()=>{e.$root.classList.add(X)}),e.on(["pause","videosourcechange"],()=>{e.$root.classList.remove(X)})},Ye=e=>{const t=()=>e.$root.classList.add(j),n=()=>{e.isSourceChanging||e.$root.classList.remove(j)};e.$video.preload!="none"&&t(),e.on("loadstart",()=>{e.$video.preload=="none"&&n()}),e.on(["seeking","videoqualitychange","videosourcechange"],t),e.on(["canplaythrough","playing","pause","seeked","error"],n),e.on(e.options.autoplay||s.G6?"loadedmetadata":"canplay",()=>e.$root.classList.remove(j)),e.on(["waiting","playing"],o=>{o.type=="waiting"&&t();const i=e.currentTime,h=()=>{i!==e.currentTime?(n(),e.off("timeupdate",h)):t()};e.on("timeupdate",h)})},mt=e=>e.$root.classList.contains(j),vt=e=>{e.on("fullscreenchange",t=>{t.payload.isWeb?e.$root.classList.toggle(C):e.$root.classList.toggle(Y)})},bt=e=>e.$root.classList.contains(Y)||e.$root.classList.contains(C),yt=e=>e.$root.classList.contains(C),$t=(e,t)=>{pt(e),Ye(e),vt(e),s.tq||We(e,t.autoFocus)};function Ee(e,t,n){return Math.min(Math.max(e,t),n)}function Me(e){return e<10?"0"+e:""+e}function te(e){if(!isFinite(e))return"--:--";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return(t>0?Me(t)+":":"")+Me(n)+":"+Me(o)}function xt(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.click()}const kt=e=>{var t;try{const n=e.$video,o=e.$root,a=e.context.ui,i=document.createElement("canvas"),h=n.videoWidth,m=n.videoHeight;i.width=h,i.height=m,i.getContext("2d").drawImage(n,0,0,h,m);const p=((t=a.$watermark)==null?void 0:t.style)||{},u=p.top,f=p.left,E=p.right,y=p.bottom;if(a.$watermark&&[u,f,E,y].filter($=>$!=null).length>1){const $=a.$watermark,x=$.offsetLeft,w=$.offsetTop,S=$.offsetWidth,L=$.offsetHeight,O=a.$watermark.getBoundingClientRect(),de=O.width,me=O.height;let se=0,Z=0;if(f)se=x;else if(E){const ie=o.clientWidth-x-S;se=h-ie-S}if(u)Z=w;else if(y){const ie=o.clientHeight-w-L;Z=h-ie-L}i.getContext("2d").drawImage(a.$watermark,se,Z,de,me)}return i.toDataURL("image/png")}catch(n){return n}},Ke=e=>{if(mt(e)||isNaN(e.duration)){e.emit("notice",{text:e.locales.get("Please wait for loading to complete")});return}const t=kt(e);if(t instanceof Error)e.emit("notice",{text:t.message});else{const n=e.options.source.title||"OPlayer-ScreenShot";xt(t,n+"-"+te(e.currentTime).replace(/:/g,"-")+".png")}},Qe=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1500,n=null;const o=()=>n&&clearTimeout(n);return{callee:()=>{o(),n=setTimeout(()=>{e()},t)},clear:o}},wt=(e,t)=>{var n=[],o=e.parentNode.children;for(let a=0,i=o.length;a<i;a++)o[a]!==e&&(t==null||t(o[a]),n.push(o[a]));return n};function Re(e,t){return e.classList.add(t),e}function Ae(e,t){return e.classList.remove(t),e}function re(e,t){return e.classList.contains(t)}const ue={dragStart:s.tq?"touchstart":"mousedown",dragMove:s.tq?"touchmove":"mousemove",dragEnd:s.tq?"touchend":"mouseup"},Ge=10,Be=5,fe={ArrowUp:e=>{const t=e.volume*100+Ge;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(e.volume*100)+"%")})},ArrowDown:e=>{const t=e.volume*100-Ge;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(e.volume*100)+"%")})},ArrowLeft:e=>{if(e.options.isLive||e.hasError)return;e.currentTime-Be<0?e.seek(0):e.seek(e.currentTime-Be),e.emit("notice",{text:te(e.currentTime)+" / "+te(e.duration)})},ArrowRight:e=>{e.options.isLive||e.hasError||(e.seek(e.currentTime+Be),e.emit("notice",{text:te(e.currentTime)+" / "+te(e.duration)}))}," ":e=>e.togglePlay(),Escape:e=>{e.isFullScreen?e.exitFullscreen():e.$root.classList.contains(C)&&e.emit("fullscreenchange",{isWeb:!0})},f:e=>e.toggleFullScreen(),w:e=>e.emit("fullscreenchange",{isWeb:!0}),s:Ke};function Ze(e){const t=e.player,n=e.config;function o(a){var i,h,m,p;if(((i=document.activeElement)==null?void 0:i.tagName)=="INPUT"||(h=document.activeElement)!=null&&h.getAttribute("contenteditable")||!((m=n.keyboard)!=null&&m.global)&&!((p=n.keyboard)!=null&&p.focused)||n.keyboard.focused&&!ft(t))return;const u=a.key;fe[u]&&(a.preventDefault(),fe[u](t))}e.keyboard.register=function(i){for(const h in i)Object.prototype.hasOwnProperty.call(i,h)&&(fe[h]=i[h])},e.keyboard.unregister=function(i){i.forEach(h=>{delete fe[h]})},document.addEventListener("keydown",o),t.on("destroy",()=>{document.removeEventListener("keydown",o)})}const Ce="speed";function Fe(e){const t=e.player,n=e.config.speeds,o=e.setting;n!=null&&n.length&&(o.register({key:Ce,type:"selector",name:t.locales.get("Speed"),icon:M.get("playbackRate"),children:n.map(a=>({name:+a==1?t.locales.get("Normal"):a+"x",value:+a,default:t.playbackRate==+a})),onChange:a=>{let i=a.value;return t.setPlaybackRate(i)}}),t.on("ratechange",()=>{const a=t.playbackRate,i=n.findIndex(h=>+h==a);i==-1?o.updateLabel(Ce,a+"x"):o.select(Ce,i,!1)}))}const Ie=60;function d(e){const t=e.player,n=e.config,o=e.$mask;s.tq&&!t.options.isLive&&n.slideToSeek&&n.slideToSeek!="none"&&t.once("loadedmetadata",()=>{let a=0,i=0,h=0,m=0,p;const u=t.$root.getBoundingClientRect();n.slideToSeek=="always"&&(o.addEventListener("touchstart",y=>{if(re(t.$root,D))return;const $=y.changedTouches[0],x=$.clientX,w=$.clientY;a=x,i=w}),o.addEventListener("touchmove",f),o.addEventListener("touchend",E)),n.slideToSeek=="long-touch"&&o.addEventListener("touchstart",y=>{if(re(t.$root,D))return;const $=y.changedTouches[0],x=$.clientX,w=$.clientY;a=x,i=w,p=window.setInterval(()=>{h+=100,h>=1e3&&(clearInterval(p),t.emit("notice",{text:"slid left or right to seek",pos:"top"}),o.addEventListener("touchmove",f))},100),o.addEventListener("touchend",E,{once:!0})});function f(y){if(a==0&&i==0)return;const $=y.changedTouches[0],x=$.clientX,w=$.clientY,S=x-a,L=i-w;if(Math.abs(S)<2&&Math.abs(L)<2)return;const O=r(S,L);(O>=-45&&O<45||O>=135&&O<=180||O>=-180&&O<-135)&&(y.preventDefault(),m=Ie*S/u.width,t.emit("notice",{text:te(Ee(t.currentTime+m,0,t.duration))+" / "+te(t.duration),pos:"top"}))}function E(){a==0&&i==0||(n.slideToSeek=="long-touch"&&h<1e3&&(p&&clearInterval(p),o.removeEventListener("touchmove",f)),Math.abs(m)>=1&&t.seek(Ee(t.currentTime+m,0,t.duration)),a=i=m=h=0)}})}function r(e,t){return Math.atan2(t,e)*180/Math.PI}function c(e,t){t.forceLandscapeOnFullscreen&&!s.gn&&s.tq&&e.on("fullscreenchange",n=>{var o,a;n.payload.isWeb||(e.isFullScreen?(o=screen.orientation)==null||o.lock("landscape"):(a=screen.orientation)==null||a.unlock())})}const g=s.$.css(q||(q=F([`
  font-variant-numeric: tabular-nums;
  font-size: 0.875em;
  margin-top: 2px;
`]))),l=s.$.css("width:0.5em;height:0.5em;background-color:var(--primary-color);border-radius:50%;margin-right:0.5em"),b=s.$.css(`
    position: absolute;
    top: 10px;
    right: 50%;
    border-radius: 2px;
    box-sizing: border-box;
    transform: translate(50%, -100%);
    transition: opacity 0.2s ease, top 0.2s ease;
    font-size: 0.875em;
`),v=s.$.css(`
    top: calc(100% - 10px);
    right: 50%;
    transform: translateX(50%);
`),k=s.$.css({position:"relative",display:"flex",["& ."+b]:{visibility:"hidden",opacity:0,"background-color":"var(--shadow-background-color)"}}),P=s.$.css({["&:hover"]:{"padding-top":"0.5em","margin-top":"-0.5em",["& ."+b]:{visibility:"visible",opacity:1,top:0}},["&[data-dropdown-pos=top]:hover"]:{"padding-bottom":"0.5em","margin-bottom":"-0.5em",["& ."+b]:{top:"100%"}}}),T=s.$.css({padding:"0 0.5em","min-width":"6em",display:"block",height:"2.4em","line-height":"2.4em",cursor:"pointer","text-align":"center","word-break":"keep-all","&:nth-last-child(1)":{"margin-bottom":"0px"},"& *":{"pointer-events":"none"},"&[aria-checked=true]":{color:"var(--primary-color)"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"}}),B=s.$.cls("textIcon"),H=s.$.css({color:"#fff",fill:"#fff",height:"2.5em",display:"flex","box-sizing":"border-box","justify-content":"space-between","align-items":"center","padding-bottom":s.tq?0:"4px","> div":{display:"flex","align-items":"center",margin:"0 -.5em",["& > ."+z+":last-child"+(s.tq?", & >  ."+z+'[aria-label="Play"], & >  .'+z+'[aria-label="Pause"]':"")]:{"margin-right":0}},["& ."+z+"."+B]:{width:"auto","min-width":"2em","font-size":"0.875em",padding:"0 4px","border-radius":"2px"},["& ."+z]:Object.assign({width:"2em",height:s.tq?"auto":"2em","margin-right":"6px","justify-content":"center","align-items":"center",display:"inline-flex","border-radius":s.tq?"50%":"2px","& > *":{height:"1.5em",width:"1.5em","pointer-events":"none",transition:"transform .2s ease-in-out"}},s.tq?{"&:active > *":{transform:"scale(.9)"}}:{"&:hover":{"background-color":"rgb(255 255 255 / .2)"}})}),A=s.$.css("display: block;"),V=e=>s.$.css({"z-index":"8","max-height":"75%","border-radius":"2px",display:"block",position:"absolute",right:"1em",[e]:e=="top"?"var(--control-bar-height)":"2.5em",overflow:"auto","background-color":"var(--shadow-background-color)",fill:"#fff","&::-webkit-scrollbar":{width:"2px"},"&::-webkit-scrollbar-thumb":{background:"var(--primary-color)"},"& > div":{display:"none","font-size":"0.875em"},["& > div."+A]:{display:"block"}}),G=s.$.css("min-width: 15.5em;"),N=s.$.css("min-width: 10.5em;"),U=s.$.css(`
  display: none;
  width: 1.4em;
  height: 1.4em;
`),oe=s.$.css(`
  width: 2em;
  height: 2em;
  margin: 0 -10px 0 -5px;
`),Gt=s.$.css(`
  width: 2em;
  height: 2em;
  transform: rotate(180deg);
  margin-left: -10px;
`),Et=s.$.css({position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0","background-color":"#ccc",transition:".3s","border-radius":"34px","&:before":{position:"absolute",content:'""',height:"16px",width:"16px",left:"4px",bottom:"3px","background-color":"white",transition:".3s","border-radius":"50%"}}),Zt=s.$.css(`
  position: relative;
  width: 40px;
  height: 22px;
`),Jt=s.$.css(`
  white-space: nowrap;
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.8em;
`),en=s.$.css({height:"2.4em",cursor:"pointer",color:"#fff","justify-content":"space-between","align-items":"center",padding:"0 0.75em","line-height":"1",display:"flex",overflow:"hidden","& > *":{"pointer-events":"none"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"},["&[aria-checked='true']"]:{["& ."+U]:{display:"block"},["&[data-index]"]:{"background-color":"rgba(255, 255, 255, 0.1)"},["& ."+Et]:{"background-color":"var(--primary-color)","&:before":{transform:"translateX(16px)"}}}}),Je=s.$.css({display:"flex","align-items":"center","margin-right":"10px","& > svg":{width:"1.7em",height:"1.7em","margin-right":"0.5em"}}),St=s.$.css(`
  display: flex;
  align-items: center;
`),tn=s.$.css({width:"100%",display:"flex","align-items":"center","border-bottom":"1px solid rgb(255 255 255 / 10%)"}),et=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe;return"<svg "+(e?'class="'+e+'"':"")+' viewBox="0 0 32 32"><path d="m 12.59,20.34 4.58,-4.59 -4.58,-4.59 1.41,-1.41 6,6 -6,6 z" fill="#fff"></path></svg>'},nn=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return'<div class="'+Je+`">
      `+t+`
      <span>`+e+`</span>
    </div>
    <svg class=`+U+` viewBox="0 0 24 24">
      <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"></path>
    </svg>
`},on=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return'<div class="'+Je+`">
      `+t+`
      <span>`+e+`</span>
    </div>
    <div class=`+St+`>
      <span role="label" class=`+Jt+`></span>
      `+et()+`
    </div>
`},sn=e=>'<div class="'+tn+`">
      `+et(Gt)+`
      <span>`+e+`</span>
    </div>
`,rn=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return'<div class="'+Je+`">
    `+t+`
    <span>`+e+`</span>
  </div>
  <div class=`+St+`>
    <label class=`+Zt+`>
      <span class=`+Et+`></span>
    </label>
  </div>
`};function Lt(e){let t=e.type,n=e.key,o=e.name,a=e.icon,i=e.default,h=e.index,m=s.$.create("div."+en,{"data-key":n,role:t?"menuitem":"menuitemradio","aria-haspopup":t=="selector"});const p={$row:m,$label:void 0};switch(t){case"switcher":m.innerHTML=rn(o,a),m.setAttribute("aria-checked",i||!1);break;case"selector":m.innerHTML=on(o,a),p.$label=m.querySelector('span[role="label"]');break;case"back":m.innerHTML=sn(o);break;default:m.innerHTML=nn(o,a),m.setAttribute("aria-checked",i||!1),typeof h=="number"&&m.setAttribute("data-index",h.toString());break}return p}function Tt(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!n||n.length==0)return;const a=o.key,i=o.target,h=o.parent,m=o.isSelectorOptionsPanel,p=o.name;let u={},f=a||"root";t[0]&&f=="root"?(u=t[0],f=t[0].key):(u.$ref=s.$.create("div."+(t[0]&&m?N:G),{"data-key":f,role:"menu"}),u.key=f,t.push(u)),u.parent=h;const E=u.key=="root";if(!E){const y=Lt({name:p,type:"back"}),$=y.$row;$.addEventListener("click",()=>{var x;u.$ref.classList.remove(A),(x=u.parent)==null||x.$ref.classList.add(A)}),s.$.render($,u.$ref)}for(let y=0;y<n.length;y++){const $=n[y],x=$.name,w=$.type,S=$.key,L=$.children,O=$.icon,de=$.default,me=$.onChange,se=Lt(Object.assign({name:x,type:w,key:S,icon:O,default:de},!E&&m&&{index:y})),Z=se.$row,ie=se.$label;if(s.$.render(Z,u.$ref),s.$.render(u.$ref,i),L){const Oe=w=="selector"&&L.every(qe=>!qe.type),ae=Tt(e,t,L,{key:S,target:i,parent:u,isSelectorOptionsPanel:Oe,name:w=="selector"?x:void 0});if(Z.addEventListener("click",()=>{u.$ref.classList.remove(A),ae.$ref.classList.add(A)}),Oe){const qe=L.find(he=>he.default);qe&&(ie.innerText=qe.name),ae.select=(he,je)=>{var Kt;if(he==-1){(Kt=ae.$ref.querySelector("[aria-checked=true]"))==null||Kt.setAttribute("aria-checked","false");return}const it=ae.$ref.querySelectorAll("[aria-checked]");if(it.item(he).getAttribute("aria-checked")!="true"){it.forEach(Xn=>Xn.setAttribute("aria-checked","false")),it.item(he).setAttribute("aria-checked","true");const Qt=L[he];ie.innerText=Qt.name,je&&(me==null||me(Qt,{index:he}))}},ae.$ref.addEventListener("click",he=>{const je=he.target;je.hasAttribute("data-index")&&(ae.select(+je.getAttribute("data-index"),!0),u.$ref.classList.add(A),ae.$ref.classList.remove(A))})}}else w=="switcher"&&(Z.select=function(Oe){const ae=this.getAttribute("aria-checked")=="true";this.setAttribute("aria-checked",""+!ae),Oe&&(me==null||me(!ae))},Z.addEventListener("click",()=>Z.select(!0)))}return u}function an(e){const t=e.player,n=e.$root,o=e.config,a=o.controlBar&&o.topSetting,i=o.settings||[],h=s.$.create("div."+V(a?"top":"bottom"),{"aria-label":"Setting"});let m=[],p=!1;const u={loop:{name:t.locales.get("Loop"),type:"switcher",key:"loop",icon:M.get("loop"),default:t.isLoop,onChange:y=>t.setLoop(y)}};f(i.map(y=>typeof y=="string"?u[y]:y)),e.setting.register=function($){f(Array.isArray($)?$:[$])},e.setting.unregister=function($){var x,w;p&&((w=(x=m[0])==null?void 0:x.$ref.querySelector("[data-key="+$+"]"))==null||w.remove(),m=m.filter(S=>S.key===$?(S.$ref.remove(),S=null,!1):!0))},e.setting.updateLabel=function($,x){if(!p)return;const w=h.querySelector('[data-key="'+$+'"] span[role="label"]');w&&(w.innerText=x)},e.setting.select=function($,x){var w;let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(p)if(typeof x=="number")for(let L=0;L<m.length;L++){const O=m[L];if(O.key==$){O.select(x,S);break}}else(w=h.querySelector('[data-key="'+$+'"][aria-checked]'))==null||w.select(S)};function f(y){y.length<1||(p||(p=!0,s.$.render(h,n),E()),Tt(t,m,y,{target:h}))}function E(){const y=s.$.create("button",{class:z+" "+I,"aria-label":t.locales.get("Settings"),"data-tooltip-pos":o.topSetting?"down":void 0},""+M.get("setting"));y.addEventListener("click",x=>{x.stopPropagation(),t.$root.classList.add(D),m[0].$ref.classList.add(A);function w(S){h.contains(S.target)||(t.$root.classList.remove(D),m.forEach(L=>L.$ref.classList.remove(A)),document.removeEventListener("click",w))}setTimeout(()=>{document.addEventListener("click",w)})});const $=[o.pictureInPicture&&t.isPipEnabled,o.fullscreen].filter(Boolean).length;if(a){const x=e.$controllerBar.children[1];x.insertBefore(y,x.children[x.children.length])}else{const x=e.$controllerBottom.children[1];x.insertBefore(y,x.children[x.children.length-$])}}}const ln=s.$.css({position:"absolute",top:0,left:0,right:0,"z-index":7,padding:"0.5em 1em 0",transition:"transform 0.3s ease",height:"var(--control-bar-height)","&::before":{position:"absolute",content:"''",width:"100%",display:"block",top:0,left:0,bottom:"-1em","z-index":-1,transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(rgba(0, 0, 0, .3), transparent)"},"& > div:nth-child(1)":{cursor:"pointer",overflow:"hidden"},["& > div:nth-child(2) ."+k+":last-child ."+b]:{right:"max(50%,3em)"},["@global ."+_+" &"]:{transform:"translateY(calc(-100%))","&::before":{opacity:0}}}),cn=s.$.css("width: 2.5em;height: 2.5em;margin:0 -10px;transform: rotate(180deg);"),Pt=s.$.css("flex:1;font-size:1em;margin: 0 0.25em;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"),un=(e,t)=>{var n,o;const a=e.player,i=e.config;if(!i.controlBar)return;const h=i.controlBar.back,m=h&&s.tq,p=e.$controllerBar=s.$.create("div",{class:ln+" "+H},`<div>
    `+(m?`<span role='button' class="`+cn+" "+(h=="fullscreen"?J:"")+'">'+et("")+"</span>":"")+`
      <h2 class='`+Pt+"'>"+(((o=(n=a.options)==null?void 0:n.source)==null?void 0:o.title)||"")+`</h2>
    </div>
    <div></div>`),u=p.querySelector("."+Pt);if(m){const f=u.previousElementSibling;f.addEventListener("click",E=>{a.isFullScreen&&a.exitFullscreen(),a.emit("backward",E)}),h=="fullscreen"&&a.on("fullscreenchange",()=>{a.isFullScreen?f.classList.remove(J):f.classList.add(J)})}a.on("videosourcechanged",f=>{let E=f.payload;u.innerText=E.title||""}),s.$.render(p,t)},dn=s.$.css(be||(be=F([`
  width: 2.65em;
  display: flex;
  height: 7.65em;
  box-sizing: border-box;
  flex-direction: column;
`]))),At=s.$.css(`
  width: 100%;
  text-align: center;
  height: 28px;
  line-height: 28px;
  margin-bottom: 2px;
  font-size: 0.75em;
`),Ct=s.$.css(`
  position: relative;
  display: flex;
  justify-content: center;
  flex: 1;
  cursor: pointer;
  padding: 5px 0 14px;
`),hn=s.$.css(`
  height: 100%;
  width: 4px;
  position: relative;
`),gn=s.$.css(`
  width: 4px;
  height: 100%;
  overflow: hidden;
  border-radius: 2px;
  background: rgba(255, 255, 255, 0.3);
`),_t=s.$.css(`
  height: 100%;
  background-color: var(--primary-color);
  transform-origin: 0 100%;
`),Ot=s.$.css(ye||(ye=F([`
  position:absolute;
  bottom: 0;
  top: auto;
  left: -4px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background-color: var(--primary-color);
  vertical-align: middle;
  pointer-events: none;
  `]))),fn=(e,t)=>{const n=s.$.create("div."+dn,{},"<div class="+At+`>100</div>

    <div class=`+Ct+`>
        <div class=`+hn+`>
          <div class=`+gn+`>
            <div class=`+_t+`></div>
          </div>

          <div class=`+Ot+`></div>
        <div>
      </div>`),o=n.querySelector("."+Ct),a=n.querySelector("."+Ot),i=n.querySelector("."+_t),h=n.querySelector("."+At),m=f=>{const E=o.getBoundingClientRect(),y=(E.bottom-(f.clientY||f.changedTouches[0].clientY))/E.height;return y>=1?1:y<=0?0:y},p=f=>{f.preventDefault(),e.setVolume(u(m(f)))},u=f=>(h.innerText=""+~~(f*100),i.style.transform="scaleY("+f+")",a.style.bottom="calc("+~~(f*100)+"% - 6px)",f);u(e.volume),e.on("volumechange",()=>{u(e.isMuted?0:e.volume)}),o.addEventListener(ue.dragStart,f=>{p(f),document.addEventListener(ue.dragMove,p,{passive:!1}),document.addEventListener(ue.dragEnd,()=>{document.removeEventListener(ue.dragMove,p)},{once:!0})}),s.$.render(n,t)},zt=s.$.css(`
  display: none;
  bottom: 15px;
  position: absolute;
  left: 50%;
  padding: 6px 8px;
  background-color: var(--shadow-background-color);
  color: #fff;
  border-radius: 2px;
  white-space: nowrap;
  word-break: nowrap;
  transform: translateX(-50%);`),Mt=s.$.css({position:"absolute",width:"8px",height:"4px","background-color":"var(--highlight-color)",transform:"translateX(-3px)",transition:"all 0.2s",["&:hover > ."+zt]:{display:"block"}});function pn(e,t){const n=e.player,o=e.config.highlight;let a=[];t.style.setProperty("--highlight-color",(o==null?void 0:o.color)||"#FFF");function i(u){const f=s.$.create("div."+Mt,{},'<span class="'+zt+'">'+u.text+"</san>");return f.style.left=u.left+"%",f}function h(u,f){a.forEach(E=>E.remove());for(let E=0;E<u.length;E++){const y=u[E],$=i({left:y.time/f*100,text:y.text});a.push($),s.$.render($,t)}}function m(u){p(u)}function p(u){n.duration!==1/0&&n.duration>0?h(u,n.duration):n.once("loadedmetadata",function(){h(u,n.duration)})}o!=null&&o.source&&p(o.source),n.on("videosourcechange",()=>{a.forEach(u=>u.remove()),a=[]}),e.changHighlightSource=m}const Rt=s.$.css(`
  position: absolute;
  left: 0;
  bottom: 12px;
  pointer-events: none;
  transform: translateX(-50%);
  background-position-y: center;
  border-radius: 2px;
  display: none;`),Bt=s.$.css(`
  position: absolute;
  left: 0;
  bottom: 12px;
  pointer-events: none;
  border-radius: 2px;
  display: none;`),mn={width:160,height:90};function vn(e,t){const n=e.config.thumbnails,o=e.player;let a=!1,i;const h=s.$.render(s.$.create("div."+Rt),t);function m(u){if(!a||!u)a=!0,h.style.width=i.width+"px",h.style.height=i.height+"px",Array.isArray(i.src)||(h.style.backgroundImage="url("+i.src+")");else{const f=[i.width/2,t.clientWidth],E=f[0],y=f[1],$=E/y,x=(y-E)/y;if(h.style.left=(u<$?$:u>x?x:u)*100+"%",Array.isArray(i.src)){const w=i.number*u,S=Math.ceil(w/(i.x*i.y))-1,L=w%i.number,O=Math.floor(L/i.x),de=Math.ceil(L%i.x);h.style.backgroundImage="url("+i.src[S]+")",h.style.backgroundPosition=-de+"00% "+-O+"00%"}else{const w=Math.floor(u*i.number);h.style.backgroundPositionX="-"+w+"00%"}}}function p(u){a=!1,i=Object.assign({},mn,u),i.y&&!Array.isArray(i.src)&&(i.src=[i.src]),e.progressHoverCallback.push(m)}n!=null&&n.src&&p(n),o.on("videosourcechange",()=>{a=!1,h.style.backgroundImage="none",e.progressHoverCallback.splice(e.progressHoverCallback.findIndex(u=>u==m),1)}),e.changThumbnails=p}const tt=s.$.css({"background-color":"hsla(0, 0%, 100%, 0.4)"}),nt=s.$.css({"background-color":"var(--primary-color)"}),_e=s.$.css({width:"100%","pointer-events":"none",position:"relative","& > *":{content:"''",display:"block",position:"absolute",width:"1.4em",height:"1.4em",top:"calc(-0.7em + 2px)",left:"-0.7em",bottom:"0",transform:s.tq?"none":"scale(0)",transition:"transform 0.3s ease","z-index":"1"},"& > *:not(svg)":{width:"1em",height:"1em",top:"calc(-0.5em + 2px)",left:"-0.5em","border-radius":"50%","background-color":"#fff"}}),ot=s.$.css({position:"absolute",left:"0","border-radius":"2px",padding:"6px 8px","background-color":"var(--shadow-background-color)",color:"#fff","z-index":"2","pointer-events":"none",transform:"translateX(-50%)",display:"none",bottom:"15px"}),pe=s.$.css("/* progressDragging */"),bn=s.$.css(Object.assign({position:"relative","box-sizing":"border-box",padding:"6px 0px 4px",cursor:"pointer",width:"100%","font-size":"0.75em",["&."+pe+" ."+ot+", &."+pe+" ."+Rt+", &."+pe+" ."+Bt]:{display:"block"}},s.tq?{["@global ."+_+" ."+_e+" > *"]:{transform:"scale(0)"}}:{["&."+pe+" ."+_e+" > *, &:hover ."+_e+" > *"]:{transform:"scale(1)"}})),yn=s.$.css({position:"relative",height:"4px",width:"100%","background-color":"hsla(0, 0%, 100%, 0.2)",["& ."+tt+", & ."+nt]:{position:"absolute",left:"0",top:"0",bottom:"0","pointer-events":"none"}}),$n=(e,t)=>{var n;const o=e.player,a=e.config;if(o.options.isLive)return;const i=e.$progress=s.$.create("div."+bn,{},"<div class="+yn+`>
      <div class="`+ot+`">00:00</div>
      <div class="`+tt+`" style="width:0%"></div>
      <div class="`+nt+`" style="width:0%"></div>
      <div class="`+_e+`" style="transform: translateX(0%);">
        `+(M.get("progressIndicator")||"<span />")+`
      </div>
  </div>`),h=i.firstElementChild;(n=a.thumbnails)!=null&&n.isVTT?console.warn("vtt thumbnails support by @oplayer/pluins"):vn(e,h),e.vttThumbnailsCls=Bt,pn(e,h);const m=i.querySelector("."+tt),p=i.querySelector("."+nt),u=i.querySelector("."+_e),f=i.querySelector("."+ot);let E=!1;const y=x=>{const w=i.getBoundingClientRect(),S=((x.clientX||x.changedTouches[0].clientX)-w.left)/w.width;return S>=1?1:S<=0?0:S},$=x=>{const w=y(x),S=w*100;return p.style.width=S+"%",u.style.transform="translateX("+S+"%)",f.innerText=te(o.duration*w),f.style.left=S+"%",w};i.addEventListener(ue.dragStart,x=>{E=!0,i.classList.add(pe);const w=$(x);e.progressHoverCallback.forEach(L=>L(w));function S(L){L.preventDefault();const O=$(L);e.progressHoverCallback.forEach(de=>de(O))}document.addEventListener(ue.dragMove,S,{passive:!1}),document.addEventListener(ue.dragEnd,L=>{i.classList.remove(pe),E=!1,document.removeEventListener(ue.dragMove,S),isNaN(o.duration)||o.seek(y(L)*o.duration)},{once:!0})}),s.tq||(i.addEventListener("mouseenter",()=>{E||e.progressHoverCallback.forEach(x=>x())}),i.addEventListener("mousemove",x=>{if(E)return;i.classList.add(pe),x.target.classList.contains(Mt)?f.style.display="none":f.removeAttribute("style");const w=y(x);f.innerText=te(o.duration*w),f.style.left=w*100+"%",e.progressHoverCallback.forEach(S=>S(w))},{passive:!1}),i.addEventListener("mouseleave",()=>{E||i.classList.remove(pe)})),o.on(["timeupdate","seeking"],()=>{if(E)return;const x=o.currentTime,w=o.duration,S=x/w*100||0;p.style.width=S+"%",u.style.transform="translateX("+S+"%)"}),o.on("progress",()=>{const x=o.buffered.length?o.buffered.end(o.buffered.length-1)/o.duration*100:0;m.style.width=x+"%"}),o.on("videosourcechange",()=>{m.style.width="0%",p.style.width="0%",u.style.transform="translateX(0%)"}),s.$.render(i,t)},Ft=s.$.css({position:"absolute",left:0,right:0,bottom:0,"z-index":7,padding:"0 1em",transition:"transform 0.3s ease, padding 0.3s ease","&::before":{position:"absolute",content:"''",width:"100%",display:"block",bottom:0,left:0,"z-index":-1,top:"-1em",transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(transparent, rgba(0, 0, 0, .3))"},["@global ."+_+" &"]:{padding:0,"pointer-events":"none",transform:"translateY(calc(100% - 8px))","&::before":{opacity:0}}}),xn=(e,t)=>{const n=e.player,o=e.config,a=s.$.render(s.$.create("div."+Ft),t);o.miniProgressBar||s.$.css({["@global ."+_+" ."+Ft]:{transform:"translateY(100%)"}}),$n(e,a);const i=[n.locales.get("Play"),n.locales.get("Pause"),n.locales.get("Screenshot"),n.locales.get("Picture in Picture"),n.locales.get(n.isFullscreenEnabled?"Fullscreen":"WebFullscreen"),n.locales.get("Previous"),n.locales.get("Next")],h=i[0],m=i[1],p=i[2],u=i[3],f=i[4],E=i[5],y=i[6],$=M.get("previous")||"",x=M.get("next")||"",w=e.$controllerBottom=s.$.create("div."+H,{},`<div>

    `+($&&'<button class="'+z+" "+I+'" aria-label="'+E+'" >'+$+"</button>")+`

      <button
        class="`+z+" "+(n.isPlaying?Q:ee)+" "+I+`"
        aria-label="`+h+`"
      >
        `+M.get("play")+`
        `+M.get("pause")+`
      </button>

      `+(x&&'<button class="'+z+" "+I+'" aria-label="'+y+'">'+x+"</button>")+`

      `+(n.options.isLive?'<span class="'+l+'"></span>':"")+`

      <span class=`+g+">"+(n.options.isLive||n.$video.preload=="none"?"00:00":"00:00 / --:--")+`</span>
    </div>

    <div>
      <div class="`+k+" "+P+`">
        <button class="`+z+" "+(n.isMuted?Q:ee)+`" aria-label="Volume">
            `+M.get("volume")[0]+`
            `+M.get("volume")[1]+`
        </button>
        `+(s.gn?"":"<div class="+b+"></div>")+`
      </div>

      `+(o.screenshot?'<button class="'+z+" "+I+'" aria-label="'+p+`">
              `+M.get("screenshot")+`
            </button>`:"")+`

      `+(o.pictureInPicture&&n.isPipEnabled?`<button
              class="`+z+" "+I+" "+(n.isInPip?Q:ee)+`"
              aria-label="`+u+`">
                `+M.get("pip")[0]+`
                `+M.get("pip")[1]+`
            </button>`:"")+`

      `+(o.fullscreen?'<button class="'+z+" "+ee+" "+I+'" aria-label="'+f+`">
                `+M.get("fullscreen")[0]+`
                `+M.get("fullscreen")[1]+`
              </button>`:"")+`
    </div>`),S=w.querySelector("button[aria-label=Volume]");s.gn||fn(n,S.nextElementSibling);const L=w.querySelector("button[aria-label="+h+"]"),O=w.querySelector("."+g),de=w.querySelector('button[aria-label="'+f+'"]'),me=w.querySelector('button[aria-label="'+u+'"]'),se=(Z,ie)=>{Z.classList.add(ie?Q:ee),Z.classList.remove(ie?ee:Q)};o.fullscreen&&n.on("fullscreenchange",()=>setTimeout(()=>{se(de,bt(n))})),o.pictureInPicture&&n.on(["enterpictureinpicture","leavepictureinpicture"],()=>se(me,n.isInPip)),n.on(["play","pause","videosourcechange"],()=>{L.setAttribute("aria-label",n.isPlaying?m:h),se(L,n.isPlaying)}),n.on("volumechange",()=>se(S,n.isMuted)),n.on(["durationchange","timeupdate","seeking","seeked"],()=>{O.innerText=te(n.currentTime)+" "+(n.options.isLive?"":"/ "+te(n.duration))}),n.on("videosourcechange",()=>{O.innerText=n.options.isLive||n.$video.preload=="none"?"00:00":"00:00 / --:--"}),w.addEventListener("click",Z=>{switch(Z.target.getAttribute("aria-label")){case h:case m:return n.togglePlay();case"Volume":if(s.tq&&!s.gn)return;n.isMuted?n.unmute():n.mute();break;case u:return n.togglePip();case f:yt(n)||!n.isFullscreenEnabled?n.emit("fullscreenchange",{isWeb:!0}):n.toggleFullScreen();return;case p:Ke(n);break;case y:n.emit("next");break;case E:n.emit("previous");break}}),s.$.render(w,a)},kn=2e3,wn=e=>{const t=e.player,n=e.config,o=e.$root,a=s.$.create("div");un(e,a),xn(e,a),n.showControls=="played"&&(Re(a,J),t.once("play",()=>{Ae(a,J)}));const i=()=>{var f;!t.isPlaying&&!s.tq||re(t.$root,_)||re(t.$root,D)||re(t.$root,ce)||t.$root.contains(document.activeElement)&&((f=document.activeElement)==null?void 0:f.tagName)=="INPUT"||(Re(t.$root,_),t.$root.setAttribute(K,"true"),t.emit("controllervisibilitychange",!1))},h=Qe(i,kn),m=h.callee,p=h.clear,u=()=>{p(),re(t.$root,_)&&(Ae(t.$root,_),t.$root.setAttribute(K,"false"),t.emit("controllervisibilitychange",!0))};t.on("play",m),t.on(["pause","videosourcechange"],u),t.on("destroy",p),s.tq||(t.$root.addEventListener("mousemove",()=>{u(),m()}),t.$root.addEventListener("mouseleave",i)),e.toggleController=function(){if(re(a,J)){t.play();return}re(t.$root,_)?u():i()},s.$.render(a,o)},De={opacity:0,"pointer-events":"none"},En=s.$.css(Object.assign({transition:"opacity 100ms linear",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fill:"#fff",width:"3em",height:"3em","z-index":"7","& > button":{width:"100%",height:"100%","border-radius":"100%",background:"var(--primary-color)",opacity:.9,padding:"1em",transition:"transform .2s ease-in-out","&:active":{transform:"scale(.85)"},"& > *":{position:"relative",width:"1.5em",height:"1.5em",left:"-0.2em",top:"-0.25em"}},["@global ."+X+" &"]:De,["@global ."+j+" &"]:De,["@global ."+ce+" &"]:De},s.tq&&{["@global ."+_+" &"]:De})),It=(e,t)=>{const n=s.$.create("div."+En,{},'<button aria-label="Play" class="'+z+`" type="button">
      `+M.get("play")+`
    </button>`);return s.$.render(n,t).addEventListener("click",()=>e.play()),n},Sn=s.$.css(`
  display: none;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  color: #fff;
  background: #000;
  z-index: 7;
  align-items: center;
  padding: 0 10px;
  word-break: break-all;
  justify-content: center;
`),Dt=s.$.css("display: flex;"),Ln={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},Tn=(e,t,n)=>{if(n.errorBuilder){e.on("error",h=>{let m=h.payload;n.errorBuilder(m)});return}const o=s.$.render(s.$.create("div."+Sn,{"aria-label":"Error Overlay"}),t);function a(h){var m;let p="";if(h instanceof Event){const u=(m=h.target)==null?void 0:m.error;if(!u||!u.message&&typeof u.code!="number")return;p=u.message||Ln[u.code]}else p=h.message;o.innerText=p||"UNKNOWN_ERROR",e.$root.classList.add(ce),Re(o,Dt)}function i(){Ae(o,Dt),e.$root.classList.remove(ce),o.innerText=""}return e.on(["videosourcechange","videoqualitychange"],i),e.on("error",h=>{let m=h.payload;return a(m)}),a},Pn=s.$.css({position:"absolute",top:"0",bottom:"0",left:"0",right:"0",display:"none","align-items":"center","justify-content":"center",["@global ."+j+" &"]:{display:"flex"}}),An=s.$.css({position:"relative",overflow:"hidden",width:"20%",height:"4px","border-radius":"4px","&::before,&::after":{display:"block",content:"''",position:"absolute",height:"100%",width:"100%","background-color":"var(--primary-color)","border-radius":"4px"},"&::before":{opacity:"0.4"},"&::after":{animation:"indeterminate 1.3s infinite linear","transform-origin":"0% 50%"},"@keyframes indeterminate":{"0%":{transform:"translateX(0) scaleX(0)"},"10%":{transform:"translateX(0) scaleX(0.2)"},"40%":{transform:"translateX(0) scaleX(0.7)"},"60%":{transform:"translateX(60%) scaleX(0.4)"},"100%":{transform:"translateX(100%) scaleX(0.2)"}}}),qt=(e,t)=>{const n=s.$.create("div."+Pn,{"aria-label":"Loading"},""+(M.get("loadingIndicator")||'<div class="'+An+'"></div>'));s.$.render(n,t)},Cn=s.$.css({width:"100%",height:"100%",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",["@global ."+D+" &"]:{"z-index":"8"}}),_n=e=>{const t=e.player,n=e.$root,o=e.$mask=s.$.create("div."+Cn);let a=0,i;o.addEventListener("click",()=>{re(t.$root,D)||(s.tq?e.toggleController():(a==0&&t.togglePlay(),i&&clearTimeout(i),i=window.setTimeout(()=>{a==2&&(t.togglePlay(),t.toggleFullScreen()),a=0},200)),a+=1)}),s.$.render(o,n)},jt=e=>{const t=e.getAttribute("aria-checked")=="true";e.setAttribute("aria-checked",""+!t),wt(e,n=>n.setAttribute("aria-checked",""+t))},On=e=>{var t;const n=e.config.menu,o=[],a=(t=e.$controllerBar)==null?void 0:t.children[1],i=e.$controllerBottom.children[1],h=[a,i].filter(Boolean);function m(p){var u,f;const E=p.target,y=E.getAttribute("aria-label"),$=o.find(x=>x.name==y);!$||E.getAttribute("aria-checked")=="true"||(E.tagName.toUpperCase()=="SPAN"?(jt(E),(u=$.onChange)==null||u.call($,$.children[+E.getAttribute("data-index")],E.parentElement.previousElementSibling)):E.tagName.toUpperCase()=="BUTTON"&&((f=$.onClick)==null||f.call($,E)))}h.forEach(p=>{p.addEventListener("click",m)}),e.menu.register=function(u){const f=u.name,E=u.icon,y=u.children,x=u.position=="top"&&h.length==2;let w="";const S=`
    <button
      aria-label="`+f+`"
      `+(x?'data-tooltip-pos="down"':"")+`
      class="`+z+" "+(E?"":B)+" "+(u.children?"":I)+`"
      type="button"
    >`+(E||f)+"</button>";u.children?w=`
      <div class="`+k+" "+P+'" data-dropdown-pos="'+u.position+'" aria-label="'+f+`">
        `+S+`
        <div class='`+b+" "+(x?v:"")+`' role='menu'>
          `+y.map((L,O)=>`<span
                  role="menuitemradio"
                  aria-haspopup="false"
                  aria-label="`+f+`"
                  class="`+T+`"
                  aria-checked="`+!!L.default+`"
                  data-index="`+O+`"
                >`+L.name+"</span>").join("")+`
          </div>
      </div>`:w=S,x?a.insertAdjacentHTML("afterbegin",w):i.insertAdjacentHTML("afterbegin",w),o.push(u)},e.menu.unregister=function(u){h.forEach(f=>{var E,y;(E=f.querySelector("button[aria-label="+u+"]"))==null||E.remove(),(y=f.querySelector("div[aria-label="+u+"]"))==null||y.remove()})},e.menu.select=function(u,f){h.forEach(E=>{jt(E.querySelector("."+b+" > span[aria-label="+u+"]:nth-child("+(f+1)+")"))})},n&&n.forEach(p=>e.menu.register(p))},Ht=s.$.css({position:"absolute",display:"none",top:"0.625em",left:"0.625em",right:"0.625em","z-index":9,"margin-top":"var(--control-bar-height)",transition:"margin 0.2s",["@global ."+_+" &"]:{"margin-top":0}}),Vt=s.$.css(`
  -moz-user-select: all;
  -webkit-user-select: all;
  -ms-user-select: all;
  user-select: all;
  color: #fff;
  background-color: var(--shadow-background-color);
  border-radius: 2px;
  padding: 5px 10px;
  font-size: 0.875em;
`),Nt=s.$.css($e||($e=F([`
  text-align: center;
`]))),Ut=s.$.css(ne||(ne=F([`
  text-align: right;
`]))),Xt=s.$.css(xe||(xe=F([`
  bottom: 6em;
  top: initial;
`]))),zn={center:s.$.css(R||(R=F([`
  top: 50%;
  text-align: center;
  transform: translateY(-50%);
`]))),left:"","top-left":"",top:Nt,"top-center":Nt,"top-right":Ut,right:Ut,bottom:Xt,"left-bottom":Xt},Mn=2e3,Wt=s.$.css("display:block;"),Rn=e=>{const t=e.player,n=e.$root,o=s.$.create("div."+Ht,{"aria-label":"Notice"},'<span class="'+Vt+'"></span>'),a=o.querySelector("."+Vt),i=Qe(()=>Ae(o,Wt),Mn),h=i.callee;function m(p,u){a.innerHTML=p,o.className=Ht+" "+Wt+" "+zn[u||"left"],h()}return t.on("notice",p=>{let u=p.payload;return m(u.text,u.pos)}),e.notice=m,s.$.render(o,n),m};function Bn(e){return e.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(t,n,o)=>{let a=o.slice(0,3);return o.length===1&&(a=o+"00"),o.length===2&&(a=o+"0"),n+","+a})}function Fn(e){return`WEBVTT \r
\r
`.concat(Bn(e).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat(`\r
\r
`))}function st(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function Yt(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split(/[:.]/).map((t,n,o)=>{if(n===o.length-1){if(t.length===1)return"."+t+"00";if(t.length===2)return"."+t+"0"}else if(t.length===1)return(n===0?"0":":0")+t;return n===0?t:n===o.length-1?"."+t:":"+t}).join("")}function In(e){const t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");return`WEBVTT

`+e.split(/\r?\n/).map(n=>{const o=n.match(t);return o?{start:Yt(o[1].trim()),end:Yt(o[2].trim()),text:o[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(a=>a.trim()).join(`
`)}:null}).filter(n=>n).map((n,o)=>n?o+1+`
`+n.start+" --> "+n.end+`
`+n.text:"").filter(n=>n.trim()).join(`

`)}const rt="Subtitle";function Dn(e){const t=e.player,n=e.$root,o=e.config.subtitle,a=e.setting;return e.subtitle=new qn(t,a,n,o)}class qn{constructor(t,n,o,a){if(this.player=t,this.setting=n,this.el=o,this.isShow=!1,this.update=()=>{var i;const h=this.$dom,p=(i=this.player.$video.textTracks[0])==null?void 0:i.activeCues;if(p!=null&&p.length){let u="";for(let f=0;f<p.length;f++){const E=p[f];E&&(u+=E.text.replaceAll("\\h","").split(/\r?\n/).map(y=>"<p><span>"+y+"</span></p>").join(""))}h.innerHTML=u}else h.innerHTML=""},!window.TextDecoder){t.emit("notice",{text:t.locales.get("TextDecoder not supported")});return}this.setting=n,this.options=Object.assign({source:[]},a),this.processDefault(),this.createContainer(),this.load(),this.loadSetting(),this.player.on(["destroy","videosourcechange"],this.destroy.bind(this))}updateSource(t){this.changeSource(t)}changeSource(t){this.options.source=t,this.processDefault(),this.load(),this.loadSetting(),this.player.emit("subtitlesourcechange",t)}changeOffset(){var t,n;const o=this.currentSubtitle.offset,a=(t=this.player.$video.textTracks[0])==null?void 0:t.cues;if(o){const i=this.player.duration;Array.from(a||[]).forEach(h=>{h.startTime=Ee(h.startTime+o,0,i),h.endTime=Ee(h.endTime+o,0,i)}),this.$iosTrack&&Array.from(((n=this.player.$video.textTracks[1])==null?void 0:n.cues)||[]).forEach(h=>{h.startTime=Ee(h.startTime+o,0,i),h.endTime=Ee(h.endTime+o,0,i)})}}processDefault(){this.currentSubtitle=jn(this.options.source)}createContainer(){const t=this.el,n=this.options,o=n.color,a=n.shadow,i=n.fontSize,h=n.bottom,m=n.fontFamily,p=n.background,u=n.marginBottom;this.$dom=s.$.create("div."+s.$.css(Object.assign({left:"2%",right:"2%","text-align":"center","pointer-events":"none",position:"absolute","line-height":"1.5","font-family":m||"inherit",color:o||"#fff","text-shadow":a||"1px 0 1px #000, 0 1px 1px #000, -1px 0 1px #000, 0 -1px 1px #000, 1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000",bottom:h||"2%","font-size":(i||(s.tq?16:20))/16+"em","& > p":{margin:0,"& span":{"white-space":"pre-wrap",background:p?"rgba(8, 8, 8, 0.75)":"inherit",padding:"0 0.25em"}}},!s.tq&&{"margin-bottom":u||"2.2em",transition:"margin 0.3s",["@global ."+_+" &"]:{"margin-bottom":0}})),{"aria-label":"Subtitle"}),s.$.render(this.$dom,t)}createTrack(){this.$track=s.$.render(s.$.create("track",{default:!0,kind:"metadata"}),this.player.$video),this.player._requestFullscreen||(this.$iosTrack=s.$.render(s.$.create("track",{default:!1,kind:"captions"}),this.player.$video),this.player.$video.textTracks[1].mode="hidden",this.player.on("fullscreenchange",t=>{t.payload.isWeb||(this.player.isFullScreen?this.isShow&&(this.player.$video.textTracks[1].mode="showing"):this.player.$video.textTracks[1].mode="hidden")}))}load(){this.currentSubtitle&&(this.$track||this.createTrack(),this.loadSubtitle().then(()=>{this.$track.addEventListener("load",()=>{isNaN(this.player.duration)?this.player.once("loadedmetadata",()=>{this.changeOffset()}):this.changeOffset(),this.show()},{once:!0})}).catch(t=>{this.player.emit("notice",{text:t.message})}))}destroy(){const t=this.$dom,n=this.$track,o=this.$iosTrack;n==null||n.removeEventListener("cuechange",this.update),t.innerHTML="",this.setting.unregister(rt),n!=null&&n.src&&URL.revokeObjectURL(n.src),o!=null&&o.src&&URL.revokeObjectURL(o.src),n==null||n.remove(),o==null||o.remove(),this.$track=void 0,this.$iosTrack=void 0,this.isShow=!1}show(){this.isShow=!0,this.$track.addEventListener("cuechange",this.update)}hide(){const t=this.$track,n=this.$dom;this.isShow=!1,n.innerHTML="",t.removeEventListener("cuechange",this.update)}loadSubtitle(){const t=this.currentSubtitle,n=this.player,o=this.$track,a=this.$iosTrack,i=t.src,h=t.encoding,m=t.type,p=m===void 0?"auto":m;return fetch(i).then(u=>u.arrayBuffer()).then(u=>{var f;const y=new TextDecoder(h).decode(u);switch(p=="auto"?(f=/srt|ass|vtt(#|\?|$)/i.exec(i))==null?void 0:f[0]:p){case"srt":return st(Fn(y));case"ass":return st(In(y));case"vtt":return st(y);default:return i}}).then(u=>{o!=null&&o.src&&URL.revokeObjectURL(o.src),o.src=u,a&&(a.src&&URL.revokeObjectURL(a.src),a.src=u)}).catch(u=>{n.emit("notice",{text:"Subtitle"+u.message})})}loadSetting(){const t=this.options.source;t.length&&(this.setting.unregister(rt),this.setting.register({name:this.player.locales.get("Subtitle"),type:"selector",icon:M.get("subtitle"),key:rt,onChange:n=>{let o=n.value;o?(this.currentSubtitle=o,this.$dom.innerHTML="",this.load()):this.hide()},children:[{name:this.player.locales.get("OFF"),default:!this.currentSubtitle}].concat(t==null?void 0:t.map(n=>{var o;return{name:n.name,default:((o=this.currentSubtitle)==null?void 0:o.src)==n.src,value:n}}))}))}}function jn(e){return e.find(t=>t.default)}const Hn=(e,t)=>{var n;const o=(n=t.theme)==null?void 0:n.watermark;if(!o)return;const a=e.$watermark=document.createElement("img");a.setAttribute("alt","watermark");for(const i in o.style)a.style[i]=o.style[i];for(const i in o.attrs)a.setAttribute(i,o.attrs[i]);a.src=o.src,e.$root.appendChild(a)},Vn={fullscreen:!0,coverButton:!0,miniProgressBar:!0,autoFocus:!0,forceLandscapeOnFullscreen:!0,showControls:"always",keyboard:{focused:!0},settings:["loop"],theme:{primaryColor:"#6668ab"},speeds:["2.0","1.5","1.25","1.0","0.75","0.5"]};class Nn{constructor(t){this.config=t,this.key="ui",this.version="1.2.31",this.name="oplayer-theme-ui",this.keyboard={},this.setting={},this.menu={},this.progressHoverCallback=[],this.config=(0,s.Ee)({},Vn,t)}apply(t){var n,o;const a=this.config;this.player=t;const i=this.$root=s.$.create("div."+ke(a));if(Hn(this,a),t.isNativeUI){Ye(t),It(t,i),qt(t,i),s.$.render(i,t.$root);return}return this.icons=M.setupIcons(a.icons),$t(t,a),Tn(t,i,a),Rn(this),qt(t,i),a.coverButton&&(this.$coverButton=It(t,i)),wn(this),_n(this),an(this),On(this),Dn(this),Fe(this),d(this),c(t,a),!s.tq&&((n=a.keyboard)!=null&&n.focused||(o=a.keyboard)!=null&&o.global)&&Ze(this),s.$.render(i,t.$root),this}destroy(){}highlight(t){return this.changHighlightSource(t)}}function Un(e){return new Nn(e)}}}]);
