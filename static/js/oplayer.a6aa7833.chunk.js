"use strict";(self.webpackChunk_web_index=self.webpackChunk_web_index||[]).push([[6193],{8737:function(mt,Ae,he){he.d(Ae,{$:function(){return ze},ZP:function(){return Pe},gn:function(){return ke},tq:function(){return Me}});var i=(c,s,a)=>new Promise((u,l)=>{var p=M=>{try{w(a.next(M))}catch(A){l(A)}},$=M=>{try{w(a.throw(M))}catch(A){l(A)}},w=M=>M.done?u(M.value):Promise.resolve(M.value).then(p,$);w((a=a.apply(c,s)).next())}),H=(c,s,a)=>(s=c[Symbol.asyncIterator],a=(u,l)=>(l=c[u])&&(s[u]=p=>new Promise(($,w,M)=>(p=l.call(c,p),M=p.done,Promise.resolve(p.value).then(A=>$({value:A,done:M}),w)))),s?s.call(c):(c=c[Symbol.iterator](),s={},a("next"),a("return"),s)),$e=Object.defineProperty,_e=(c,s,a)=>s in c?$e(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a,I=(c,s,a)=>(_e(c,typeof s!="symbol"?s+"":s,a),a),xe,ye,q,se,N,G,W,Y;function ve(c){return te(c).toString(36)}function te(c){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=1540483477,u=24,l=s^c.length,p=c.length,$=0;for(;p>=4;){let w=K(c,$);w=B(w,a),w^=w>>>u,w=B(w,a),l=B(l,a),l^=w,$+=4,p-=4}switch(p){case 3:l^=re(c,$),l^=c.charCodeAt($+2)<<16,l=B(l,a);break;case 2:l^=re(c,$),l=B(l,a);break;case 1:l^=c.charCodeAt($),l=B(l,a);break}return l^=l>>>13,l=B(l,a),l^=l>>>15,l>>>0}function K(c,s){return c.charCodeAt(s++)+(c.charCodeAt(s++)<<8)+(c.charCodeAt(s++)<<16)+(c.charCodeAt(s)<<24)}function re(c,s){return c.charCodeAt(s++)+(c.charCodeAt(s++)<<8)}function B(c,s){c=c|0,s=s|0;let a=c&65535,u=c>>>16;return a*s+((u*s&65535)<<16)|0}function Q(c){return Boolean(c&&typeof c=="object"&&!Array.isArray(c))}function P(c){for(var s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];if(!a.length)return c;const l=a.shift();if(Q(c)&&Q(l))for(const p in l)Q(l[p])?(c[p]||Object.assign(c,{[p]:{}}),P(c[p],l[p])):Object.assign(c,{[p]:l[p]});return P.apply(void 0,[c].concat(a))}function ae(c){if(typeof c!="object"||c===null)return!1;let s=c;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(c)===s}function ce(c){let s=[":",".","[",">"," "],a=!1,u=c.charAt(0);for(let l=0;l<s.length;l++)if(u===s[l]){a=!0;break}return a||c.indexOf("&")>=0}var z=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function oe(c){if(c.indexOf(",")===-1)return[c];for(var s=[],a=[],u=0,l;l=z.exec(c);)switch(l[0]){case"(":u++;break;case")":u--;break;case",":if(u)break;s.push(l.index)}for(l=s.length;l--;)a.unshift(c.slice(s[l]+1)),c=c.slice(0,s[l]);return a.unshift(c),a}function Te(c,s){let a=oe(c);return oe(s).map(l=>l.indexOf("&")>=0?l:"&"+l).reduce((l,p)=>l.concat(a.map($=>p.replace(/\&/g,$))),[]).join(",")}function pt(c,s){return c?"@media "+c.substring(6)+" and "+s.substring(6):s}function Ye(c){return c.indexOf("@media")===0}function Ke(c){return c.indexOf("@keyframes")===0}function vt(c){return c.indexOf("@global")===0}function Ce(c,s){var a;let u=s.rules,l=s.mediaQuery,p=s.globalSelector,$={};return p&&(c=p),(a=Object.keys(u))==null||a.forEach(w=>{var M,A,Z,ne;if(vt(w)){const R=w;w=w.substring(8);const U=w.indexOf("&");let j;U!=-1?(j=Te(c,w),p=w.substring(0,U-1).trim()):j=w,P($,Ce(j,{mediaQuery:l,rules:u[R],globalSelector:j}))}else ce(w)?P($,Ce(Te(c,w),{rules:u[w],mediaQuery:l})):Ye(w)?P($,Ce(c,{mediaQuery:pt(l,w),rules:u[w]})):l?((M=$[l])!=null||($[l]={}),(Z=(A=$[l])[c])!=null||(A[c]={}),$[l][c][w]=u[w]):Ke(w)?$[w]=u[w]:((ne=$[c])!=null||($[c]={}),$[c][w]=u[w])}),$}function Qe(c){let s=[];for(const a in c)if(Object.hasOwnProperty.call(c,a)){const u=c[a];Q(u)?s.push(a+"{"+Qe(u)+"}"):s.push(a+":"+u)}return/^\d%/.test(s[0])?s.join(" "):s.join(";")}function Ze(c){let s=[];for(const a in c)if(Object.hasOwnProperty.call(c,a)){const u=c[a];if(Ye(a))s.push(a+"{"+Ze(u)+"}");else if(Ke(a))s.push(a+"{"+Qe(u)+"}");else{const l=Object.entries(u).map(p=>{let $=p[0],w=p[1];return $+":"+w}).join(";");s.push(a+"{"+l+"}")}}return s}function bt(c,s){return Ze(Ce(s,{rules:c}))}var ze;(c=>{c.create=function(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const w=l.indexOf("#")!==-1,M=l.indexOf(".")!==-1,A=w?l.split("#"):M?l.split("."):[l],Z=A[0],ne=A[1],R=document.createElement(Z);return w&&(R.id=ne),M&&R.classList.add(ne),$&&(R.innerHTML=$),Object.keys(p).forEach(U=>{const j=p[U];(Z==="video"||Z==="audio")&&typeof j=="boolean"?j&&R.setAttribute(U,""):typeof j!="undefined"&&R.setAttribute(U,""+j)}),R},c.render=(l,p)=>p.appendChild(l),c.isBrowser=()=>Boolean(typeof globalThis!="undefined"&&globalThis.document&&globalThis.document.documentElement);function s(l){if(!c.isBrowser())return null;let p=document.createElement("style");p.setAttribute("data-"+l,""),p.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(p);for(let $=0;$<document.styleSheets.length;$++)if(document.styleSheets[$].ownerNode===p)return document.styleSheets.item($);return null}c.createSheet=s;const a=(()=>{const l=Object.create({});return p=>{const $=typeof p=="object"?JSON.stringify(p):p;return l[$]||(l[$]="css-"+ve($)),l[$]}})();c.createCss=l=>{let p=l.sheet,$=l.ssrData;return function(){for(var w,M=arguments.length,A=new Array(M),Z=0;Z<M;Z++)A[Z]=arguments[Z];const ne=Boolean(A[0]&&A[0].length&&A[0].raw);let R="";if(ne){let J=A[0];R+=J[0];for(let V=1;V<A.length;V++)R+=typeof A[V]!="string"?"":A[V],R+=J[V]}else typeof A[0]=="string"?R=A[0]:R=JSON.stringify(A[0]);const U=a(R);if(p){for(let J=0;J<p.cssRules.length;J++)if(((w=p.cssRules[J])==null?void 0:w.selectorText)=="."+U)return U}let j=["."+U+"{"+R+"}"];return!ne&&typeof A[0]=="object"&&(j=bt(A[0],"."+U)),p?j.forEach(J=>{p.insertRule(J,p.cssRules.length)}):$=$.concat(j),U}},c.createStyled=()=>{const l=[],p=s("oplayer");return{css:c.createCss({sheet:p,ssrData:l}),getCssValue:()=>l}};var u=c.createStyled();c.css=u.css,c.getCssValue=u.getCssValue,c.cls=l=>"css-"+ve(l)})(ze||(ze={}));const we=ze,$t=/(iPad)/gi.test((xe=globalThis.navigator)==null?void 0:xe.userAgent)||/Macintosh/i.test((ye=globalThis.navigator)==null?void 0:ye.userAgent)&&Boolean((q=globalThis.navigator)==null?void 0:q.maxTouchPoints)&&((se=globalThis.navigator)==null?void 0:se.maxTouchPoints)>=1,ke=/iPhone/gi.test((N=globalThis.navigator)==null?void 0:N.userAgent)||$t,Me=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test((G=globalThis.navigator)==null?void 0:G.userAgent)||ke,D=/mqqbrowser/i.test((W=globalThis.navigator)==null?void 0:W.userAgent)&&!/ qq/i.test((Y=globalThis.navigator)==null?void 0:Y.userAgent),je=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","encrypted","waitingforkey","enterpictureinpicture","leavepictureinpicture"],qe=["contextmenu"],Ge=["loadedplugin","videoqualitychange","videosourcechange","destroy"],Je=[].concat(je,qe,Ge);class et{constructor(){I(this,"events",Object.create(null)),I(this,"offQueue",[])}on(s,a){this.events[s]||(this.events[s]=[]),this.events[s].push(a)}onAny(s,a){s.forEach(u=>this.on(u,a))}once(s,a){const u=l=>{a({type:s,payload:l.payload}),this.offQueue.push(()=>this.off(s,u))};this.on(s,u)}off(s,a){if(!this.events[s])return;const u=this.events[s].indexOf(a);u>-1&&this.events[s].splice(u,1)}offAny(s){this.events[s]=[]}offAll(){this.events=Object.create(null)}emit(s,a){var u,l;for((u=this.events[s])==null||u.forEach(p=>{p({type:s,payload:a})}),(l=this.events["*"])==null||l.forEach(p=>{p({type:s,payload:a})});this.offQueue.length;)this.offQueue.shift()()}}const Re={Play:"\u64AD\u653E",Pause:"\u6682\u505C",Loop:"\u5FAA\u73AF\u64AD\u653E",Volume:"\u97F3\u91CF","Volume: %s":"\u97F3\u91CF\uFF1A%s",Mute:"\u9759\u97F3",Speed:"\u64AD\u653E\u901F\u5EA6",LIVE:"\u76F4\u64AD",Language:"\u8BED\u8A00",Screenshot:"\u622A\u56FE",Subtitle:"\u5B57\u5E55",Quality:"\u753B\u8D28",Fullscreen:"\u5168\u5C4F","TextDecoder Not Supported":"\u4E0D\u652F\u6301\u539F\u751F\u5B57\u5E55",Setting:"\u8BBE\u7F6E","Picture in Picture":"\u753B\u4E2D\u753B",Danmaku:"\u5F39\u5E55",Display:"\u663E\u793A",Opacity:"\u900F\u660E\u5EA6",FontSize:"\u5B57\u4F53\u5927\u5C0F","Display Area":"\u663E\u793A\u533A\u57DF",Off:"\u5173\u95ED",Auto:"\u81EA\u52A8",Default:"\u9ED8\u8BA4",Normal:"\u6B63\u5E38","%ss":"%s\u79D2",Close:"\u5173\u95ED","Can be closed after %ss":"%s\u79D2\u540E\u53EF\u5173\u95ED\u5E7F\u544A"};class it{constructor(s){I(this,"lang"),I(this,"languages",{zh:Re,"zh-CN":Re,en:Object.keys(Re).reduce((a,u)=>(a[u]=u,a),{})}),this.lang=s==="auto"?navigator.language:s,this.languages[this.lang]||navigator.languages.some(a=>{if(this.languages[a])return this.lang=a,!0;if(a.indexOf("-")!==-1){const u=a.split("-")[0];if(u&&this.languages[u])return this.lang=u,!0}return!1}),this.languages[this.lang]||(this.lang="zh-CN")}get(s){for(var a=arguments.length,u=new Array(a>1?a-1:0),l=1;l<a;l++)u[l-1]=arguments[l];const p=this.languages[this.lang][s];if(p==null)return s;let $=0;return p.replace(/%s/gi,()=>{var w;return(w=u[$++])!=null?w:""})}update(s){this.languages=P(this.languages,s)}}const Le=[],rt={autoplay:!1,muted:!1,loop:!1,volume:1,preload:"metadata",playbackRate:1,playsinline:!0,lang:"auto",source:{},videoAttr:{},isLive:!1,autopause:!0,isNativeUI:()=>D};class Pe{constructor(s,a){if(I(this,"container"),I(this,"options"),I(this,"locales"),I(this,"eventEmitter",new et),I(this,"_pluginsFactory",[]),I(this,"plugins",{}),I(this,"$root"),I(this,"$video"),I(this,"listeners",Object.create(null)),I(this,"hasError",!1),I(this,"isSourceChanging",!1),I(this,"loader"),this.container=typeof s=="string"?document.querySelector(s):s,!this.container)throw new Error((typeof s=="string"?s:"Element")+"does not exist");this.options=Object.assign(rt,typeof a=="string"?{source:{src:a}}:a),this.locales=new it(this.options.lang)}static make(s,a){return new Pe(s,a)}use(s){return s.forEach(a=>{this._pluginsFactory.push(a)}),this}create(){return this.render(),this.initEvent(),this.applyPlugins(),this.options.source.src&&this.load(this.options.source),Le.push(this),this}initEvent(){const s=u=>{this.$video.error&&(this.hasError=!0,this.emit("error",u))};this.listeners.error=s,this.$video.addEventListener("error",u=>this.listeners.error(u));const a=(u,l)=>this.eventEmitter.emit(u,l);[[this.$video,["fullscreenchange","webkitbeginfullscreen","webkitendfullscreen"],["fullscreenerror","webkitfullscreenerror"]],[this.$root,["fullscreenchange","webkitfullscreenchange"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]]].forEach(u=>{const l=u[0];u.slice(1).forEach($=>{const w=$[0];this.listeners[w]=a,$.forEach(M=>{l.addEventListener(M,A=>this.listeners[w](w,A))})})}),[[this.$video,je],[this.$root,qe]].forEach(u=>{let l=u[0];u[1].forEach($=>{this.listeners[$]||(this.listeners[$]=a,l.addEventListener($,w=>this.listeners[$]($,w),{passive:!0}))})})}render(){this.$video=we.create("video."+we.css(`
        width: 100%;
        height: 100%;
        display: block;
        position: relative;
      `),Object.assign({autoplay:this.options.autoplay,loop:this.options.loop,playsinline:this.options.playsinline,"webkit-playsinline":this.options.playsinline,"x5-playsinline":this.options.playsinline,preload:this.options.preload,poster:this.options.source.poster},this.options.videoAttr)),this.$video.muted=!!this.options.muted,this.$video.volume=this.options.volume,this.$root=we.create("div."+we.css(`
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #000;
      `)),we.render(this.$video,this.$root),we.render(this.$root,this.container)}load(s){return i(this,null,function*(){var a;yield(a=this.loader)==null?void 0:a.destroy(),this.loader=void 0;try{for(var u=H(this._pluginsFactory),l,p,$;l=!(p=yield u.next()).done;l=!1){const w=p.value;if(w.load){const M=yield w.load(this,s);if(M!=!1&&!this.loader){this.loader=M;break}}}}catch(w){$=[w]}finally{try{l&&(p=u.return)&&(yield p.call(u))}finally{if($)throw $[0]}}return this.loader||(this.$video.src=s.src),s})}applyPlugins(){this._pluginsFactory.forEach(s=>{let a=s.name,u=s.key,l=s.apply,p=s.version;if(l){const $=l(this);if($){const w=u||a;ae($)?this.plugins[w]=Object.assign({name:a,key:u,version:p},this.plugins[w],$):this.plugins[w]=Object.assign($,this.plugins[w],{_name:a,key:u,version:p})}}})}on(s,a){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{once:!1};return typeof s=="string"?u.once?this.eventEmitter.once(s,a):this.eventEmitter.on(s,a):Array.isArray(s)?this.eventEmitter.onAny(s,a):typeof s=="function"&&this.eventEmitter.on("*",s),this}off(s,a){this.eventEmitter.off(s,a)}offAny(s){this.eventEmitter.offAny(s)}emit(s,a){this.eventEmitter.emit(s,a)}setPoster(s){this.$video.poster=s}play(){if(!(!this.$video.src||this.isSourceChanging)){if(this.options.autopause)for(let s=0;s<Le.length;s++){const a=Le[s];a!=this&&a.pause()}return this.$video.play()}}pause(){return this.$video.pause()}togglePlay(){return this.isPlaying?this.pause():this.play()}mute(){this.$video.muted=!0}unmute(){this.$video.muted=!1}toggleMute(){this.isMuted?this.unmute():this.mute()}setVolume(s){this.$video.volume=s>1?1:s<0?0:s,this.$video.volume>0&&this.isMuted&&this.unmute()}setPlaybackRate(s){this.$video.playbackRate=s}seek(s){this.$video.currentTime=s}setLoop(s){this.$video.loop=s}enterFullscreen(){return i(this,null,function*(){this.isInPip&&(yield this.exitPip()),ke?this.$video.webkitEnterFullscreen():this._requestFullscreen.call(this.$root,{navigationUI:"hide"})})}exitFullscreen(){return this._exitFullscreen.call(document)}get isFullscreenEnabled(){return Boolean(ke&&this.$video.webkitEnterFullscreen)||document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}get isFullScreen(){return Boolean(ke&&this.$video.webkitDisplayingFullscreen||(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this.$root)}toggleFullScreen(){return this.isFullScreen?this.exitFullscreen():this.enterFullscreen()}get isPipEnabled(){return document.pictureInPictureEnabled}enterPip(){return this.$video.requestPictureInPicture()}exitPip(){return this.isInPip?document.exitPictureInPicture():!1}get isInPip(){return document.pictureInPictureElement==this.$video}togglePip(){return this.isInPip?this.exitPip():this.enterPip()}_resetStatus(){this.hasError=!1,this.isPlaying&&(this.$video.pause(),this.emit("pause"))}changeQuality(s){return this.isSourceChanging=!0,this.emit("videoqualitychange",s),this._loader(s,{keepPlaying:!0,keepTime:!0,event:"videoqualitychanged"})}changeSource(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return this.isSourceChanging=!0,this.emit("videosourcechange",s),this._loader(s,{keepPlaying:a,event:"videosourcechanged"})}_loader(s,a){const u=this.isPlaying,l=this.currentTime,p=this.volume,$=this.playbackRate,w=a.keepPlaying,M=a.keepTime;return this._resetStatus(),new Promise((A,Z)=>{const ne=this.options.preload=="none";let R=ne?"loadstart":ke?"loadedmetadata":"canplay";const U=w&&u,j=V=>{this.isSourceChanging=!1,J&&this.off(R,J),Z(V)};this.on("error",j,{once:!0});const J=()=>{this.off("error",j),this.setVolume(p),this.setPlaybackRate($),ne&&M&&this.$video.load(),M&&this.seek(l),U&&!this.isPlaying&&this.$video.play(),A()};return this.on(R,J,{once:!0}),(s instanceof Promise?s:Promise.resolve(s)).then(V=>(this.$video.poster=V.poster||"",this.options.source=Object.assign({},this.options.source,V),V)).then(V=>this.load(V)).then(V=>{this.isSourceChanging=!1,this.emit(a.event,V)}).catch(j)})}destroy(){Le.splice(Le.indexOf(this),1),this.emit("destroy"),this.isPlaying&&this.pause(),this.isFullScreen&&this.exitFullscreen(),this.isInPip&&this.exitPip(),this.$video.src&&URL.revokeObjectURL(this.$video.src),this.eventEmitter.offAll(),this.container.removeChild(this.$root),this.container=this.$root=this.$video=this.loader=void 0,this.listeners=Object.create(null),this._pluginsFactory=[],this.plugins={}}get isNativeUI(){return this.options.isNativeUI()}get state(){return this.$video.readyState}get isPlaying(){return!this.$video.paused}get isMuted(){return this.$video.muted}get isEnded(){return this.$video.ended}get isLoop(){return this.$video.loop}get isAutoPlay(){return this.$video.autoplay}get duration(){return this.$video.duration}get buffered(){return this.$video.buffered}get currentTime(){return this.$video.currentTime}get volume(){return this.$video.volume}get playbackRate(){return this.$video.playbackRate}get _requestFullscreen(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen}get _exitFullscreen(){return Document.prototype.exitFullscreen||Document.prototype.webkitExitFullscreen||Document.prototype.cancelFullScreen||Document.prototype.mozCancelFullScreen||Document.prototype.msExitFullscreen}static get version(){return"1.2.10"}}typeof window!==void 0&&console.log(`%cOPlayer%c v%s
 %c
Oh! Another HTML5 video player.
https://github.com/shiyiya/oplayer
`,"font-size:32px;","font-size:12px;color:#999999;",Pe.version,"font-size:14px;")},1022:function(mt,Ae,he){he.d(Ae,{ZP:function(){return xe}});var i=he(8737),H=he(2528),$e=he(1084);const _e=["playing","duration","aspectRatio","plugins","onEvent"];function I(q,se){if(q==null)return{};var N={},G=Object.keys(q),W,Y;for(Y=0;Y<G.length;Y++)W=G[Y],!(se.indexOf(W)>=0)&&(N[W]=q[W]);return N}const xe=(0,H.forwardRef)((q,se)=>{const N=q.playing,G=q.duration,W=G===void 0?0:G,Y=q.aspectRatio,ve=Y===void 0?9/16:Y,te=q.plugins,K=te===void 0?[]:te,re=q.onEvent,B=I(q,_e),Q=(0,H.useRef)(!0),P=(0,H.useRef)(null),ae=ye(B.source),ce=(0,H.useCallback)(z=>{z!==null&&(P.current=i.ZP.make(z,B).use(K).create(),P.current.seek(W/1e3),re&&P.current.on(re))},[]);return(0,H.useEffect)(()=>{var z,oe,Te;Q.current||(N?P.current&&!P.current.isPlaying&&((z=P.current)==null||z.play()):(oe=P.current)!=null&&oe.isPlaying&&((Te=P.current)==null||Te.pause()))},[N]),(0,H.useEffect)(()=>{var z,oe;Q.current||(B.source instanceof Promise&&ae!=B.source||(z=B.source)!=null&&z.src&&(ae==null?void 0:ae.src)!==B.source.src)&&((oe=P.current)==null||oe.changeSource(B.source))},[B.source]),(0,H.useEffect)(()=>{var z;Q.current||(z=P.current)==null||z.seek(W/1e3)},[W]),(0,H.useEffect)(()=>{var z,oe;Q.current||(B.muted?(z=P.current)==null||z.mute():(oe=P.current)==null||oe.unmute())},[B.muted]),(0,H.useEffect)(()=>{var z;Q.current||(z=P.current)==null||z.setPlaybackRate(B.playbackRate)},[B.playbackRate]),(0,H.useEffect)(()=>(Q.current=!1,()=>{var z;return(z=P.current)==null?void 0:z.destroy()}),[]),(0,H.useImperativeHandle)(se,()=>P.current,[]),(0,$e.jsx)("div",{style:{width:"100%",paddingTop:ve*100+"%",backgroundColor:"#f4f4f4",position:"relative"},children:(0,$e.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:ce})})});function ye(q){const se=(0,H.useRef)();return(0,H.useEffect)(()=>{se.current=q},[q]),se.current}},6399:function(mt,Ae,he){he.d(Ae,{Z:function(){return Yn}});var i=he(8737),H,$e,_e,I,xe,ye,q,se;function N(e,n){return n||(n=e.slice(0)),e.raw=n,e}const G=i.$.cls("loading"),W=i.$.cls("playing"),Y=i.$.cls("focused"),ve=i.$.cls("fullscreen"),te=i.$.cls("settingShown"),K=i.$.css("cursor: none;"),re=i.$.cls("error"),B=e=>i.$.css(Object.assign({"--primary-color":""+e.theme.primaryColor,"--shadow-background-color":"rgba(28 ,28 ,28 , .9)","--control-bar-height":e.controlBar?"2.5em":0,position:"absolute",top:"0",left:"0",width:"100%",height:"100%","font-size":"16px","&, & > *":{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"},"& [hidden]":{display:"none"}},!i.tq&&{["&."+ve]:{"font-size":"22px"},["@global ."+Q+" &"]:{"font-size":"22px"}})),Q=i.$.css(H||(H=N([`
  z-index: 9999 !important;
  position: fixed !important;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;`]))),P=i.$.css({background:"none",border:"none",cursor:"pointer",padding:0,outline:"none",font:"inherit",color:"inherit","line-height":"inherit","text-align":"inherit",width:"100%"}),ae=i.$.css({"& > *:nth-child(1)":{display:"none"}}),ce=i.$.css({"& > *:nth-child(2)":{display:"none"}}),z=i.tq?"":i.$.css({position:"relative","&:hover":{"&::after":{opacity:1,transform:"translateX(-50%) scale(1)"},"&[data-tooltip-pos=up-right]::after":{right:0,left:"auto",transform:"translateY(0) scale(1)"},"&[data-tooltip-pos=bottom-right]::after":{right:0,transform:"translateY(0) scale(1)"}},"&::after":{"line-height":"1.25em",position:"absolute",content:"attr(aria-label)",bottom:"100%",left:"50%","margin-bottom":"0.5em","white-space":"nowrap",background:"var(--shadow-background-color)",transform:"translate(-50%, 10px) scale(.8)","transform-origin":"50% 100%",opacity:0,padding:"4px 8px","border-radius":"4px",transition:"transform .2s ease .1s,opacity .2s ease .1s","pointer-events":"none","font-size":"0.75em"},"&[data-tooltip-pos=up-right]::after":{right:0,left:"auto",transform:"translateY(10px) scale(.8)","transform-origin":"100% 100%"},"&[data-tooltip-pos=bottom-right]::after":{right:0,top:"100%",bottom:"unset",left:"auto","margin-top":"0.5em",transform:"translateY(-10px) scale(.8)","transform-origin":"100% 0"}}),Me={play:'<svg viewBox="0 0 1024 1024"><path  d="M245.76 785.203V238.797c0-50.442 34.918-69.182 77.967-42.046l422.196 266.117c43.11 27.157 43.069 71.128 0 98.284L323.727 827.249c-43.11 27.177-77.967 8.315-77.967-42.046z" /></svg>',pause:'<svg viewBox="0 0 1024 1024"><path  d="M327.68 184.32a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z m368.64 0a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z" /></svg>',volume:['<svg viewBox="0 0 1024 1024"><path d="M128 426.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333V273.493333c0-37.973333-46.08-57.173333-72.96-30.293333L298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667z m576 85.333333A192 192 0 0 0 597.333333 340.053333v343.466667c63.146667-31.146667 106.666667-96 106.666667-171.52zM597.333333 189.866667v8.533333c0 16.213333 10.666667 30.293333 25.6 36.266667C733.013333 278.613333 810.666667 386.56 810.666667 512s-77.653333 233.386667-187.733334 277.333333c-15.36 5.973333-25.6 20.053333-25.6 36.266667v8.533333c0 26.88 26.88 45.653333 51.626667 36.266667C793.6 815.36 896 675.84 896 512s-102.4-303.36-247.04-358.4c-24.746667-9.813333-51.626667 9.386667-51.626667 36.266667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="M154.88 154.88a42.496 42.496 0 0 0 0 60.16L311.04 371.2 298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333v-177.92l178.346667 178.346667c-20.906667 15.786667-43.52 29.013333-68.266667 38.826666-15.36 6.4-24.746667 22.613333-24.746667 39.253334 0 30.72 31.146667 50.346667 59.306667 38.826666 34.133333-14.08 66.133333-32.853333 94.72-55.893333l57.173333 57.173333a42.496 42.496 0 1 0 60.16-60.16L215.466667 154.88c-16.64-16.64-43.52-16.64-60.586667 0zM810.666667 512c0 34.986667-6.4 68.693333-17.493334 99.84l65.28 65.28c23.893333-49.92 37.546667-105.813333 37.546667-165.12 0-163.413333-102.4-303.36-246.613333-358.4-25.173333-9.813333-52.053333 9.813333-52.053334 36.693333v8.106667c0 16.213333 10.666667 30.293333 26.026667 36.266667C733.013333 279.04 810.666667 386.56 810.666667 512z m-371.626667-268.373333l-7.253333 7.253333L512 331.093333V273.493333c0-37.973333-46.08-56.746667-72.96-29.866666zM704 512A192 192 0 0 0 597.333333 340.053333v76.373334l105.813334 105.813333c0.426667-3.413333 0.853333-6.826667 0.853333-10.24z"></path></svg>'],fullscreen:['<svg viewBox="-113 -113 1250 1250"><path d="M0 232.732444A232.732444 232.732444 0 0 1 232.732444 0h558.535112A232.732444 232.732444 0 0 1 1024 232.732444v558.535112A232.732444 232.732444 0 0 1 791.267556 1024H232.732444A232.732444 232.732444 0 0 1 0 791.267556V232.732444z m232.732444-139.662222a139.662222 139.662222 0 0 0-139.662222 139.662222v558.535112a139.662222 139.662222 0 0 0 139.662222 139.662222h558.535112a139.662222 139.662222 0 0 0 139.662222-139.662222V232.732444a139.662222 139.662222 0 0 0-139.662222-139.662222H232.732444z"></path><path d="M549.575111 245.845333c0-25.799111 20.935111-46.734222 46.734222-46.734222h116.821334A140.202667 140.202667 0 0 1 853.333333 339.313778v116.821333a46.734222 46.734222 0 0 1-93.468444 0v-116.821333c0-25.827556-20.906667-46.734222-46.734222-46.734222h-116.821334a46.734222 46.734222 0 0 1-46.734222-46.734223zM245.845333 549.546667c25.799111 0 46.734222 20.935111 46.734223 46.734222v116.821333c0 25.827556 20.906667 46.734222 46.734222 46.734222h116.821333a46.734222 46.734222 0 0 1 0 93.468445h-116.821333A140.202667 140.202667 0 0 1 199.111111 713.130667v-116.821334c0-25.799111 20.935111-46.734222 46.734222-46.734222z"></path></svg>','<svg viewBox="-113 -113 1250 1250"><path d="M0.739556 233.130667a232.391111 232.391111 0 0 1 232.391111-232.391111h557.738666a232.391111 232.391111 0 0 1 232.391111 232.391111v557.738666a232.391111 232.391111 0 0 1-232.391111 232.391111H233.130667a232.391111 232.391111 0 0 1-232.391111-232.391111V233.130667z m232.391111-139.434667a139.434667 139.434667 0 0 0-139.434667 139.434667v557.738666a139.434667 139.434667 0 0 0 139.434667 139.434667h557.738666a139.434667 139.434667 0 0 0 139.434667-139.434667V233.130667a139.434667 139.434667 0 0 0-139.434667-139.434667H233.130667z"></path><path d="M601.088 186.652444c25.685333 0 46.506667 20.792889 46.506667 46.478223v96.796444c0 25.685333 20.792889 46.478222 46.478222 46.478222h96.796444a46.478222 46.478222 0 1 1 0 92.984889h-96.796444a139.434667 139.434667 0 0 1-139.463111-139.463111V233.130667c0-25.685333 20.821333-46.478222 46.478222-46.478223z m-414.435556 414.435556c0-25.656889 20.792889-46.478222 46.478223-46.478222h96.796444a139.434667 139.434667 0 0 1 139.463111 139.463111v96.796444a46.478222 46.478222 0 0 1-92.984889 0v-96.796444c0-25.685333-20.792889-46.478222-46.478222-46.478222H233.130667a46.478222 46.478222 0 0 1-46.478223-46.506667z"></path></svg>'],pip:['<svg viewBox="0 0 1024 1024"><path d="M768 213.333333H256a85.333333 85.333333 0 0 0-85.333333 85.333334v426.666666a85.333333 85.333333 0 0 0 85.333333 85.333334h170.666667a42.666667 42.666667 0 1 1 0 85.333333H256a170.666667 170.666667 0 0 1-170.666667-170.666667V298.666667a170.666667 170.666667 0 0 1 170.666667-170.666667h512a170.666667 170.666667 0 0 1 170.666667 170.666667v128a42.666667 42.666667 0 1 1-85.333334 0V298.666667a85.333333 85.333333 0 0 0-85.333333-85.333334z m-128 341.333334a128 128 0 0 0-128 128v85.333333a128 128 0 0 0 128 128h170.666667a128 128 0 0 0 128-128v-85.333333a128 128 0 0 0-128-128h-170.666667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="m768,213.33333l-512,0a85.33333,85.33333 0 0 0 -85.33333,85.33334l0,426.66666a85.33333,85.33333 0 0 0 85.33333,85.33334l170.66667,0a42.66667,42.66667 0 1 1 0,85.33333l-170.66667,0a170.66667,170.66667 0 0 1 -170.66667,-170.66667l0,-426.66666a170.66667,170.66667 0 0 1 170.66667,-170.66667l512,0a170.66667,170.66667 0 0 1 170.66667,170.66667l0,128a42.66667,42.66667 0 1 1 -85.33334,0l0,-128a85.33333,85.33333 0 0 0 -85.33333,-85.33334zm-128,341.33334a128,128 0 0 0 -128,128l0,85.33333a128,128 0 0 0 128,128l170.66667,0a128,128 0 0 0 128,-128l0,-85.33333a128,128 0 0 0 -128,-128l-170.66667,0z"></path><g stroke="null"><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><rect stroke="null" x="15122.523407" y="14826.656681" width="582" height="402" fill="none"></rect></g><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><path stroke="null" d="m15503.523407,14924.856681l-161.8,0c-66.2,0 -120,53.8 -120,120l0,161.8c0,22.1 17.9,40 40,40s40,-17.9 40,-40l0,-144.4l169.8,169.8c7.8,7.8 18,11.7 28.3,11.7c10.2,0 20.5,-3.9 28.3,-11.7c15.6,-15.6 15.6,-40.9 0,-56.6l-170.7,-170.6l146.1,0c22.1,0 40,-17.9 40,-40s-17.9,-40 -40,-40z"></path></g></g></svg>'],setting:'<svg viewBox="0 0 1024 1024" style="scale:1.1"><path d="M0 0h1024v1024H0z" fill-opacity="0"></path><path d="M501.333333 127.573333a21.333333 21.333333 0 0 1 21.333334 0l316.928 182.954667a21.333333 21.333333 0 0 1 10.666666 18.474667v365.994666a21.333333 21.333333 0 0 1-10.666666 18.474667L522.666667 896.426667a21.333333 21.333333 0 0 1-21.333334 0l-316.928-182.954667a21.333333 21.333333 0 0 1-10.666666-18.474667V328.96a21.333333 21.333333 0 0 1 10.666666-18.474667zM512 219.946667L259.029333 365.952v292.053333L512 804.010667l252.928-146.005334V365.952L512 219.946667zM512 426.666667a85.333333 85.333333 0 1 1 0 170.666666 85.333333 85.333333 0 0 1 0-170.666666z"></path></svg>',screenshot:'<svg viewBox="0 0 1024 1024"><path d="M412.245333 757.333333a42.666667 42.666667 0 0 1-56.490666-64l356.48-314.794666a42.666667 42.666667 0 0 1 56.746666 0.256l112.896 101.461333a42.666667 42.666667 0 1 1-57.088 63.488L740.266667 467.626667l-328.021334 289.706666zM810.666667 213.333333h-128a42.666667 42.666667 0 0 1 0-85.333333h170.666666a42.666667 42.666667 0 0 1 42.666667 42.666667v170.666666a42.666667 42.666667 0 0 1-85.333333 0V213.333333zM213.333333 213.333333v128a42.666667 42.666667 0 1 1-85.333333 0V170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667h170.666666a42.666667 42.666667 0 1 1 0 85.333333H213.333333z m597.333334 597.333334v-128a42.666667 42.666667 0 0 1 85.333333 0v170.666666a42.666667 42.666667 0 0 1-42.666667 42.666667h-170.666666a42.666667 42.666667 0 0 1 0-85.333333h128zM213.333333 810.666667h128a42.666667 42.666667 0 0 1 0 85.333333H170.666667a42.666667 42.666667 0 0 1-42.666667-42.666667v-170.666666a42.666667 42.666667 0 0 1 85.333333 0v128z m170.666667-298.666667a128 128 0 1 1 0-256 128 128 0 0 1 0 256z m0-85.333333a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z"></path></svg>',playbackRate:'<svg viewBox="0 0 1024 1024"><path d="M512 951.04a435.2 435.2 0 1 1 435.2-435.2 435.2 435.2 0 0 1-435.2 435.2z m0-819.2a384 384 0 1 0 384 384A384 384 0 0 0 512 132.096z" p-id="4314" fill="#ffffff"></path><path d="M468.992 493.824l-130.048-75.008a20.992 20.992 0 0 0-31.232 18.176v150.016a20.992 20.992 0 0 0 31.232 18.176l130.048-75.008a20.992 20.992 0 0 0 0-36.352zM684.8 493.824l-129.536-75.008a21.248 21.248 0 0 0-31.744 18.432v149.504a21.248 21.248 0 0 0 31.744 18.432l129.536-75.008a20.992 20.992 0 0 0 0-36.352z"></path></svg>',subtitle:'<svg viewBox="0 0 1024 1024"><path d="M640 970.666667H384c-231.765333 0-330.666667-98.901333-330.666667-330.666667V384c0-231.765333 98.901333-330.666667 330.666667-330.666667h256c231.765333 0 330.666667 98.901333 330.666667 330.666667v256c0 231.765333-98.901333 330.666667-330.666667 330.666667z m-256-853.333334C187.136 117.333333 117.333333 187.136 117.333333 384v256c0 196.864 69.802667 266.666667 266.666667 266.666667h256c196.864 0 266.666667-69.802667 266.666667-266.666667V384c0-196.864-69.76-266.666667-266.666667-266.666667z" fill="#ffffff" p-id="9126"></path><path d="M667.733333 760.746667a32.213333 32.213333 0 0 1-32-32 32.213333 32.213333 0 0 1 32-32h78.933334a32.213333 32.213333 0 0 1 32 32 32.213333 32.213333 0 0 1-32 32zM277.333333 760.746667a32.213333 32.213333 0 0 1-32-32 32.213333 32.213333 0 0 1 32-32h276.053334a32 32 0 0 1 0 64zM510.762667 600.32a32.213333 32.213333 0 0 1-32-32 32.213333 32.213333 0 0 1 32-32h235.946666a32.213333 32.213333 0 0 1 32 32 32.213333 32.213333 0 0 1-32 32zM277.333333 600.32a32.213333 32.213333 0 0 1-32-32 32.213333 32.213333 0 0 1 32-32h118.186667a32.213333 32.213333 0 0 1 32 32 32.213333 32.213333 0 0 1-32 32z"></path></svg>',loop:'<svg style="transform: scale(.8);" viewBox="0 0 1024 1024"><path d="M677.944889 589.909333c25.713778-16.952889 41.301333-46.478222 41.301333-78.222222 0-31.772444-15.587556-61.297778-41.301333-78.222222L440.32 276.906667c-58.88-38.741333-135.566222 5.518222-135.566222 78.279111V668.16c0 72.789333 76.686222 116.992 135.566222 78.222222l237.596444-156.472889h0.028445z m-47.132445-78.222222l-237.624888 156.472889V355.128889l237.624888 156.501333v0.028445z" p-id="2498" fill="#ffffff"></path><path d="M486.968889 104.106667c-128-0.227556-248.974222 57.457778-328.078222 156.444444h54.072889c16.469333 0 31.658667 8.647111 39.879111 22.641778 8.248889 14.023111 8.248889 31.288889 0 45.283555-8.248889 14.023111-23.409778 22.641778-39.879111 22.641778H74.865778c-25.400889 0-46.023111-20.252444-46.023111-45.283555v-164.693334c0-25.031111 20.622222-45.283556 46.023111-45.283555 25.429333 0 46.051556 20.252444 46.051555 45.283555v24.746667C216.832 68.266667 348.984889 13.255111 486.968889 13.482667 767.658667 13.511111 995.555556 236.316444 995.555556 511.715556c0 275.342222-227.868444 498.147556-508.586667 498.147555-190.862222 0.199111-365.738667-104.675556-453.006222-271.644444a44.657778 44.657778 0 0 1 1.678222-45.767111 46.250667 46.250667 0 0 1 41.415111-20.906667 46.08 46.08 0 0 1 38.798222 25.315555c71.509333 136.760889 214.812444 222.634667 371.114667 222.435556 230.257778 0 416.512-182.698667 416.512-407.608889 0-224.881778-186.254222-407.580444-416.512-407.580444z"></path></svg>',progressIndicator:null,loadingIndicator:null,quality:'<svg viewBox="0 0 1024 1024"><path d="M810.666667 170.666667H213.333333c-47.146667 0-85.333333 38.186667-85.333333 85.333333v512c0 47.146667 38.186667 85.333333 85.333333 85.333333h597.333334c47.146667 0 85.333333-38.186667 85.333333-85.333333V256c0-47.146667-38.186667-85.333333-85.333333-85.333333zM469.333333 640h-64v-85.333333h-85.333333v85.333333h-64V384h64v106.666667h85.333333v-106.666667h64v256z m298.666667-42.666667a42.666667 42.666667 0 0 1-42.666667 42.666667h-32v64h-64v-64H597.333333a42.666667 42.666667 0 0 1-42.666666-42.666667v-170.666666a42.666667 42.666667 0 0 1 42.666666-42.666667h128a42.666667 42.666667 0 0 1 42.666667 42.666667v170.666666z m-149.333333-21.333333h85.333333v-128h-85.333333v128z"></path></svg>',lang:'<svg viewBox="0 0 1024 1024"><path d="M512 85.333333C277.333333 85.333333 85.333333 277.333333 85.333333 512s192 426.666667 426.666667 426.666667 426.666667-192 426.666667-426.666667S746.666667 85.333333 512 85.333333z m294.4 256H682.666667c-12.8-55.466667-34.133333-102.4-59.733334-153.6 76.8 29.866667 145.066667 81.066667 183.466667 153.6zM512 170.666667c34.133333 51.2 64 106.666667 81.066667 170.666666h-162.133334c17.066667-59.733333 46.933333-119.466667 81.066667-170.666666zM183.466667 597.333333c-8.533333-25.6-12.8-55.466667-12.8-85.333333s4.266667-59.733333 12.8-85.333333h145.066666c-4.266667 29.866667-4.266667 55.466667-4.266666 85.333333s4.266667 55.466667 4.266666 85.333333H183.466667z m34.133333 85.333334H341.333333c12.8 55.466667 34.133333 102.4 59.733334 153.6-76.8-29.866667-145.066667-81.066667-183.466667-153.6zM341.333333 341.333333H217.6c42.666667-72.533333 106.666667-123.733333 183.466667-153.6C375.466667 238.933333 354.133333 285.866667 341.333333 341.333333z m170.666667 512c-34.133333-51.2-64-106.666667-81.066667-170.666666h162.133334c-17.066667 59.733333-46.933333 119.466667-81.066667 170.666666z m98.133333-256H413.866667c-4.266667-29.866667-8.533333-55.466667-8.533334-85.333333s4.266667-55.466667 8.533334-85.333333h200.533333c4.266667 29.866667 8.533333 55.466667 8.533333 85.333333s-8.533333 55.466667-12.8 85.333333z m12.8 238.933334c25.6-46.933333 46.933333-98.133333 59.733334-153.6h123.733333c-38.4 72.533333-106.666667 123.733333-183.466667 153.6z m76.8-238.933334c4.266667-29.866667 4.266667-55.466667 4.266667-85.333333s-4.266667-55.466667-4.266667-85.333333h145.066667c8.533333 25.6 12.8 55.466667 12.8 85.333333s-4.266667 59.733333-12.8 85.333333h-145.066667z"></path></svg>'};var D;(e=>{e.setupIcons=(n,t)=>{for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(Me[o]=t[o]);return Me},e.get=n=>Me[n]})(D||(D={}));const je=(e,n)=>{function t(o){let r=o.target;r&&(e.$root.contains(r)||e.$root==r)?e.$root.classList.add(Y):e.$root.classList.remove(Y)}n&&e.$root.classList.add(Y),document.addEventListener("click",t),document.addEventListener("contextmenu",t),e.on("destroy",()=>{document.removeEventListener("click",t),document.removeEventListener("contextmenu",t)})},qe=e=>e.$root.classList.contains(Y),Ge=e=>{e.on("play",()=>{e.$root.classList.add(W)}),e.on(["pause","videosourcechange"],()=>{e.$root.classList.remove(W)})},Je=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const t=()=>e.$root.classList.add(G),o=()=>{e.isSourceChanging||e.$root.classList.remove(G)};e.$video.preload!="none"&&t(),e.on("loadstart",()=>{e.$video.preload=="none"&&o()}),e.on(["videoqualitychange","videosourcechange"],t),i.tq&&n?et(e,t,o):(e.on(["waiting","seeking"],t),e.on([Ve,"pause","seeked","error"],o))},et=(e,n,t)=>{let o=0,r=0,f=!1,h=!1;e.on("seeking",()=>{e.isPlaying||(n(),e.on("seeked",t,{once:!0}))}),e.on("play",()=>h=!0),e.on(["pause","error"],()=>(h=!1,t())),e.on(Ve,t),e.on(["videosourcechange","videoqualitychange"],()=>{h=!1,o=r=0});const d=setInterval(()=>{h&&(r=e.currentTime,!f&&r===o&&e.isPlaying&&(n(),f=!0),f&&r>o&&e.isPlaying&&(t(),f=!1),o=r)},100);e.on("destroy",()=>{clearInterval(d)})},xt=e=>e.$root.classList.contains(G),yt=(e,n)=>{e.on("fullscreenchange",()=>{n.classList.toggle(ve)})},wt=(e,n,t)=>{Ge(e),Je(e),yt(e,t),i.tq||je(e,n.autoFocus)},Ve=i.gn?"loadedmetadata":"canplay";function tt(e,n,t){return Math.min(Math.max(e,n),t)}function He(e){return e<10?"0"+e:""+e}function ie(e){if(!isFinite(e))return"--:--";const n=Math.floor(e/3600),t=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return(n>0?He(n)+":":"")+He(t)+":"+He(o)}function kt(e,n){const t=document.createElement("a");t.href=e,t.download=n,t.click()}const Et=e=>{var n;try{const t=document.createElement("canvas"),o=e.videoWidth,r=e.videoHeight;return t.width=o,t.height=r,(n=t.getContext("2d"))==null||n.drawImage(e,0,0,o,r),t.toDataURL("image/png")}catch(t){return t}},nt=e=>{if(xt(e)||isNaN(e.duration)){e.emit("notice",{text:e.locales.get("Please wait for loading to complete")});return}const n=Et(e.$video);if(n instanceof Error)e.emit("notice",{text:n.message});else{const t=e.options.source.title||"OPlayer-ScreenShot";kt(n,t+"-"+ie(e.currentTime).replace(/:/g,"-")+".png")}},st=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1500,t=null;const o=()=>t&&clearTimeout(t);return{callee:()=>{o(),t=setTimeout(()=>{e()},n)},clear:o}},St=(e,n)=>{var t=[],o=e.parentNode.children;for(let r=0,f=o.length;r<f;r++)o[r]!==e&&(n==null||n(o[r]),t.push(o[r]));return t};function Fe(e,n){return e.classList.add(n),e}function Ee(e,n){return e.classList.remove(n),e}function Lt(e,n){return e.classList.toggle(n)}function le(e,n){return e.classList.contains(n)}const fe={dragStart:i.tq?"touchstart":"mousedown",dragMove:i.tq?"touchmove":"mousemove",dragEnd:i.tq?"touchend":"mouseup"},ot=10,Ne=5,Se={ArrowUp:e=>{const n=e.volume*100+ot;e.setVolume(n/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(e.volume*100)+"%")})},ArrowDown:e=>{const n=e.volume*100-ot;e.setVolume(n/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(e.volume*100)+"%")})},ArrowLeft:e=>{if(e.options.isLive||e.hasError)return;e.currentTime-Ne<0?e.seek(0):e.seek(e.currentTime-Ne),e.emit("notice",{text:ie(e.currentTime)+" / "+ie(e.duration)})},ArrowRight:e=>{e.options.isLive||e.hasError||(e.seek(e.currentTime+Ne),e.emit("notice",{text:ie(e.currentTime)+" / "+ie(e.duration)}))}," ":e=>e.togglePlay(),Escape:e=>{if(e.isFullScreen){e.exitFullscreen();return}e.$root.classList.contains(Q)&&e.emit("fullscreenchange",{isWeb:!0})},f:e=>e.toggleFullScreen(),s:nt};function _t(e,n){let t;function o(h){var d,m,g,x;if(((d=document.activeElement)==null?void 0:d.tagName)=="INPUT"||(m=document.activeElement)!=null&&m.getAttribute("contenteditable")||!((g=n.keyboard)!=null&&g.global)&&!((x=n.keyboard)!=null&&x.focused)||n.keyboard.focused&&!qe(e))return;const E=h.key;Se[E]&&(h.preventDefault(),Se[E](e)),t&&t===E&&Se[t+"+"+E]&&(h.preventDefault(),Se[t+"+"+E](e)),t=E,setTimeout(()=>{t=void 0},200)}function r(h){for(const d in h)Object.prototype.hasOwnProperty.call(h,d)&&(Se[d]=h[d])}function f(h){h.forEach(d=>{delete Se[d]})}return document.addEventListener("keydown",o),e.on("destroy",()=>{document.removeEventListener("keydown",o)}),{register:r,unRegister:f}}const Ue="speed";function Re(e,n,t){n!=null&&n.length&&(t.register({key:Ue,type:"selector",name:e.locales.get("Speed"),icon:D.get("playbackRate"),children:n.map(o=>({name:+o==1?e.locales.get("Normal"):o+"x",value:+o,default:e.playbackRate==+o})),onChange:o=>{let r=o.value;return e.setPlaybackRate(r)}}),e.on("ratechange",()=>{const o=e.playbackRate,r=n.findIndex(f=>+f==o);t.select(Ue,r),r==-1&&t.updateLabel(Ue,o+"x")}))}const it=60;function Le(e,n,t){i.tq&&!e.options.isLive&&t.slideToSeek&&t.slideToSeek!="none"&&e.on(Ve,()=>{let o=0,r=0,f=0,h=0,d;const m=e.$root.getBoundingClientRect();t.slideToSeek=="always"&&(n.addEventListener("touchstart",E=>{if(le(e.$root,te))return;const L=E.changedTouches[0],_=L.clientX,O=L.clientY;o=_,r=O}),n.addEventListener("touchmove",g),n.addEventListener("touchend",x)),t.slideToSeek=="long-touch"&&n.addEventListener("touchstart",E=>{if(le(e.$root,te))return;const L=E.changedTouches[0],_=L.clientX,O=L.clientY;o=_,r=O,d=window.setInterval(()=>{f+=100,f>=1e3&&(clearInterval(d),e.emit("notice",{text:"slid left or right to seek",pos:"top"}),n.addEventListener("touchmove",g))},100),n.addEventListener("touchend",x,{once:!0})});function g(E){if(o==0&&r==0)return;E.preventDefault();const L=E.changedTouches[0],_=L.clientX,O=L.clientY,y=_-o,T=r-O;if(Math.abs(y)<2&&Math.abs(T)<2)return;const S=rt(y,T);(S>=-45&&S<45||S>=135&&S<=180||S>=-180&&S<-135)&&(h=it*y/m.width,e.emit("notice",{text:ie(tt(e.currentTime+h,0,e.duration))+" / "+ie(e.duration),pos:"top"}))}function x(){o==0&&r==0||(t.slideToSeek=="long-touch"&&f<1e3&&(d&&clearInterval(d),n.removeEventListener("touchmove",g)),Math.abs(h)>=1&&e.seek(tt(e.currentTime+h,0,e.duration)),o=r=h=f=0)}},{once:!0})}function rt(e,n){return Math.atan2(n,e)*180/Math.PI}function Pe(e,n){n.forceLandscapeOnFullscreen&&!i.gn&&i.tq&&e.on("fullscreenchange",t=>{var o,r;t.payload.isWeb||(e.isFullScreen?(o=screen.orientation)==null||o.lock("landscape"):(r=screen.orientation)==null||r.unlock())})}const c=i.$.css($e||($e=N([`
  width: 2.65em;
  display: flex;
  height: 7.65em;
  box-sizing: border-box;
  flex-direction: column;
`]))),s=i.$.css(`
  width: 100%;
  text-align: center;
  height: 28px;
  line-height: 28px;
  margin-bottom: 2px;
  font-size: 0.75em;
`),a=i.$.css(`
  position: relative;
  display: flex;
  justify-content: center;
  flex: 1;
  cursor: pointer;
  padding: 5px 0 14px;
`),u=i.$.css(`
  height: 100%;
  width: 4px;
  position: relative;
`),l=i.$.css(`
  width: 4px;
  height: 100%;
  overflow: hidden;
  border-radius: 2px;
  background: rgba(255, 255, 255, 0.3);
`),p=i.$.css(`
  height: 100%;
  background-color: var(--primary-color);
  transform-origin: 0 100%;
`),$=i.$.css(_e||(_e=N([`
  position:absolute;
  bottom: 0;
  top: auto;
  left: -4px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background-color: var(--primary-color);
  vertical-align: middle;
  pointer-events: none;
  `]))),M=(e,n)=>{const t=i.$.create("div."+c,{},"<div class="+s+`>100</div>

    <div class=`+a+`>
        <div class=`+u+`>
          <div class=`+l+`>
            <div class=`+p+`></div>
          </div>

          <div class=`+$+`></div>
        <div>
      </div>`),o=t.querySelector("."+a),r=t.querySelector("."+$),f=t.querySelector("."+p),h=t.querySelector("."+s),d=x=>{const E=o.getBoundingClientRect(),L=(E.bottom-(x.clientY||x.changedTouches[0].clientY))/E.height;return L>=1?1:L<=0?0:L},m=x=>{x.preventDefault(),e.setVolume(g(d(x)))},g=x=>(h.innerText=""+~~(x*100),f.style.transform="scaleY("+x+")",r.style.bottom="calc("+~~(x*100)+"% - 6px)",x);g(e.volume),e.on("volumechange",()=>{g(e.isMuted?0:e.volume)}),o.addEventListener(fe.dragStart,x=>{m(x),document.addEventListener(fe.dragMove,m,{passive:!1}),document.addEventListener(fe.dragEnd,()=>{document.removeEventListener(fe.dragMove,m)},{once:!0})}),i.$.render(t,n)},A=i.$.css(`
  display: none;
  bottom: 15px;
  position: absolute;
  left: 50%;
  padding: 5px 8px;
  background-color: var(--shadow-background-color);
  color: #fff;
  border-radius: 4px;
  white-space: nowrap;
  word-break: nowrap;
  transform: translateX(-50%);`),Z=i.$.css({position:"absolute",width:"8px",height:"4px","border-radius":"1px","background-color":"var(--highlight-color)",transform:"translateX(-3px)",transition:"all 0.2s",["&:hover > ."+A]:{display:"block"}});function ne(e,n,t){let o=[],r=!0;e.$root.style.setProperty("--highlight-color",(t==null?void 0:t.color)||"#FFF");function f(g){const x=i.$.create("div."+Z,{},'<span class="'+A+'">'+g.text+"</san>");return x.style.left=g.left+"%",x}function h(g,x){o.forEach(E=>E.remove());for(let E=0;E<g.length;E++){const L=g[E],_=f({left:L.time/x*100,text:L.text});o.push(_),i.$.render(_,n)}}function d(g){r=!0,m(g)}function m(g){e.duration!==1/0&&e.duration>0?h(g,e.duration):e.on("loadedmetadata",function(){e.duration!==1/0&&e.duration>0&&r&&h(g,e.duration)})}return t!=null&&t.source&&m(t.source),e.on("videosourcechange",()=>{r=!1,o.forEach(g=>g.remove())}),d}const R=()=>{},U=i.$.css(`
  position: absolute;
  left: 0;
  bottom: 12px;
  pointer-events: none;
  transform: translateX(-50%);
  background-position-y: center;
  border-radius: 3px;
  display: none;`),j={width:160,height:90};function J(e,n,t){if(!t)return{update:R,hide:R,init:R};let o=!1,r=Object.assign(j,t);const f=i.$.render(i.$.create("div."+U),n);function h(){o||(o=!0,f.style.width=r.width+"px",f.style.height=r.height+"px",f.style.backgroundImage="url("+r.src+")")}function d(m){o=!1,r=Object.assign(j,m)}return e.on("videosourcechange",()=>{o=!1,f.style.backgroundImage="none"}),{init:h,update:m=>{if(!o)return;const g=[r.width/2,n.clientWidth],x=g[0],E=g[1],L=x/E,_=(E-x)/E;f.style.left=(m<L?L:m>_?_:m)*100+"%";const O=~~(m*100)*r.number;f.style.backgroundPositionX=-O+"%"},change:d}}const V=()=>{},Tt=i.$.css(`
  position: absolute;
  left: 0;
  bottom: 12px;
  pointer-events: none;
  border-radius: 3px;
  display: none;`);function tn(e,n,t){if(!t)return{update:V,hide:V,init:V};let o=[],r={},f,h=!1,d=t.src;const m=i.$.render(i.$.create("div."+Tt),n);m.style.width=((t==null?void 0:t.width)||160)+"px",m.style.height=((t==null?void 0:t.height)||90)+"px";const g=b=>{fetch(b).then(v=>v.text()).then(v=>{o=x(v),h=!0,m.style.opacity="1"})};t.src&&g(t.src),e.on("videosourcechange",()=>{h=!1,m.style.opacity="0",o=[],r={}});const x=b=>{const v=[];return b.split(/[\r\n][\r\n]/i).forEach(C=>{if(C.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?[\r\n]{1}.*/gi)){const F=C.split(/[\r\n]/i),ue=isFinite(+F[0])?F[1]:F[0],me=isFinite(+F[0])?F[2]:F[1],X=ue.split(/ ?--> ?/i),pe=X[0],ee=X[1],de=_(me);v.push({start:E(pe),end:E(ee),css:de})}return v}),v},E=b=>{const v=L(b);return v.hours*(60*60)+v.minutes*60+v.seconds+v.milliseconds/1e3},L=b=>{const v=b.split("."),C=v[0].split(":");return{milliseconds:parseInt(v[1],10)||0,seconds:parseInt(C.pop(),10)||0,minutes:parseInt(C.pop(),10)||0,hours:parseInt(C.pop(),10)||0}},_=b=>{const v={};if(!b.match(/#xywh=/i))return v.background='url("'+O(b)+'")',v;const k=y(b);return v.background='url("'+O(k.image)+'") no-repeat -'+k.x+"px -"+k.y+"px",v.width=k.w+"px",v.height=k.h+"px",v.url=O(k.image),v},O=(()=>{const b={};return v=>{if(b[v])return b[v];if(/(https?:)?\/\//.test(v))return v;let k=d;/(https?:)?\/\//.test(v)&&(k=d.substring(0,d.indexOf("?")||void 0));const C=k.lastIndexOf("/");if(k.startsWith("https://")&&C<8||k.startsWith("http://")&&C<7)return d+v;const F=k.substring(C+1);return b[v]=d.replace(F,v),b[v]}})(),y=b=>{const v=b.split(/#xywh=/i),k=v[0],F=v[1].match(/[0-9]+/gi);return{x:F[0],y:F[1],w:F[2],h:F[3],image:k}},T=b=>{if(!h)return;const v=e.duration,k=b*v,C=S(k);if(!C){m.style.opacity="0";return}const F=n.clientWidth,ue=b*F,me=parseInt(C.width,10),X=me>>1,pe=F-(ue+X),ee=ue-X;if(m.style.opacity="1",ee>0&&pe>0?m.style.transform="translateX("+(ue-X)+"px)":ee<=0?m.style.transform="translateX("+0+"px)":pe<=0&&(m.style.transform="translateX("+(F-me)+"px)"),!(f&&f===C)){f=C;for(const de in C)C.hasOwnProperty(de)&&(m.style[de]=C[de])}},S=b=>{for(let v=0;v<o.length;++v){const k=o[v];if(b>=k.start&&b<k.end){if(k.css.url&&!r[k.css.url]){const C=new Image;C.src=k.css.url,r[k.css.url]=C}return k.css}}};return{init:()=>{},update:T,change:g}}const at=i.$.css({"background-color":"hsla(0, 0%, 100%, 0.4)"}),ct=i.$.css({"background-color":"var(--primary-color)"}),Be=i.$.css({width:"100%","pointer-events":"none",position:"relative","z-index":1,"& > *":{content:"''",display:"block",position:"absolute",width:"1.4em",height:"1.4em",top:"calc(-0.7em + 2px)",left:"-0.7em",bottom:"0",transform:i.tq?"none":"scale(0)",transition:"transform 0.3s ease","z-index":"1"},"& > *:not(svg)":{width:"1em",height:"1em",top:"calc(-0.5em + 2px)",left:"-0.5em","border-radius":"50%","background-color":"#fff"}}),lt=i.$.css({position:"absolute",left:"0","border-radius":"4px",padding:"5px 8px","background-color":"var(--shadow-background-color)",color:"#fff","word-wrap":"nowrap","word-break":"nowrap","z-index":"2","pointer-events":"none",transform:"translateX(-50%)",display:"none","white-space":"pre",bottom:"15px"}),be=i.$.css("/* progressDragging */"),nn=i.$.css(Object.assign({position:"relative","box-sizing":"border-box",padding:"6px 0px 4px",cursor:"pointer",width:"100%","font-size":"0.75em",["&."+be+" ."+lt+", &."+be+" ."+U+", &."+be+" ."+Tt]:{display:"block"}},i.tq?{["@global ."+K+" ."+Be+" > *"]:{transform:"scale(0)"}}:{["&."+be+" ."+Be+" > *, &:hover ."+Be+" > *"]:{transform:"scale(1)"}})),sn=i.$.css({position:"relative",height:"4px",width:"100%","background-color":"hsla(0, 0%, 100%, 0.2)","border-radius":"2px",["& ."+at+", & ."+ct]:{position:"absolute",left:"0",top:"0",bottom:"0","will-change":"width","pointer-events":"none","border-radius":"2px"}}),on=(e,n,t)=>{var o;if(e.options.isLive)return{};const r=i.$.create("div."+nn,{},"<div class="+sn+`>
      <div class="`+lt+`">00:00</div>
      <div class="`+at+`" style="width:0%"></div>
      <div class="`+ct+`" style="width:0%"></div>
      <div class="`+Be+`" style="transform: translateX(0%);">
        `+(D.get("progressIndicator")||"<span />")+`
      </div>
  </div>`),f=r.firstElementChild,h=(o=t.thumbnails)!=null&&o.isVTT?tn(e,f,t.thumbnails):J(e,f,t.thumbnails),d=h.init,m=h.update,g=h.change,x=ne(e,f,t.highlight),E=r.querySelector("."+at),L=r.querySelector("."+ct),_=r.querySelector("."+Be),O=r.querySelector("."+lt);let y=!1;const T=b=>{const v=r.getBoundingClientRect(),k=((b.clientX||b.changedTouches[0].clientX)-v.left)/v.width;return k>=1?1:k<=0?0:k},S=b=>{const v=T(b),k=v*100;return L.style.width=k+"%",_.style.transform="translateX("+k+"%)",O.innerText=ie(e.duration*v),O.style.left=k+"%",v};return r.addEventListener(fe.dragStart,b=>{y=!0,r.classList.add(be),d(),m(S(b));function v(k){k.preventDefault(),m(S(k))}document.addEventListener(fe.dragMove,v,{passive:!1}),document.addEventListener(fe.dragEnd,k=>{r.classList.remove(be),y=!1,document.removeEventListener(fe.dragMove,v),e.seek(T(k)*e.duration)},{once:!0})}),i.tq||(r.addEventListener("mouseenter",()=>{y||d()}),r.addEventListener("mousemove",b=>{if(y)return;r.classList.add(be),b.target.classList.contains(Z)?O.style.display="none":O.removeAttribute("style");const v=T(b);O.innerText=ie(e.duration*v),O.style.left=v*100+"%",m(v)},{passive:!1}),r.addEventListener("mouseleave",()=>{y||r.classList.remove(be)})),e.on(["timeupdate","seeking"],()=>{if(y)return;const b=e.currentTime,v=e.duration,k=b/v*100||0;L.style.width=k+"%",_.style.transform="translateX("+k+"%)"}),e.on("progress",()=>{const b=e.buffered.length?e.buffered.end(e.buffered.length-1)/e.duration*100:0;E.style.width=b+"%"}),e.on("videosourcechange",()=>{E.style.width="0%",L.style.width="0%",_.style.transform="translateX(0%)"}),i.$.render(r,n),{highlight:x,thumbnails:g}},Pt=i.$.css(I||(I=N([`
  font-variant-numeric: tabular-nums;
  font-size: 0.875em;
  margin-top: 2px;
`]))),rn=i.$.css("width:0.5em;height:0.5em;background-color:var(--primary-color);border-radius:50%;margin-right:0.5em"),Ie=i.$.css(`
    position: absolute;
    top: 0;
    right: 50%;
    border-radius: 2px;
    box-sizing: border-box;
    transform: translate(50%, -100%);
    transition: visibility 0s, opacity 0.1s linear;
    font-size: 0.875em;
`),an=i.$.css(`
    top: 100%;
    right: 50%;
    transform: translateX(50%);
`),Ot=i.$.css({position:"relative",display:"flex",["& ."+Ie]:{visibility:"hidden",opacity:0,"background-color":"var(--shadow-background-color)"}}),At=i.$.css({["&:hover"]:{"padding-top":"0.5em","margin-top":"-0.5em",["& ."+Ie]:{visibility:"visible",opacity:1}},["&[data-dropdown-pos=top]:hover"]:{"padding-bottom":"0.5em","margin-bottom":"-0.5em"}}),cn=i.$.css({padding:"0 0.5em","min-width":"6em",display:"block",height:"2.4em","line-height":"2.4em",cursor:"pointer","text-align":"center","word-break":"keep-all","&:nth-last-child(1)":{"margin-bottom":"0px"},"& *":{"pointer-events":"none"},"&[aria-checked=true]":{color:"var(--primary-color)"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"}}),Ct=i.$.cls("textIcon"),De=i.$.css({color:"#fff",fill:"#fff",height:"2.5em",display:"flex","box-sizing":"border-box","justify-content":"space-between","align-items":"center","padding-bottom":i.tq?0:"4px",margin:"0 -6px",["& ."+P+"."+Ct]:{width:"auto","min-width":"2em","font-size":"0.875em"},["& ."+P]:{padding:"0 0.5em",width:"1.25em",height:"1.5em","line-height":"1.5em","box-sizing":"content-box","& > *":{height:"1.5em",width:"1.5em","pointer-events":"none",transition:"transform .2s ease-in-out"},"&:active > *":{transform:"scale(.85)"}},"> div":{display:"flex","align-items":"center",["&:nth-child(1) ."+P+" "]:{"padding-left":0}}}),ln=(e,n,t)=>{const o=on(e,n,t),r=[e.locales.get("Play"),e.locales.get("Pause"),e.locales.get("Screenshot"),e.locales.get("Picture in Picture"),e.locales.get(e.isFullscreenEnabled?"Fullscreen":"WebFullscreen")],f=r[0],h=r[1],d=r[2],m=r[3],g=r[4],x=i.$.create("div."+De,{},`<div>
      <button
        class="`+P+" "+(e.isPlaying?ae:ce)+" "+z+`"
        aria-label="`+f+`"
      >
        `+D.get("play")+`
        `+D.get("pause")+`
      </button>

      `+(e.options.isLive?'<span class="'+rn+'"></span>':"")+`

      <span class=`+Pt+">"+(e.options.isLive||e.$video.preload=="none"?"00:00":"00:00 / --:--")+`</span>
    </div>

    <!-- right -->
    <div>
      <div class="`+Ot+" "+At+`">
        <button class="`+P+" "+(e.isMuted?ae:ce)+`" aria-label="Volume">
            `+D.get("volume")[0]+`
            `+D.get("volume")[1]+`
        </button>
        `+(i.gn?"":"<div class="+Ie+"></div>")+`
      </div>

      `+(t.screenshot?'<button class="'+P+" "+z+'" aria-label="'+d+`">
              `+D.get("screenshot")+`
            </button>`:"")+`

      `+(t.pictureInPicture&&e.isPipEnabled?`<button
              class="`+P+" "+z+" "+(e.isInPip?ae:ce)+`"
              aria-label="`+m+`">
                `+D.get("pip")[0]+`
                `+D.get("pip")[1]+`
            </button>`:"")+`

      `+(t.fullscreen?'<button class="'+P+" "+ce+" "+z+'" data-tooltip-pos="up-right" aria-label="'+g+`">
                `+D.get("fullscreen")[0]+`
                `+D.get("fullscreen")[1]+`
              </button>`:"")+`
    </div>`),E=x.querySelector("button[aria-label=Volume]");i.gn||M(e,E.nextElementSibling);const L=x.querySelector("button[aria-label="+f+"]"),_=x.querySelector("."+Pt),O=x.querySelector('button[aria-label="'+g+'"]'),y=x.querySelector('button[aria-label="'+m+'"]'),T=(S,b)=>{S.classList.add(b?ae:ce),S.classList.remove(b?ce:ae)};return t.fullscreen&&e.on("fullscreenchange",S=>{let b=S.payload;return setTimeout(()=>{b.isWeb?T(O,Lt(e.$root,Q)):T(O,e.isFullScreen)})}),t.pictureInPicture&&e.on(["enterpictureinpicture","leavepictureinpicture"],()=>T(y,e.isInPip)),e.on(["play","pause","videosourcechange"],()=>{L.setAttribute("aria-label",e.isPlaying?h:f),T(L,e.isPlaying)}),e.on("volumechange",()=>T(E,e.isMuted)),e.on(["durationchange","timeupdate","seeking","seeked"],()=>{_.innerText=ie(e.currentTime)+" "+(e.options.isLive?"":"/ "+ie(e.duration))}),e.on("videosourcechange",()=>{_.innerText=e.options.isLive||e.$video.preload=="none"?"00:00":"00:00 / --:--"}),x.addEventListener("click",S=>{switch(S.target.getAttribute("aria-label")){case f:case h:return e.togglePlay();case"Volume":if(i.tq&&!i.gn)return;e.isMuted?e.unmute():e.mute();break;case m:return e.togglePip();case g:e.isFullscreenEnabled?e.toggleFullScreen():e.emit("fullscreenchange",{isWeb:!0});return;case d:nt(e);break}}),i.$.render(x,n),Object.assign({cls:{controllerBottom:De}},o)},ge=i.$.css("display: block;"),un=e=>i.$.css({"z-index":"98","max-height":"75%","border-radius":"3px",display:"block",position:"absolute",right:"1em",[e]:e=="top"?"var(--control-bar-height)":"2.5em",overflow:"auto","background-color":"var(--shadow-background-color)",fill:"#fff","&::-webkit-scrollbar":{width:"2px"},"&::-webkit-scrollbar-thumb":{background:"var(--primary-color)"},"& > div":{display:"none","font-size":"0.875em"},["& > div."+ge]:{display:"block"}}),dn=i.$.css("min-width: 15.5em;"),hn=i.$.css("min-width: 10.5em;"),zt=i.$.css(`
  display: none;
  width: 1.4em;
  height: 1.4em;
`),fn=i.$.css(`
  width: 2em;
  height: 2em;
  margin: 0 -10px 0 -5px;
`),gn=i.$.css(`
  width: 2em;
  height: 2em;
  transform: rotate(180deg);
  margin-left: -10px;
`),Mt=i.$.css({position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0","background-color":"#ccc",transition:".3s","border-radius":"34px","&:before":{position:"absolute",content:'""',height:"16px",width:"16px",left:"4px",bottom:"3px","background-color":"white",transition:".3s","border-radius":"50%"}}),mn=i.$.css(`
  position: relative;
  width: 40px;
  height: 22px;
`),pn=i.$.css(`
  white-space: nowrap;
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.8em;
`),vn=i.$.css({height:"2.4em",cursor:"pointer",color:"#fff","justify-content":"space-between","align-items":"center",padding:"0 0.75em","line-height":"1",display:"flex",overflow:"hidden","& > *":{"pointer-events":"none"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"},["&[aria-checked='true']"]:{["& ."+zt]:{display:"block"},["&[data-index]"]:{"background-color":"rgba(255, 255, 255, 0.1)"},["& ."+Mt]:{"background-color":"var(--primary-color)","&:before":{transform:"translateX(16px)"}}}}),ut=i.$.css({display:"flex","align-items":"center","margin-right":"10px","& > svg":{width:"1.7em",height:"1.7em","margin-right":"0.5em"}}),Ft=i.$.css(`
  display: flex;
  align-items: center;
`),bn=i.$.css({width:"100%",display:"flex","align-items":"center","border-bottom":"1px solid rgb(255 255 255 / 10%)"}),dt=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fn;return"<svg "+(e?'class="'+e+'"':"")+' viewBox="0 0 32 32"><path d="m 12.59,20.34 4.58,-4.59 -4.58,-4.59 1.41,-1.41 6,6 -6,6 z" fill="#fff"></path></svg>'},$n=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return'<div class="'+ut+`">
      `+n+`
      <span>`+e+`</span>
    </div>
    <svg class=`+zt+` viewBox="0 0 24 24">
      <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"></path>
    </svg>
`},xn=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return'<div class="'+ut+`">
      `+n+`
      <span>`+e+`</span>
    </div>
    <div class=`+Ft+`>
      <span role="label" class=`+pn+`></span>
      `+dt()+`
    </div>
`},yn=e=>'<div class="'+bn+`">
      `+dt(gn)+`
      <span>`+e+`</span>
    </div>
`,wn=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return'<div class="'+ut+`">
    `+n+`
    <span>`+e+`</span>
  </div>
  <div class=`+Ft+`>
    <label class=`+mn+`>
      <span class=`+Mt+`></span>
    </label>
  </div>
`};function Rt(e){let n=e.type,t=e.key,o=e.name,r=e.icon,f=e.default,h=e.index,d=i.$.create("div."+vn,{"data-key":t,role:Boolean(n)?"menuitem":"menuitemradio","aria-haspopup":n=="selector"});const m={$row:d,$label:void 0};switch(n){case"switcher":d.innerHTML=wn(o,r),d.setAttribute("aria-checked",f||!1);break;case"selector":d.innerHTML=xn(o,r),m.$label=d.querySelector('span[role="label"]');break;case"back":d.innerHTML=yn(o);break;default:d.innerHTML=$n(o,r),d.setAttribute("aria-checked",f||!1),typeof h=="number"&&d.setAttribute("data-index",h.toString());break}return m}function Bt(e,n,t){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!t||t.length==0)return;const r=o.key,f=o.target,h=o.parent,d=o.isSelectorOptionsPanel,m=o.name;let g={},x=r||"root";n[0]&&x=="root"?(g=n[0],x=n[0].key):(g.$ref=i.$.create("div."+(n[0]&&d?hn:dn),{"data-key":x,role:"menu"}),g.key=x,n.push(g)),g.parent=h;const E=g.key=="root";if(!E){const L=Rt({name:m,type:"back"}),_=L.$row;_.addEventListener("click",()=>{var O;g.$ref.classList.remove(ge),(O=g.parent)==null||O.$ref.classList.add(ge)}),i.$.render(_,g.$ref)}for(let L=0;L<t.length;L++){const _=t[L],O=_.name,y=_.type,T=_.key,S=_.children,b=_.icon,v=_.default,k=_.onChange,C=Rt(Object.assign({name:O,type:y,key:T,icon:b,default:v},!E&&d&&{index:L})),F=C.$row,ue=C.$label;if(i.$.render(F,g.$ref),i.$.render(g.$ref,f),S){const me=y=="selector"&&S.every(pe=>!Boolean(pe.type)),X=Bt(e,n,S,{key:T,target:f,parent:g,isSelectorOptionsPanel:me,name:y=="selector"?O:void 0});if(F.addEventListener("click",()=>{g.$ref.classList.remove(ge),X.$ref.classList.add(ge)}),me){const pe=S.find(ee=>ee.default);pe&&(ue.innerText=pe.name),X.select=(ee,de)=>{var Gt;if(ee==-1){(Gt=X.$ref.querySelector("[aria-checked=true]"))==null||Gt.setAttribute("aria-checked","false");return}const gt=X.$ref.querySelectorAll("[aria-checked]");if(gt.item(ee).getAttribute("aria-checked")!="true"){gt.forEach(Kn=>Kn.setAttribute("aria-checked","false")),gt.item(ee).setAttribute("aria-checked","true");const Jt=S[ee];ue.innerText=Jt.name,de&&(k==null||k(Jt,{index:ee}))}},X.$ref.addEventListener("click",ee=>{const de=ee.target;de.hasAttribute("data-index")&&(X.select(+de.getAttribute("data-index"),!0),g.$ref.classList.add(ge),X.$ref.classList.remove(ge))})}}else y=="switcher"&&(F.select=function(me){const X=this.getAttribute("aria-checked")=="true";this.setAttribute("aria-checked",""+!X),me&&(k==null||k(!X))},F.addEventListener("click",()=>F.select(!0)))}return g}function kn(e,n,t){const o=t.controlBar&&t.topSetting,r=t.settings||[],f=i.$.create("div."+un(o?"top":"bottom"),{"aria-label":"Setting"});let h=[],d=!1;const m={loop:{name:e.locales.get("Loop"),type:"switcher",key:"loop",icon:D.get("loop"),default:e.isLoop,onChange:y=>e.setLoop(y)}};_(r.map(y=>typeof y=="string"?m[y]:y));function g(y){_(Array.isArray(y)?y:[y])}function x(y){var T,S;d&&((S=(T=h[0])==null?void 0:T.$ref.querySelector("[data-key="+y+"]"))==null||S.remove(),h=h.filter(b=>b.key===y?(b.$ref.remove(),b=null,!1):!0))}function E(y,T){if(!d)return;const S=f.querySelector('[data-key="'+y+'"] span[role="label"]');S&&(S.innerText=T)}function L(y,T){var S;let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(d)if(typeof T=="number")for(let v=0;v<h.length;v++){const k=h[v];if(k.key==y){k.select(T,b);break}}else(S=f.querySelector('[data-key="'+y+'"][aria-checked]'))==null||S.select(b)}function _(y){y.length<1||(d||(d=!0,i.$.render(f,n),O()),Bt(e,h,y,{target:f}))}function O(){const y=i.$.create("button",{class:P+" "+z,"aria-label":e.locales.get("Settings"),"data-tooltip-pos":t.topSetting?"bottom-right":""},""+D.get("setting"));y.addEventListener("click",S=>{S.stopPropagation(),e.$root.classList.add(te),h[0].$ref.classList.add(ge);function b(v){f.contains(v.target)||(e.$root.classList.remove(te),h.forEach(k=>k.$ref.classList.remove(ge)),document.removeEventListener("click",b))}setTimeout(()=>{document.addEventListener("click",b)})});const T=[t.pictureInPicture&&e.isPipEnabled,t.fullscreen].filter(Boolean).length;if(o){const S=n.querySelector("."+Xe).children[1];S.insertBefore(y,S.children[S.children.length])}else{const S=n.querySelector("."+De).children[1];S.insertBefore(y,S.children[S.children.length-T])}}return{register:g,unregister:x,updateLabel:E,select:L}}const Xe=i.$.css({position:"absolute",top:0,left:0,right:0,"z-index":97,padding:"0.5em 1em 0",transition:"transform 0.3s ease",height:"var(--control-bar-height)","&::before":{position:"absolute",content:"''",width:"100%",display:"block",top:0,left:0,bottom:"-1em","z-index":-1,transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(rgba(0, 0, 0, .3), transparent)"},"& > div:nth-child(1)":{cursor:"pointer",overflow:"hidden"},["@global ."+K+" &"]:{transform:"translateY(calc(-100%))","&::before":{opacity:0}}}),En=i.$.css("width: 2.5em;height: 2.5em;margin:0 -10px;transform: rotate(180deg);"),It=i.$.css("flex:1;font-size:1em;margin: 0 0.25em;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"),ht=i.$.css("display:none"),Sn=(e,n,t)=>{var o,r,f;if(!t.controlBar)return{};const h=(o=t.controlBar)==null?void 0:o.back,d=h&&i.tq,m=i.$.create("div",{class:Xe+" "+De},`<div>
    `+(d?`<span role='button' class="`+En+" "+(h=="fullscreen"?ht:"")+'">'+dt("")+"</span>":"")+`
      <h2 class='`+It+"'>"+((f=(r=e.options)==null?void 0:r.source)==null?void 0:f.title)+`</h2>
    </div>
    <div></div>`),g=m.querySelector("."+It);if(d){const x=g.previousElementSibling;x.addEventListener("click",E=>{e.isFullScreen&&e.exitFullscreen(),e.emit("backward",E)}),h=="fullscreen"&&e.on("fullscreenchange",()=>{e.isFullScreen?x.classList.remove(ht):x.classList.add(ht)})}return e.on("videosourcechanged",x=>{let E=x.payload;g.innerText=E.title||""}),i.$.render(m,n),{cls:{controlBar:Xe}}},Dt=i.$.css({position:"absolute",left:0,right:0,bottom:0,"z-index":97,padding:"0 1em",transition:"transform 0.3s ease, padding 0.3s ease","&::before":{position:"absolute",content:"''",width:"100%",display:"block",bottom:0,left:0,"z-index":-1,top:"-1em",transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(transparent, rgba(0, 0, 0, .3))"},["@global ."+K+" &"]:{padding:0,"pointer-events":"none",transform:"translateY(calc(100% - 8px))","&::before":{opacity:0}}}),Ln=1500,Oe=i.$.css("visibility:hidden;opacity:0;"),_n=(e,n,t)=>{const o=i.$.render(i.$.create("div."+Dt),n),r=Sn(e,n,t),f=ln(e,o,t);t.miniProgressBar||i.$.css({["@global ."+K+" ."+Dt]:{transform:"translateY(100%)"}}),t.showControls=="played"&&(Fe(o,Oe),e.on("error",()=>Ee(o,Oe)),e.on("play",()=>Ee(o,Oe),{once:!0}),e.on(["videosourcechange"],()=>{Fe(o,Oe),e.on("play",()=>Ee(o,Oe),{once:!0})}));const h=()=>{var E;!e.isPlaying&&!i.tq||le(e.$root,K)||le(e.$root,te)||le(e.$root,re)||e.$root.contains(document.activeElement)&&((E=document.activeElement)==null?void 0:E.tagName)=="INPUT"||(Fe(e.$root,K),e.emit("controllervisibilitychange",!0))},d=st(h,Ln),m=d.callee,g=d.clear,x=()=>{g(),le(e.$root,K)&&(Ee(e.$root,K),e.emit("controllervisibilitychange",!1))};return e.on("play",m),e.on(["pause","videosourcechange"],x),i.tq||(e.$root.addEventListener("mousemove",()=>{x(),m()}),e.$root.addEventListener("mouseleave",h)),{cls:Object.assign({},r.cls,f.cls),toggle(){if(le(o,Oe)){e.play();return}le(e.$root,K)?x():h()}}},We={opacity:0,"pointer-events":"none"},Tn=i.$.css(Object.assign({transition:"opacity 100ms linear",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fill:"#fff",width:"3em",height:"3em","z-index":"97","& > button":{width:"100%",height:"100%","border-radius":"100%",background:"var(--primary-color)",opacity:.9,padding:"1em",transition:"transform .2s ease-in-out","&:active":{transform:"scale(.85)"},"& > *":{position:"relative",width:"1.5em",height:"1.5em",left:"-0.2em",top:"-0.25em"}},["@global ."+W+" &"]:We,["@global ."+G+" &"]:We,["@global ."+re+" &"]:We},i.tq&&{["@global ."+K+" &"]:We})),jt=(e,n)=>{const t=i.$.create("div."+Tn,{},'<button aria-label="Play" class="'+P+`" type="button">
      `+D.get("play")+`
    </button>`);i.$.render(t,n).addEventListener("click",()=>e.play())},Pn=i.$.css(`
  display: none;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  color: #fff;
  background: #000;
  z-index: 97;
  align-items: center;
  padding: 0 10px;
  word-break: break-all;
  justify-content: center;
`),qt=i.$.css("display: flex;"),On={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},An=(e,n,t)=>{if(t.errorBuilder){e.on("error",h=>{let d=h.payload;t.errorBuilder(d)});return}const o=i.$.render(i.$.create("div."+Pn,{"aria-label":"Error Overlay"}),n);function r(h){var d;let m="";if(h instanceof Event){const g=(d=h.target)==null?void 0:d.error;if(!g||!g.message&&typeof g.code!="number")return;m=g.message||On[g.code]}else m=h.message;o.innerText=m||"UNKNOWN_ERROR",e.$root.classList.add(re),Fe(o,qt)}function f(){Ee(o,qt),e.$root.classList.remove(re),o.innerText=""}return e.on(["videosourcechange","videoqualitychange"],f),e.on("error",h=>{let d=h.payload;return r(d)}),r},Cn=i.$.css({position:"absolute",top:"0",bottom:"0",left:"0",right:"0",display:"none","align-items":"center","justify-content":"center",["@global ."+G+" &"]:{display:"flex"}}),zn=i.$.css({position:"relative",overflow:"hidden",width:"20%",height:"4px","border-radius":"4px","&::before,&::after":{display:"block",content:"''",position:"absolute",height:"100%",width:"100%","background-color":"var(--primary-color)","border-radius":"4px"},"&::before":{opacity:"0.4"},"&::after":{animation:"indeterminate 1.3s infinite linear","transform-origin":"0% 50%"},"@keyframes indeterminate":{"0%":{transform:"translateX(0) scaleX(0)"},"10%":{transform:"translateX(0) scaleX(0.2)"},"40%":{transform:"translateX(0) scaleX(0.7)"},"60%":{transform:"translateX(60%) scaleX(0.4)"},"100%":{transform:"translateX(100%) scaleX(0.2)"}}}),Vt=(e,n)=>{const t=i.$.create("div."+Cn,{"aria-label":"Loading"},""+(D.get("loadingIndicator")||'<div class="'+zn+'"></div>'));i.$.render(t,n)},Mn=i.$.css({width:"100%",height:"100%",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",["@global ."+te+" &"]:{"z-index":"98"}}),Fn=(e,n,t)=>{const o=i.$.create("div."+Mn);let r=0,f;return o.addEventListener("click",()=>{le(e.$root,te)||(i.tq?t():(r==0&&e.togglePlay(),f&&clearTimeout(f),f=window.setTimeout(()=>{r==2&&e.toggleFullScreen(),r=0},200)),r+=1)}),i.$.render(o,n)},Ht=e=>{const n=e.getAttribute("aria-checked")=="true";e.setAttribute("aria-checked",""+!n),St(e,t=>t.setAttribute("aria-checked",""+n))},Rn=(e,n,t)=>{var o,r,f,h;const d=[],m=(r=(o=n.querySelector("."+Xe))==null?void 0:o.children)==null?void 0:r[1],g=(h=(f=n.querySelector("."+De))==null?void 0:f.children)==null?void 0:h[1],x=[m,g].filter(Boolean);t&&t.forEach(y=>L(y));function E(y){var T,S;const b=y.target,v=b.getAttribute("aria-label"),k=d.find(C=>C.name==v);!k||b.getAttribute("aria-checked")=="true"||(b.tagName.toUpperCase()=="SPAN"?(Ht(b),(T=k.onChange)==null||T.call(k,k.children[+b.getAttribute("data-index")],b.parentElement.previousElementSibling)):b.tagName.toUpperCase()=="BUTTON"&&((S=k.onClick)==null||S.call(k,b)))}x.forEach(y=>{y.addEventListener("click",E)});function L(y){const T=y.position=="top"&&x.length==2,S=y.name,b=y.icon,v=y.children;let k="";const C=`
    <button
      aria-label="`+S+`"
      data-tooltip-pos="`+(T?"bottom-right":"")+`"
      class="`+P+" "+(b?"":Ct)+" "+(y.children?"":z)+`"
      type="button"
    >`+(b||S)+"</button>";y.children?k=`
      <div class="`+Ot+" "+At+'" data-dropdown-pos="'+y.position+'" aria-label="'+S+`">
        `+C+`
        <div class='`+Ie+" "+(T?an:"")+`' role='menu'>
          `+v.map((F,ue)=>`<span
                  role="menuitemradio"
                  aria-haspopup="false"
                  aria-label="`+S+`"
                  class="`+cn+`"
                  aria-checked="`+Boolean(F.default)+`"
                  data-index="`+ue+`"
                >`+F.name+"</span>").join("")+`
          </div>
      </div>`:k=C,d.push(y),T?m==null||m.insertAdjacentHTML("afterbegin",k):g.insertAdjacentHTML("afterbegin",k)}function _(y){x.forEach(T=>{var S,b;(S=T.querySelector("button[aria-label="+y+"]"))==null||S.remove(),(b=T.querySelector("div[aria-label="+y+"]"))==null||b.remove()})}function O(y,T){x.forEach(S=>{Ht(S.querySelector("."+Ie+" > span[aria-label="+y+"]:nth-child("+(T+1)+")"))})}return{register:L,unregister:_,select:O}},Nt=i.$.css({position:"absolute",display:"none",top:"0.625em",left:"0.625em",right:"0.625em","z-index":99,"margin-top":"var(--control-bar-height)",["@global ."+K+" &"]:{"margin-top":0}}),Ut=i.$.css(`
  -moz-user-select: all;
  -webkit-user-select: all;
  -ms-user-select: all;
  user-select: all;
  color: #fff;
  background-color: var(--shadow-background-color);
  border-radius: 2px;
  padding: 5px 10px;
  font-size: 0.875em;
`),Xt=i.$.css(xe||(xe=N([`
  text-align: center;
`]))),Wt=i.$.css(ye||(ye=N([`
  text-align: right;
`]))),Yt=i.$.css(q||(q=N([`
  bottom: 6em;
  top: initial;
`]))),Bn={center:i.$.css(se||(se=N([`
  top: 50%;
  text-align: center;
  transform: translateY(-50%);
`]))),left:"","top-left":"",top:Xt,"top-center":Xt,"top-right":Wt,right:Wt,bottom:Yt,"left-bottom":Yt},In=2e3,Kt=i.$.css("display:block;"),Dn=(e,n)=>{const t=i.$.create("div."+Nt,{"aria-label":"Notice"},'<span class="'+Ut+'"></span>'),o=t.querySelector("."+Ut),r=st(()=>Ee(t,Kt),In),f=r.callee;function h(d,m){o.innerHTML=d,t.className=Nt+" "+Kt+" "+Bn[m||"left"],f()}return e.on("notice",d=>{let m=d.payload;return h(m.text,m.pos)}),i.$.render(t,n),h};function jn(e){return e.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(n,t,o)=>{let r=o.slice(0,3);return o.length===1&&(r=o+"00"),o.length===2&&(r=o+"0"),t+","+r})}function qn(e){return`WEBVTT \r
\r
`.concat(jn(e).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat(`\r
\r
`))}function ft(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function Qt(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split(/[:.]/).map((n,t,o)=>{if(t===o.length-1){if(n.length===1)return"."+n+"00";if(n.length===2)return"."+n+"0"}else if(n.length===1)return(t===0?"0":":0")+n;return t===0?n:t===o.length-1?"."+n:":"+n}).join("")}function Vn(e){const n=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");return`WEBVTT

`+e.split(/\r?\n/).map(t=>{const o=t.match(n);return o?{start:Qt(o[1].trim()),end:Qt(o[2].trim()),text:o[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(r=>r.trim()).join(`
`)}:null}).filter(t=>t).map((t,o)=>t?o+1+`
`+t.start+" --> "+t.end+`
`+t.text:"").filter(t=>t.trim()).join(`

`)}const Zt="Subtitle";function Hn(e,n,t,o){return new Nn(e,n,t,o)}class Nn{constructor(n,t,o,r){if(this.player=n,this.setting=t,this.el=o,this.isShow=!1,this.update=()=>{var f,h;const d=this.$dom,g=(f=this.player.$video.textTracks[0])==null?void 0:f.activeCues;if(g!=null&&g.length){let x="";for(let E=0;E<g.length;E++){const L=g[E];L&&(x+=(h=L.text)==null?void 0:h.split(/\r?\n/).map(_=>"<p>"+_+"</p>").join(""))}d.innerHTML=x}else d.innerHTML=""},!window.TextDecoder){n.emit("notice",{text:n.locales.get("TextDecoder not supported")});return}this.setting=t,this.options=Object.assign({source:[]},r),this.processDefault(),this.createContainer(),this.load(),this.loadSetting(),this.player.on(["destroy","videosourcechange"],this.destroy.bind(this))}updateSource(n){this.changeSource(n)}changeSource(n){this.options.source=n,this.processDefault(),this.load(),this.loadSetting(),this.player.emit("subtitlesourcechange",n)}processDefault(){this.currentSubtitle=Un(this.options.source)}createContainer(){const n=this.el,t=this.options,o=t.color,r=t.shadow,f=t.fontSize,h=t.bottom,d=t.fontFamily;this.$dom=i.$.create("div."+i.$.css({left:"2%",right:"2%","text-align":"center","pointer-events":"none",position:"absolute","line-height":"1.2","font-family":d||"inherit",color:o||"#fff","text-shadow":r||"1px 0 1px #000, 0 1px 1px #000, -1px 0 1px #000, 0 -1px 1px #000, 1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000",bottom:""+(h||"5%"),"font-size":(f||(i.tq?16:20))/16+"em","& > p":{margin:0}}),{"aria-label":"Subtitle"}),i.$.render(this.$dom,n)}createTrack(){this.$track=i.$.render(i.$.create("track",{default:!0,kind:"metadata"}),this.player.$video),i.gn&&(this.$iosTrack=i.$.render(i.$.create("track",{default:!1,kind:"captions"}),this.player.$video),this.player.$video.textTracks[1].mode="hidden",this.player.on("fullscreenchange",n=>{n.payload.isWeb||(this.player.isFullScreen?this.isShow&&(this.player.$video.textTracks[1].mode="showing"):this.player.$video.textTracks[1].mode="hidden")}))}load(){this.currentSubtitle&&(this.$track||this.createTrack(),this.loadSubtitle().then(()=>this.show()).catch(n=>{this.player.emit("notice",{text:n.message})}))}destroy(){const n=this.$dom,t=this.$track,o=this.$iosTrack;t==null||t.removeEventListener("cuechange",this.update),n.innerHTML="",this.setting.unregister(Zt),t!=null&&t.src&&URL.revokeObjectURL(t.src),o!=null&&o.src&&URL.revokeObjectURL(o.src),t==null||t.remove(),o==null||o.remove(),this.$track=void 0,this.$iosTrack=void 0,this.isShow=!1}show(){this.isShow=!0,this.$track.addEventListener("cuechange",this.update)}hide(){const n=this.$track,t=this.$dom;this.isShow=!1,t.innerHTML="",n.removeEventListener("cuechange",this.update)}loadSubtitle(){const n=this.currentSubtitle,t=this.player,o=this.$track,r=this.$iosTrack,f=n.src,h=n.encoding,d=n.type;return fetch(f).then(m=>m.arrayBuffer()).then(m=>{var g;const E=new TextDecoder(h).decode(m);switch(d==null||d=="auto"?(g=/srt|ass|vtt(#|\?|$)/i.exec(f))==null?void 0:g[0]:d){case"srt":return ft(qn(E));case"ass":return ft(Vn(E));case"vtt":return ft(E);default:return f}}).then(m=>{o!=null&&o.src&&URL.revokeObjectURL(o.src),o.src=m,r&&(r.src&&URL.revokeObjectURL(r.src),r.src=m)}).catch(m=>{t.emit("notice",{text:"Subtitle"+m.message})})}loadSetting(){const n=this.options.source;n.length&&this.setting.register({name:this.player.locales.get("Subtitle"),type:"selector",icon:D.get("subtitle"),key:Zt,onChange:t=>{let o=t.value;o?(this.currentSubtitle=o,this.load()):this.hide()},children:[{name:this.player.locales.get("OFF"),default:!this.currentSubtitle}].concat(n==null?void 0:n.map(t=>{var o;return{name:t.name,default:((o=this.currentSubtitle)==null?void 0:o.src)==t.src,value:t}}))})}}function Un(e){return e.find(n=>n.default)}const Xn=(e,n)=>{var t,o;const r=i.$.create("div."+B(n));if(e.isNativeUI){Je(e,!1),jt(e,r),Vt(e,r),i.$.render(r,e.$root);return}const f=D.setupIcons(e,n.icons);wt(e,n,r);const h=An(e,r,n),d=Dn(e,r);Vt(e,r),n.coverButton&&jt(e,r);const m=_n(e,r,n),g=m.cls,x=m.toggle,E=Fn(e,r,x),L=kn(e,r,n);Re(e,n.speed,L);const _=Rn(e,r,n.menu),O=Hn(e,L,r,n.subtitle);Le(e,E,n),Pe(e,n),i.$.render(r,e.$root);let y={};return!i.tq&&((t=n.keyboard)!=null&&t.focused||(o=n.keyboard)!=null&&o.global)&&(y=_t(e,n)),{icons:f,error:h,notice:d,setting:L,menu:_,subtitle:O,keyboard:y,cls:Object.assign({},g,{loading:G,playing:W,focused:Y,fullscreen:ve,webFullScreen:Q,settingShown:te,controllerHidden:K,root:r.className,isError:re,mask:E.className})}},Wn={fullscreen:!0,coverButton:!0,miniProgressBar:!0,autoFocus:!0,forceLandscapeOnFullscreen:!0,showControls:"always",keyboard:{focused:!0},settings:["loop"],theme:{primaryColor:"#6668ab"},speed:["2.0","1.75","1.25","1.0","0.75","0.5"]},Yn=e=>({name:"oplayer-theme-ui",key:"ui",apply:n=>Xn(n,Object.assign(Wn,e))})}}]);
