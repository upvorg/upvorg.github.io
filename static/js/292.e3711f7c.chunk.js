"use strict";(self.webpackChunk_web_index=self.webpackChunk_web_index||[]).push([[292],{6904:(R,j,n)=>{n.d(j,{c:()=>m});var t=n(2148),i=n(7276),u=n(5112),C=n(7632),O=n.n(C),b=n(1532),f=n(1708),N=n(7492),h=n(216);const g={},m=({id:y,onFocus:p,onBlur:w})=>{const[v,$]=(0,i.useState)(null),[P,A]=(0,i.useState)(""),E=(0,f.g)();(0,i.useEffect)(()=>{N.sJ.get(`/post/${y}/comments`).then(c=>{$((c==null?void 0:c.data)||[])}).catch(()=>{$([])})},[]);const D=()=>{if(!P){u.cp.error("\u5199\u70B9\u4EC0\u4E48\u5427");return}N.sJ.post(`/post/${y}/comment`,{data:{content:P}}).then(c=>{c.err||(A(""),$([c.data,...v]))})},S=c=>{c.ctrlKey&&c.keyCode===13&&D()};return(0,t.jsxs)("div",{className:"video-comment",children:[(0,t.jsx)("div",{className:"video-comment__title",children:(0,t.jsx)("h4",{children:"\u8BC4\u8BBA"})}),(0,t.jsxs)("div",{className:"video-comment-edit",children:[(0,t.jsx)("img",{className:"video-comment-edit__avatar",src:(E==null?void 0:E.Avatar)||"/ic_launcher_round.png",alt:""}),(0,t.jsx)("textarea",{className:"video-comment-edit__input",placeholder:"\u7559\u4E0B\u8BC4\u8BBA...",disabled:!E,value:P,onChange:c=>A(c.target.value),onKeyDown:S,onFocus:c=>p==null?void 0:p(c),onBlur:c=>w==null?void 0:w(c)}),(0,t.jsx)("button",{disabled:!E||!P,className:"button is-primary video-comment-edit__button",onClick:D,children:"\u8BC4\u8BBA"})]}),(0,t.jsx)("div",{className:"comment-list",children:v?v.length>0?(0,t.jsx)("ul",{children:v.map(c=>{var Y,_;return(0,t.jsxs)("li",{className:O()("comment-item",{"--o":(E==null?void 0:E.ID)==c.Uid}),children:[(0,t.jsxs)("div",{className:"comment-item__head",children:[(0,t.jsx)("img",{className:"comment-item__avatar",src:(Y=c.Creator)==null?void 0:Y.Avatar,alt:""}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"comment-item__name",children:(_=c.Creator)==null?void 0:_.Nickname}),(0,t.jsx)("p",{className:"comment-item__time",children:(0,b.k3)(c.CreatedAt)})]})]}),(0,t.jsx)("div",{className:"comment-item__content",children:(0,t.jsx)("p",{children:c.Content})})]},c.ID)})}):(0,t.jsx)("p",{className:"empty",children:"\u6682\u65E0\u8BC4\u8BBA"}):(0,t.jsx)(h.cJ,{})})]})}},2188:(R,j,n)=>{n.d(j,{u:()=>i});var t=n(2148);const i=({tags:u})=>u.length?(0,t.jsx)("div",{className:"tags are-medium",children:u.map(({href:C,title:O},b)=>(0,t.jsx)("a",{className:"tag is-primary is-light",href:C,target:"_blank",style:{fontSize:"0.9rem"},children:O},b))}):null},216:(R,j,n)=>{n.d(j,{cJ:()=>c,e6:()=>Y,ym:()=>_});var t=n(2148),i=n(7276);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var u=function(){return u=Object.assign||function(d){for(var l,a=1,o=arguments.length;a<o;a++){l=arguments[a];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(d[s]=l[s])}return d},u.apply(this,arguments)};function C(e,d){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&d.indexOf(a)<0&&(l[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)d.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(l[a[o]]=e[a[o]]);return l}var O=function(){return Math.random().toString(36).substring(6)},b=function(e){var d=e.animate,l=d===void 0?!0:d,a=e.animateBegin,o=e.backgroundColor,s=o===void 0?"#f5f6f7":o,F=e.backgroundOpacity,B=F===void 0?1:F,H=e.baseUrl,I=H===void 0?"":H,k=e.children,x=e.foregroundColor,M=x===void 0?"#eee":x,T=e.foregroundOpacity,ie=T===void 0?1:T,J=e.gradientRatio,L=J===void 0?2:J,z=e.gradientDirection,oe=z===void 0?"left-right":z,ce=e.uniqueKey,W=e.interval,le=W===void 0?.25:W,X=e.rtl,se=X===void 0?!1:X,Q=e.speed,de=Q===void 0?1.2:Q,Z=e.style,me=Z===void 0?{}:Z,q=e.title,ee=q===void 0?"Loading...":q,te=e.beforeMask,K=te===void 0?null:te,ue=C(e,["animate","animateBegin","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","gradientDirection","uniqueKey","interval","rtl","speed","style","title","beforeMask"]),U=ce||O(),re=U+"-diff",ne=U+"-animated-diff",ae=U+"-aria",he=se?{transform:"scaleX(-1)"}:null,G="0; "+le+"; 1",V=de+"s",ge=oe==="top-bottom"?"rotate(90)":void 0;return(0,i.createElement)("svg",u({"aria-labelledby":ae,role:"img",style:u(u({},me),he)},ue),ee?(0,i.createElement)("title",{id:ae},ee):null,K&&(0,i.isValidElement)(K)?K:null,(0,i.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+I+"#"+re+")",style:{fill:"url("+I+"#"+ne+")"}}),(0,i.createElement)("defs",null,(0,i.createElement)("clipPath",{id:re},k),(0,i.createElement)("linearGradient",{id:ne,gradientTransform:ge},(0,i.createElement)("stop",{offset:"0%",stopColor:s,stopOpacity:B},l&&(0,i.createElement)("animate",{attributeName:"offset",values:-L+"; "+-L+"; 1",keyTimes:G,dur:V,repeatCount:"indefinite",begin:a})),(0,i.createElement)("stop",{offset:"50%",stopColor:M,stopOpacity:ie},l&&(0,i.createElement)("animate",{attributeName:"offset",values:-L/2+"; "+-L/2+"; "+(1+L/2),keyTimes:G,dur:V,repeatCount:"indefinite",begin:a})),(0,i.createElement)("stop",{offset:"100%",stopColor:s,stopOpacity:B},l&&(0,i.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+L),keyTimes:G,dur:V,repeatCount:"indefinite",begin:a})))))},f=function(e){return e.children?(0,i.createElement)(b,u({},e)):(0,i.createElement)(N,u({},e))},N=function(e){return(0,i.createElement)(f,u({viewBox:"0 0 476 124"},e),(0,i.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,i.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,i.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,i.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,i.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,i.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},h=function(e){return createElement(f,u({viewBox:"0 0 400 460"},e),createElement("circle",{cx:"31",cy:"31",r:"15"}),createElement("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},g=function(e){return createElement(f,u({viewBox:"0 0 340 84"},e),createElement("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),createElement("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),createElement("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),createElement("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),createElement("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),createElement("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},r=function(e){return createElement(f,u({viewBox:"0 0 400 110"},e),createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),createElement("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),createElement("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),createElement("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),createElement("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},m=function(e){return createElement(f,u({viewBox:"0 0 245 125"},e),createElement("circle",{cx:"10",cy:"20",r:"8"}),createElement("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"50",r:"8"}),createElement("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"80",r:"8"}),createElement("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),createElement("circle",{cx:"10",cy:"110",r:"8"}),createElement("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))};const y=f;var p=Object.defineProperty,w=Object.defineProperties,v=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,E=(e,d,l)=>d in e?p(e,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[d]=l,D=(e,d)=>{for(var l in d||(d={}))P.call(d,l)&&E(e,l,d[l]);if($)for(var l of $(d))A.call(d,l)&&E(e,l,d[l]);return e},S=(e,d)=>w(e,v(d));const c=e=>(0,t.jsxs)(y,S(D({viewBox:"0 0 462 160"},e),{children:[(0,t.jsx)("rect",{x:"70",y:"16",rx:"5",ry:"5",width:"100",height:"12"}),(0,t.jsx)("rect",{x:"70",y:"39",rx:"5",ry:"5",width:"321",height:"20"}),(0,t.jsx)("circle",{cx:"26",cy:"40",r:"26"})]})),Y=e=>(0,t.jsxs)(y,S(D({viewBox:"0 0 500 200"},e),{style:{padding:"0.5em"},children:[(0,t.jsx)("rect",{x:"60",y:"25",rx:"5",ry:"5",width:"50",height:"10"}),(0,t.jsx)("rect",{x:"60",y:"45",rx:"5",ry:"5",width:"60",height:"10"}),(0,t.jsx)("rect",{x:"0",y:"80",rx:"5",ry:"5",width:"46%",height:"20"}),(0,t.jsx)("rect",{x:"0",y:"110",rx:"5",ry:"5",width:"100%",height:"20"}),(0,t.jsx)("rect",{x:"0",y:"140",rx:"5",ry:"5",width:"70%",height:"20"}),(0,t.jsx)("rect",{x:"0",y:"170",rx:"5",ry:"5",width:"60%",height:"20"}),(0,t.jsx)("circle",{cx:"26",cy:"40",r:"26"})]})),_=e=>(0,t.jsxs)(y,S(D({viewBox:"0 0 462 160"},e),{children:[(0,t.jsx)("rect",{x:"70",y:"16",rx:"5",ry:"5",width:"100",height:"12"}),(0,t.jsx)("rect",{x:"70",y:"39",rx:"5",ry:"5",width:"321",height:"20"}),(0,t.jsx)("circle",{cx:"26",cy:"40",r:"26"})]}));c.metadata={name:"comment",github:"comment",description:"comment",filename:"CommentSkeleton"}},5436:(R,j,n)=>{n.d(j,{I:()=>l});var t=n(7276),i=n(8248),u=n(1872),C=n(5372),O=n(7107),b=n(1680),f=n(5104),N=n(5424),h=n(3728),g=n(6820),r=n(1952),m=n(3944);const y={};var p=Object.defineProperty,w=Object.defineProperties,v=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,E=(a,o,s)=>o in a?p(a,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[o]=s,D=(a,o)=>{for(var s in o||(o={}))P.call(o,s)&&E(a,s,o[s]);if($)for(var s of $(o))A.call(o,s)&&E(a,s,o[s]);return a},S=(a,o)=>w(a,v(o)),c=(a,o,s)=>new Promise((F,B)=>{var H=x=>{try{k(s.next(x))}catch(M){B(M)}},I=x=>{try{k(s.throw(x))}catch(M){B(M)}},k=x=>x.done?F(x.value):Promise.resolve(x.value).then(H,I);k((s=s.apply(a,o)).next())}),Y,_;const e={render:{view:{menu:!1,md:!1,html:!0},classname:"markdown_render"},editor:{view:{menu:!0,md:!0,html:!1},classname:"markdown_editor"}},d=(0,i.C)().use(u.c).use(b.c).use(C.c,{allowDangerousHtml:!0}).use(O.c).use(f.c,{properties:"attr"}).use(N.c,S(D({},h._),{attributes:S(D({},h._.attributes),{img:[...((_=(Y=h._)==null?void 0:Y.attributes)==null?void 0:_.img)||[],["style"]]})})).use(g.c),l=a=>{const{value:o="",type:s,onChange:F,customClassName:B="",placeholder:H=""}=a,{view:I,classname:k}=e[s];let x=`markdown ${k}`;return B&&(x+=` ${B}`),t.createElement(r.cp,{className:x,readOnly:s==="render",view:I,value:o,htmlClass:"markdown-body",renderHTML:M=>c(void 0,null,function*(){return(yield d.process(M)).toString()}),onChange:M=>F==null?void 0:F(M.text),placeholder:H})}},1532:(R,j,n)=>{n.d(j,{_m:()=>u,k3:()=>t});function t(h){const g=new Date,r=typeof h=="string"?new Date(h):new Date(h),m=(g.getTime()-r.getTime())/1e3;return m<30?"\u521A\u521A":m<3600?Math.ceil(m/60)+"\u5206\u949F\u524D":m<3600*24?Math.ceil(m/3600)+"\u5C0F\u65F6\u524D":m<3600*24*2?"1\u5929\u524D":m<3600*24*31?Math.ceil(m/3600/24)+"\u5929\u524D":g.getFullYear()===r.getFullYear()?`${r.getMonth()+1}\u6708${r.getDate()}\u65E5`:`${r.getFullYear()}\u5E74${r.getMonth()+1}\u6708${r.getDate()}\u65E5`}function i(h){const g=new Date,r=typeof h=="string"?new Date(h):new Date(h),m=(g.getTime()-r.getTime())/1e3;return m<3600*24?"\u4ECA\u5929":m<3600*24*2?"\u6628\u5929":m<3600*24*31?Math.ceil(m/3600/24)+"\u5929\u524D":g.getFullYear()===r.getFullYear()?`${r.getMonth()+1}\u6708${r.getDate()}\u65E5`:`${r.getFullYear()}\u5E74${r.getMonth()+1}\u6708${r.getDate()}\u65E5`}function u(h,g=!1){const r=typeof h=="string"?new Date(h):new Date(h);return new Date().getFullYear()===r.getFullYear()?`${r.getMonth()+1}\u6708${r.getDate()}\u65E5 ${g?` ${r.getHours()}:${r.getMinutes().toString().padStart(2,"0")}`:""}`:`${r.getFullYear()}\u5E74${r.getMonth()+1}\u6708${r.getDate()}\u65E5 ${g?` ${r.getHours()}:${r.getMinutes().toString().padStart(2,"0")}`:""}`}const C=1,O=2,b=3,f=4;function N(h,g=3){if(!h)return"";const r=new Date(h),m=r.getFullYear(),y=`${`0${r.getMonth()+1}`.slice(-2)}`,p=`${`0${r.getDate()}`.slice(-2)}`,w=`${`0${r.getHours()}`.slice(-2)}`,v=`${`0${r.getMinutes()}`.slice(-2)}`,$=`${`0${r.getSeconds()}`.slice(-2)}`;switch(g){case C:return`${m}-${y}-${p}`;case O:return`${y}-${p} ${w}:${v}`;case f:return`${m}-${y}-${p} ${w}:${v}:${$}`;case b:return`${m}-${y}-${p} ${w}:${v}`;default:return`${m}-${y}-${p} ${w}:${v}`}}}}]);
