"use strict";(self.webpackChunk_web_index=self.webpackChunk_web_index||[]).push([[179],{504:function(N,O,t){var e=t(7339),m=t(1595),p={},u=t(6097),c=t(5813),f=t(8983),v=t(1657),x=t(4246),g,D=["title","titleId"];function y(){return y=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(s[i]=l[i])}return s},y.apply(this,arguments)}function A(s,a){if(s==null)return{};var l=M(s,a),i,d;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);for(d=0;d<h.length;d++)i=h[d],!(a.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(s,i)&&(l[i]=s[i])}return l}function M(s,a){if(s==null)return{};var l={},i=Object.keys(s),d,h;for(h=0;h<i.length;h++)d=i[h],!(a.indexOf(d)>=0)&&(l[d]=s[d]);return l}var K=function(a,l){var i=a.title,d=a.titleId,h=A(a,D);return c.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:l,"aria-labelledby":d},h),i?c.createElement("title",{id:d},i):null,g||(g=c.createElement("path",{d:"M384 352v64c0 17.67-14.33 32-32 32H96c-17.67 0-32-14.33-32-32v-64c0-17.67-14.33-32-32-32s-32 14.33-32 32v64c0 53.02 42.98 96 96 96h256c53.02 0 96-42.98 96-96v-64c0-17.67-14.33-32-32-32S384 334.3 384 352zM201.4 9.375l-128 128c-12.51 12.51-12.49 32.76 0 45.25c12.5 12.5 32.75 12.5 45.25 0L192 109.3V320c0 17.69 14.31 32 32 32s32-14.31 32-32V109.3l73.38 73.38c12.5 12.5 32.75 12.5 45.25 0s12.5-32.75 0-45.25l-128-128C234.1-3.125 213.9-3.125 201.4 9.375z"})))},U=(0,c.forwardRef)(K),$=t.p+"static/media/fa-arrow-up-from-bracket.12e2f135cfaadc1ae41c4e4804eee0fd.svg",W={};function F(){const s=(0,c.useRef)(""),[a]=(0,f.yj)("/search"),[l,i]=(0,c.useState)("Search"),d=(0,x.L)();return(0,c.useEffect)(()=>{fetch("//v1.hitokoto.cn?c=a").then(E=>E.json()).then(E=>{i(E.hitokoto)});const h=document.querySelector(".navbar-burger"),b=()=>{const E=document.getElementById(h.dataset.target);h.classList.toggle("is-active"),E.classList.toggle("is-active")};return h.addEventListener("click",b,!1),()=>{h.removeEventListener("click",b,!1)}},[]),(0,e.jsxs)("nav",{className:"navbar is-transparent",role:"navigation","aria-label":"main navigation",children:[(0,e.jsxs)("div",{className:"navbar-brand",children:[(0,e.jsx)(f.rU,{href:"/",children:(0,e.jsx)("a",{className:"navbar-item",children:(0,e.jsx)("h1",{className:"logo",children:"UPV"})})}),(0,e.jsxs)("a",{role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"upv-nav",children:[(0,e.jsx)("span",{"aria-hidden":"true"}),(0,e.jsx)("span",{"aria-hidden":"true"}),(0,e.jsx)("span",{"aria-hidden":"true"})]})]}),(0,e.jsxs)("div",{id:"upv-nav",className:"navbar-menu",children:[(0,e.jsxs)("div",{className:"navbar-start",children:[(0,e.jsx)(f.rU,{href:"/",children:(0,e.jsx)("a",{className:"navbar-item",children:"Home"})}),(0,e.jsx)("a",{className:"navbar-item",href:"/anime/index",target:"_blank",children:"Schedule"}),(0,e.jsx)("a",{className:"navbar-item",href:"https://cdn.jsdelivr.net/gh/upvorg/cdn@master/apk/app-arm64-v8a-release.apk",target:"_blank",children:"App"}),(0,e.jsx)("a",{className:"navbar-item",href:"/about",target:"_blank",children:"About"})]}),!a&&(0,e.jsx)("div",{className:"navbar-item center-search",children:(0,e.jsxs)("form",{className:"nav-search-form",onSubmit:h=>{h.preventDefault(),window.open(`/search?k=${s.current}`)},children:[(0,e.jsxs)("div",{className:"nav-search-content",children:[(0,e.jsx)("input",{className:"nav-search-input",type:"text",autoComplete:"off",accessKey:"s",maxLength:100,"x-webkit-speech":"","x-webkit-grammar":"builtin:translate",placeholder:l,title:l,onChange:h=>{s.current=h.target.value}}),(0,e.jsx)("div",{className:"nav-search-clean",children:(0,e.jsx)("button",{className:"delete is-small",type:"reset"})})]}),(0,e.jsx)("button",{className:"nav-search-btn icon",children:(0,e.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"search",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"svg-inline--fa fa-search fa-w-16 fa-fw",children:(0,e.jsx)("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"})})})]})}),(0,e.jsxs)("div",{className:"navbar-end",children:[(0,e.jsx)("div",{className:"navbar-item upload",children:(0,e.jsx)("a",{href:u.ol,target:"_blank",children:(0,e.jsxs)("button",{className:"button is-primary","aria-haspopup":"true","aria-controls":"dropdown-menu4",children:[(0,e.jsx)(U,{}),"\xA0\xA0",(0,e.jsx)("strong",{children:"Upload"})]})})}),d?(0,e.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[(0,e.jsx)("div",{className:"navbar-link is-arrowless",children:(0,e.jsx)("figure",{className:"image avatar",children:(0,e.jsx)("img",{className:"is-rounded",src:d.Avatar})})}),(0,e.jsxs)("div",{className:"navbar-dropdown is-right",children:[(0,e.jsx)("a",{className:"navbar-item",href:u.ol+`/user/profile?name=${d.Name}`,target:"_blank",children:"\u6211\u7684\u8D44\u6599"}),(0,e.jsx)("hr",{className:"navbar-divider"}),(0,e.jsx)("a",{className:"navbar-item",onClick:()=>v.g.logout(),children:"\u9000\u51FA\u767B\u5F55"})]})]}):(0,e.jsx)("div",{className:"navbar-item",children:(0,e.jsx)("div",{className:"buttons",children:(0,e.jsx)("a",{href:"/login",className:"button is-light",children:"Log in"})})})]})]})]})}var Y={},G=Object.defineProperty,V=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,L=(s,a,l)=>a in s?G(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,C=(s,a)=>{for(var l in a||(a={}))w.call(a,l)&&L(s,l,a[l]);if(I)for(var l of I(a))H.call(a,l)&&L(s,l,a[l]);return s},B=(s,a)=>V(s,Z(a)),R=(s,a)=>{var l={};for(var i in s)w.call(s,i)&&a.indexOf(i)<0&&(l[i]=s[i]);if(s!=null&&I)for(var i of I(s))a.indexOf(i)<0&&H.call(s,i)&&(l[i]=s[i]);return l};const z=document.getElementById("root"),J=s=>((0,c.useEffect)(()=>{const a=document.querySelector(".upv-header__bar"),l=i=>{z.scrollTop>=222?a.classList.add("fixed-header"):a.classList.remove("fixed-header")};return z.addEventListener("scroll",l),()=>{z.removeEventListener("scroll",l)}},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"upv-header",children:[(0,e.jsx)("div",{className:"upv-header__bar",children:(0,e.jsx)(F,{})}),(0,e.jsx)("div",{className:"upv-header__banner",children:(0,e.jsx)("div",{className:"taper-line"})})]}),(0,e.jsx)("main",{className:"container",children:s.children})]})),Q=s=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"upv-header",children:(0,e.jsx)("div",{className:"upv-header__bar fixed-header",children:(0,e.jsx)(F,{})})}),(0,e.jsx)("main",{className:"container",children:s.children})]}),S=s=>{var a=s,{component:l,layout:i,children:d}=a,h=R(a,["component","layout","children"]);return(0,e.jsx)(f.AW,B(C({},h),{component:({params:b})=>(0,e.jsx)(i,{children:l?(0,e.jsx)(l,C({},b)):typeof d=="function"?d(b):d})}))},r=s=>{var a=R(s,[]);return(0,e.jsx)(S,B(C({},a),{layout:J}))},n=s=>{var a=R(s,[]);return(0,e.jsx)(S,B(C({},a),{layout:Q}))};var o=t(6679),j=t(783),T=()=>{const[s,a]=(0,c.useState)(null);return(0,c.useEffect)(()=>{u.od.interceptors.response.use(d=>d,d=>(d.err&&o.ZP.error(d.err),d.status===401&&(a(null),v.g.logout(`${u.M5}/login?from=${location.href}`)),d));const l=j.V.get(u.yI),i=localStorage.getItem(u.LH);i&&l?a(JSON.parse(i)):l&&u.od.get("/user").then(d=>{d.data&&(a(d.data),localStorage.setItem(u.LH,JSON.stringify(d.data)))})},[]),(0,e.jsx)(f.F0,{children:(0,e.jsxs)(c.Suspense,{fallback:null,children:[(0,e.jsx)(x.S.Provider,{value:s,children:(0,e.jsxs)(f.rs,{children:[(0,e.jsx)(r,{path:"/",component:(0,c.lazy)(()=>Promise.all([t.e(87),t.e(9)]).then(t.bind(t,6009)))}),(0,e.jsx)(r,{path:"/login",component:(0,c.lazy)(()=>Promise.all([t.e(87),t.e(381)]).then(t.bind(t,6381)))}),(0,e.jsx)(n,{path:"/p/:id",component:(0,c.lazy)(()=>Promise.all([t.e(18),t.e(87),t.e(162),t.e(479),t.e(457)]).then(t.bind(t,4635)))}),(0,e.jsx)(n,{path:"/v/:id",component:(0,c.lazy)(()=>Promise.all([t.e(18),t.e(817),t.e(193),t.e(87),t.e(162),t.e(479),t.e(651)]).then(t.bind(t,1017)))}),(0,e.jsx)(n,{path:"/pv/tag",component:(0,c.lazy)(()=>Promise.all([t.e(87),t.e(735)]).then(t.bind(t,8735)))}),(0,e.jsx)(n,{path:"/search",component:(0,c.lazy)(()=>Promise.all([t.e(87),t.e(408)]).then(t.bind(t,8408)))}),(0,e.jsx)(n,{path:"/about",component:(0,c.lazy)(()=>Promise.all([t.e(18),t.e(87),t.e(162),t.e(226)]).then(t.bind(t,8226)))}),(0,e.jsx)(n,{path:"/feedback",component:(0,c.lazy)(()=>Promise.all([t.e(87),t.e(455)]).then(t.bind(t,455)))}),(0,e.jsx)(n,{path:"/anime/index",component:(0,c.lazy)(()=>Promise.all([t.e(87),t.e(875)]).then(t.bind(t,5875)))}),(0,e.jsx)(n,{path:"/:rest*",component:(0,c.lazy)(()=>Promise.all([t.e(87),t.e(118)]).then(t.bind(t,1118)))})]})}),(0,e.jsxs)("footer",{className:"footer",children:[(0,e.jsx)("div",{className:"bd-footer-support",children:(0,e.jsxs)("h4",{className:"bd-footer-title",children:[(0,e.jsx)("strong",{children:"Support"})," ",(0,e.jsx)("span",{className:"font-family-logo",children:"UPV"})]})}),(0,e.jsxs)("div",{className:"content",children:[(0,e.jsxs)("p",{className:"links",children:[(0,e.jsx)("a",{className:"link",href:"/feedback",target:"_blank",children:"\u7559\u8A00"})," ","|"," ",(0,e.jsx)("a",{className:"link",href:"/feedback",target:"_blank",children:"\u53CD\u9988"})," ","|"," ",(0,e.jsx)("a",{className:"link",href:"/about",target:"_blank",children:"\u5173\u4E8E"})]}),(0,e.jsxs)("p",{children:["Copyright \xA9 2022"," ",(0,e.jsx)("a",{href:"/",className:"font-family-logo",children:"UPV"})]})]})]}),(0,e.jsx)(o.x7,{position:"top-right",toastOptions:{success:{iconTheme:{primary:u.iZ,secondary:"#fff"}}},containerStyle:{top:70,right:20}})]})})};t(5552),(0,m.s)(document.getElementById("root")).render((0,e.jsx)(T,{}))},4246:function(N,O,t){t.d(O,{L:function(){return p},S:function(){return m}});var e=t(5813);const m=e.createContext(null),p=()=>e.useContext(m);m.displayName="UserContext"},1657:function(N,O,t){t.d(O,{g:function(){return p}});var e=t(6097),m=t(783),p;(u=>{function c(x){m.V.del(e.yI,"/",e.yK),localStorage.removeItem(e.oS),localStorage.removeItem(e.LH),location.href=x||location.href}u.logout=c;function f(){return m.V.get(e.yI)}u.getAccessToken=f;function v(x){localStorage.setItem(e.oS,m.V.get(e.yI)),localStorage.setItem(e.LH,JSON.stringify(x))}u.login=v})(p||(p={}))},6097:function(N,O,t){t.d(O,{ol:function(){return I},yI:function(){return L},zA:function(){return B},yK:function(){return Y},M5:function(){return G},oS:function(){return H},LH:function(){return w},iZ:function(){return C},od:function(){return S}});var e=t(783),m=Object.defineProperty,p=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,f=(r,n,o)=>n in r?m(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o,v=(r,n)=>{for(var o in n||(n={}))u.call(n,o)&&f(r,o,n[o]);if(p)for(var o of p(n))c.call(n,o)&&f(r,o,n[o]);return r};class x{constructor(){this.resolve=n=>n,this.reject=n=>n}use(n,o){this.resolve=n,o&&(this.reject=o)}}class g{constructor(n){var o,j,P;this.baseUrl=(o=n.baseUrl)!=null?o:"",this.headers=(j=n.headers)!=null?j:{},this.config=(P=n.config)!=null?P:{},this.interceptors={request:new x,response:new x}}static create(n,o){return new g({baseUrl:n,headers:o==null?void 0:o.header,config:o==null?void 0:o.config})}get(n,{headers:o,data:j}={}){return this._send(n,"GET",o,j)}post(n,{headers:o,data:j}={}){return this._send(n,"POST",o,j)}put(n,{headers:o,data:j}={}){return this._send(n,"PUT",o,j)}delete(n,{headers:o,data:j}={}){return this._send(n,"DELETE",o,j)}_send(n,o,j={},P={}){var T,s;const a=(s=(T=this.interceptors.request).resolve)==null?void 0:s.call(T,v(v({},this.headers),j));!(P instanceof FormData)&&this.headers["Content-type"]&&(a["Content-type"]="application/json; charset=UTF-8");let l;return fetch(`${this.baseUrl}${n}`,v(v({method:o,headers:a},this.config),!["GET","HEAD"].includes(o.toUpperCase())&&{body:P instanceof FormData?P:JSON.stringify(P)})).then(i=>{l=i;try{return i.json()}catch(d){throw d}},i=>{var d,h;return console.error("<--- request error"+i),(h=(d=this.interceptors.request).reject)==null?void 0:h.call(d,i)}).then(i=>{var d,h,b,E,X;if(!l.ok)throw(h=(d=this.interceptors.response).reject)==null?void 0:h.call(d,v({status:l.status,statusText:l.statusText},i));return(X=(E=(b=this.interceptors.response).resolve)==null?void 0:E.call(b,i))!=null?X:i})}}var D=Object.defineProperty,y=Object.defineProperties,A=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,$=(r,n,o)=>n in r?D(r,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[n]=o,W=(r,n)=>{for(var o in n||(n={}))K.call(n,o)&&$(r,o,n[o]);if(M)for(var o of M(n))U.call(n,o)&&$(r,o,n[o]);return r},F=(r,n)=>y(r,A(n));const Y="xn--7ov117aclgs4c.life",G="https://xn--7ov117aclgs4c.life",V="https://api.xn--7ov117aclgs4c.life/api",Z=null,I="https://admin.xn--7ov117aclgs4c.life",w="USER_INFO",H="ACCESS_TOKEN",L="access_token",C="#6668ab",B=["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"];var R=(r=>(r[r.NORMAL=4]="NORMAL",r[r.CREATOR=3]="CREATOR",r[r.ADMIN=2]="ADMIN",r[r.ROOT=1]="ROOT",r.ALL="",r))(R||{});const z={[4]:"\u666E\u901A\u7528\u6237",[3]:"\u521B\u4F5C\u8005",[2]:"\u7BA1\u7406\u5458",[1]:"\u8D85\u7EA7\u7BA1\u7406\u5458",[""]:"\u5168\u90E8"};var J=(r=>(r[r.DRAFT=5]="DRAFT",r[r.PUBLISHED=4]="PUBLISHED",r[r.PENDING=3]="PENDING",r[r.REJECT=2]="REJECT",r[r.DELETED=1]="DELETED",r.ALL="",r))(J||{});const Q={[4]:"\u5DF2\u53D1\u5E03",[3]:"\u5F85\u5BA1\u6838",[2]:"\u5DF2\u4E0B\u67B6",[""]:"\u5168\u90E8"},S=g.create(V,{config:{credentials:"include"}});S.interceptors.request.use(r=>{const n=e.V.get(L);return F(W({},r),{Authorization:n?`Bearer ${n}`:""})})},5552:function(N,O,t){t.r(O);var e=(p,u,c)=>new Promise((f,v)=>{var x=y=>{try{D(c.next(y))}catch(A){v(A)}},g=y=>{try{D(c.throw(y))}catch(A){v(A)}},D=y=>y.done?f(y.value):Promise.resolve(y.value).then(x,g);D((c=c.apply(p,u)).next())});let m=!1;if(new URLSearchParams(window.location.search).get("debug")==null){const p=u=>e(void 0,null,function*(){u.isSafari&&(document.body.innerHTML='<h1 style="font-size:2em;font-weight:bold">\u{1F47E}\u6253\u65AD\u65BD\u6CD5!</h1>',yield new Promise(c=>setTimeout(c,1e3))),window.close(),window.location.href="https://www.baidu.com/s?wd=ip"});t.e(556).then(t.t.bind(t,7826,23)).then(function(u){u.addListener(function(c){m=c,c&&p(u)}),u.launch(),window.addEventListener("pageshow",c=>{var f,v;(c.persisted||((v=(f=window.performance)==null?void 0:f.navigation)==null?void 0:v.type)==2)&&m&&p(u)},!1)})}},783:function(N,O,t){t.d(O,{V:function(){return e}});var e;(m=>{function p(c){for(var f=c+"=",v=document.cookie.split(";"),x=0;x<v.length;x++){for(var g=v[x];g.charAt(0)==" ";)g=g.substring(1,g.length);if(g.indexOf(f)==0)return g.substring(f.length,g.length)}return null}m.get=p;function u(c,f,v){document.cookie=c+"="+(f?";path="+f:"")+(v?";domain="+v:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT"}m.del=u})(e||(e={}))}},function(N){var O=function(e){return N(N.s=e)};N.O(0,[217,643],function(){return O(504)});var t=N.O()}]);
